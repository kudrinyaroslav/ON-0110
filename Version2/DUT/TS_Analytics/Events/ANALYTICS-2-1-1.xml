<TestSuit Name="ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE</Name>
    <Description>
      TODO:

    </Description>
  </Parameters>
  <!--positive tests-->
  <Test ID="TC.ANALYTICS-2-1-1.101" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Options.RuleNotification = true, requered notification is retrievd at 1st attempt</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->  
    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="8">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="9">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="10">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.102" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Options.RuleNotification = true, notifications for other VS and Rull Name before requered notification</Name>
    <Description>
      Options.RuleNotification = true
      1st PM response - other VideoSource
      2nd PM response - required VS, other name
      3rd PM response - required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="6">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="otherToken" />
                  <tt:SimpleItem Name="RuleName" Value="otherName" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>              
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="otherName" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>              
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.103" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Options.RuleNotification = false, requered notification is retrievd at 1st attempt</Name>
    <Description>
      Options.RuleNotification = false
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>false</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="6">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <!--<tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>-->
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />                
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>             
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.104" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Options.RuleNotification skipped, requered notification is retrievd at 1st attempt</Name>
    <Description>
      Options.RuleNotification skipped
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>              
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="6">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <!--<tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>-->
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                 
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.105" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Options.RuleNotification = false, GetEventProperties contains RuleName SimpleItemDescription</Name>
    <Description>
      Options.RuleNotification = false
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>false</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="6">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <!--<tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />-->
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.106" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Options.RuleNotification = false, GetEventProperties and event contain RuleName SimpleItemDescription</Name>
    <Description>
      Options.RuleNotification = false
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>false</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="6">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>                
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.107" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[Script does not work]Options.RuleNotification = true, Alalytics was added to Profile (check that required VS is used)</Name>
    <Description>
      Options.RuleNotification = true
      Profile with Video Source token = VS4 is used
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="3" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics3</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="4" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics4</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>2</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <Step id="5">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>3</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector11111">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>4</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="7">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              
            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile2">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile2</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS2</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              
            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile3">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile3</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC3">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS3</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              
            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile4">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile4</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC4">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS4</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>

            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          
          
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile2</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>

          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile3</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>

          <VideoAnalyticsConfiguration token="3" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile4</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>

          <VideoAnalyticsConfiguration token="4" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>Media210.AddConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile4</ProfileToken>
        <Configuration>
          <Type>Analytics</Type>
          <Token>4</Token>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <AddConfigurationResponse>
        </AddConfigurationResponse>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="11">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>4</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>          
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>             
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS4" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="7">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          
          
          
          <MediaProfile token="media_profile4">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile4</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC4">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS4</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="4" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>

            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id="7">
      <Command>Media210.RemoveConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile4</ProfileToken>
        <Configuration>
          <Type>Analytics</Type>         
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <RemoveConfigurationResponse></RemoveConfigurationResponse>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.108" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Options.RuleNotification = true, 'Changed'events before requered notification</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends changed events before required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="OtherMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.109" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Options.RuleNotification = true, requered notification is retrievd at 2nd attempt (empty PM before)</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with no notification
      2nd - with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.110" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Notification: State=false</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="false" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.111" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Notification: custom Source and Data simple items are presen in correct notification</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="AdditionalField1" Value="test" />
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="AdditionalField2" Value="test" />
                  <tt:SimpleItem Name="State" Value="false" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.112" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>RuleOptions: no @Type</Name>
    <Description>
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->  
    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="8">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="9">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="10">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
  </Test>
  <!-- 1398 -->
  
  <Test ID="TC.ANALYTICS-2-1-1.112" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Correct response</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
		</RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="5">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
	
		<!-- amountOfAdditionalRules = 4 -->
	
	<!--end A.8-->

    <Step id="8">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="10">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="12">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
  </Test>
    
  <Test ID="TC.ANALYTICS-2-1-1.113" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.8 - several different rules in GetSupportedRulesResponse and GetRules</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector1" maxInstances="5">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
		  
          <tt:RuleDescription Name="tt:MotionRegion1Detector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
		  
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="2">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector1" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegion1Detector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
	
		<!-- amountOfAdditionalRules = 4 -->
	
	<!--end A.8-->
	
    <Step id="8">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="10">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="12">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
  </Test>
    
  <Test ID="TC.ANALYTICS-2-1-1.114" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.8 - GetSupportedRules - no maxInstances; CreateRulesResponse</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
	<!--end A.8-->
	
    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="9">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="11">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
  </Test>
    
  <Test ID="TC.ANALYTICS-2-1-1.115" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.8 - empty GetRules response</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="5">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
<!--           <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>

              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                

              
            </tt:ElementItem>

              <tt:Extension>

              </tt:Extension>
            </tt:Parameters>
          </Config> -->
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
	
		<!-- amountOfAdditionalRules = 4 -->
	
	<!--end A.8-->
	
    <Step id="8">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="10">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="12">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
  </Test>
    
  <Test ID="TC.ANALYTICS-2-1-1.116" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.8 - GetSupportedRules - no maxInstances; SOAP fault response (executed a.9)</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
	<!--end A.8-->
	
    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
		<!--A.9 start-->
	
    <Step id="8">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegio2nDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector1" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
		
		<!--end A.9-->
	
    <Step id="10">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="12">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="13">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="14">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    

<!-- restore a.9 -->

    <Step id="15">
		<Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <ElementItem Name="MotionRegion">
              <MotionRegionConfig Armed="true" Sensitivity="1" xmlns="http://www.onvif.org/ver20/analytics">
                <Polygon xmlns="http://www.onvif.org/ver10/schema">
                  <Point x="1" y="1" />
                  <Point x="1" y="1080" />
                  <Point x="1920" y="1" /><Point x="1920" y="1080" />
                </Polygon>
              </MotionRegionConfig>
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
<!-- end restore a.9 -->
	
	<Step id ="16">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
 
 
  </Test>
    
  <Test ID="TC.ANALYTICS-2-1-1.117" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.8 - no tt:MotionRegionDetector Rules in GetRulesResponse</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="5">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector1" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
	
		<!-- amountOfAdditionalRules = 5 -->
	
	<!--end A.8-->
	
    <Step id="8">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="10">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="12">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
  </Test>
    
  <Test ID="TC.ANALYTICS-2-1-1.118" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>amountOfAdditionalRules = 0 (executed a.9)</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="1">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
	
		<!-- amountOfAdditionalRules = 0 -->
	
	<!--end A.8-->
	
		<!--A.9 start-->
	
    <Step id="8">
		<Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
		
		<!--end A.9-->

    <Step id="10">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="12">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="13">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="14">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

<!-- restore a.9 -->

    <Step id="15">
		<Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <ElementItem Name="MotionRegion">
              <MotionRegionConfig Armed="true" Sensitivity="1" xmlns="http://www.onvif.org/ver20/analytics">
                <Polygon xmlns="http://www.onvif.org/ver10/schema">
                  <Point x="1" y="1" />
                  <Point x="1" y="1080" />
                  <Point x="1920" y="1" /><Point x="1920" y="1080" />
                </Polygon>
              </MotionRegionConfig>
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
     <Step id ="16">
		 <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 
  </Test>
  
  <!-- 1185  -->
    
  <Test ID="TC.ANALYTICS-2-1-1.119" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>motionRegionConfigOptions.DisarmSupport = true</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
	<!--end A.8-->
	
    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
		<!--A.9 start-->
	
    <Step id="8">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegio2nDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector1" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
		
		<!--end A.9-->
	
    <Step id="10">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="12">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="13">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="14">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="15">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
<!-- restore a.9 -->

    <Step id="16">
		<Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <ElementItem Name="MotionRegion">
              <MotionRegionConfig Armed="true" Sensitivity="1" xmlns="http://www.onvif.org/ver20/analytics">
                <Polygon xmlns="http://www.onvif.org/ver10/schema">
                  <Point x="1" y="1" />
                  <Point x="1" y="1080" />
                  <Point x="1920" y="1" /><Point x="1920" y="1080" />
                </Polygon>
              </MotionRegionConfig>
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

 
  </Test>
    
  <Test ID="TC.ANALYTICS-2-1-1.120" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>motionRegionConfigOptions.DisarmSupport = false</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>false</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
	<!--end A.8-->
	
    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
		<!--A.9 start-->
	
    <Step id="8">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegio2nDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector1" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
		
		<!--end A.9-->
	
    <Step id="10">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="12">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="13">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="14">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="15">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 	
<!-- restore a.9 -->

    <Step id="16">
		<Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <ElementItem Name="MotionRegion">
              <MotionRegionConfig Armed="true" Sensitivity="1" xmlns="http://www.onvif.org/ver20/analytics">
                <Polygon xmlns="http://www.onvif.org/ver10/schema">
                  <Point x="1" y="1" />
                  <Point x="1" y="1080" />
                  <Point x="1920" y="1" /><Point x="1920" y="1080" />
                </Polygon>
              </MotionRegionConfig>
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

 

  </Test>
    
  <Test ID="TC.ANALYTICS-2-1-1.121" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>motionRegionConfigOptions.DisarmSupport skipped</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <!-- <axt:DisarmSupport>false</axt:DisarmSupport> -->
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
	<!--end A.8-->
	
    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
		<!--A.9 start-->
	
    <Step id="8">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegio2nDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector1" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
		
		<!--end A.9-->
	
    <Step id="10">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
 
    <Step id="12">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="13">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="14">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="15">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
 	
<!-- restore a.9 -->

    <Step id="16">
		<Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <ElementItem Name="MotionRegion">
              <MotionRegionConfig Armed="true" Sensitivity="1" xmlns="http://www.onvif.org/ver20/analytics">
                <Polygon xmlns="http://www.onvif.org/ver10/schema">
                  <Point x="1" y="1" />
                  <Point x="1" y="1080" />
                  <Point x="1920" y="1" /><Point x="1920" y="1080" />
                </Polygon>
              </MotionRegionConfig>
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

 

  </Test>

  
  
  <!--Negative tests-->
  <Test ID="TC.ANALYTICS-2-1-1.201" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>No Event Service address</Name>
    <Description>
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>                
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.202" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] No notification in PM responses</Name>
    <Description>
     Device sends PM without notifications
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.203" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] only 'Changed' events</Name>
    <Description>
      Device sends PM only with 'Changed' events
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>  
  <Test ID="TC.ANALYTICS-2-1-1.204" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] incorrect value of Data.SimpleItem with Name = "State" (not boolean)</Name>
    <Description>
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="Active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.205" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] skipped Data.SimpleItem with Name = "State"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <!--<tt:SimpleItem Name="State" Value="Active" />-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.206" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] skipped Data</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <!--<tt:Data>
                  <tt:SimpleItem Name="State" Value="Active" />
                </tt:Data>-->
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.207" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] Options.RuleNotification = true, Notifications with skipped Source.SimpleItem with Name = "Name"</Name>
    <Description>
      Options.RuleNotification = true
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <!--<tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />-->
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.208" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] Options.RuleNotification = true, no Notification with required Source.SimpleItem Name</Name>
    <Description>
      Options.RuleNotification = true

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS2" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS2" />
                  <tt:SimpleItem Name="RuleName" Value="other1" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
<Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="other2" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.209" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] Options.RuleNotification = false, no Notification for required Video Source token</Name>
    <Description>
      Options.RuleNotification = false
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>false</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <!--<tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>-->
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS2" />
                  
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS3" />
                 
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.210" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] Options.RuleNotification = true, no Source.SimpleItem with Name = "VideoSource"</Name>
    <Description>
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfig" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.211" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] Options.RuleNotification = false, no Source.SimpleItem with Name = "VideoSource"</Name>
    <Description>
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>false</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <!--<tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>-->
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfig" Value="VS1" />
                  <!--<tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />-->
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  
  <Test ID="TC.ANALYTICS-2-1-1.212" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] incorrect Topic in 'Initialized' event</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion1</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.213" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] incorrect Topic in 'Changed' event</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion1</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <!--<Test ID="TC.ANALYTICS-2-1-1.214" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[notification] more than one notification</Name>
    <Description>
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    --><!--A.2--><!--
    --><!--A.1--><!--
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    --><!--end of A.1--><!--
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    --><!--end of A.2--><!--
    --><!--A.4 start--><!--
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    --><!--end A.4--><!--
    --><!--A.3 start--><!--
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    --><!--end A.3--><!--
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            --><!--Zero or more repetitions:--><!--
            --><!--<SimpleItem Name="?" Value="?"/>--><!--
            --><!--Zero or more repetitions:--><!--
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              --><!--You may enter ANY elements at this point--><!--
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                  <tt:SimpleItem Name="RuleName" Value="Other" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>-->
  <Test ID="TC.ANALYTICS-2-1-1.215" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] incorrect type of MessageDescription.Data.SimpleItemDescription item with Name = "State"</Name>
    <Description>
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:string"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    
    
    

    
    

  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.216" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] skipped Data.SimpleItemDescription item with Name = "State"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <!--<tt:SimpleItemDescription Name="State" Type="xs:string"/>-->
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.217" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] skipped Data</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <!--<tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:string"/>
                  </tt:Data>-->
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.218" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] incorrect type of Source.SimpleItemDescription with Name = "RuleName"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:boolean"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.219" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] skipped Source.SimpleItemDescription with Name = "RuleName" when Options.RuleNotification = true</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <!--<tt:SimpleItemDescription Name="RuleName" Type="xs:boolean"/>-->
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.220" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] Incorrect type of Source.SimpleItemDescription with Name = "VideoSource"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:Token"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.221" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] skipped Source.SimpleItemDescription with Name = "VideoSource"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <!--<tt:SimpleItemDescription Name="VideoSource" Type="tt:Token"/>-->
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.222" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] skipped Source</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <!--<tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:Token"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>-->
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.223" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] IsProperty="false"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.224" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] skipped IsProperty</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.225" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>[GetEventProperties] no tns1:RuleEngine/MotionRegionDetector/Motion topic</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine1 xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine1>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.226" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>GetRuleOptions: no option with Type="axt:MotionRegionConfigOptions"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions1">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
   
    








  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.227" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>GetRuleOptions: no option with Name="MotionRegion"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion1" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>










  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.228" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>GetRuleOptions: no MotionRegionConfigOptions element</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions1>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions1>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>










  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.229" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Empty GetProfiles list</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    










  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.230" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Empty list of Analytics configurations that support MotionRegionDetector</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector1">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>

    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>










  </Test>
  <Test ID="TC.ANALYTICS-2-1-1.231" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>No Analytics configurations on device</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    












  </Test>

  <Test ID="TC.ANALYTICS-2-1-1.232" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>Ckecl rollback of profile in case incorrect notification</Name>
    <Description>
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="3" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics3</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="4" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics4</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>

        </SupportedRules>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>2</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <Step id="5">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>3</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector11111">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>4</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="7">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>

            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile2">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile2</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS2</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>

            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile3">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile3</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC3">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS3</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>

            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile4">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile4</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC4">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS4</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>

            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>


        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile2</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>

          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile3</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>

          <VideoAnalyticsConfiguration token="3" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile4</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>

          <VideoAnalyticsConfiguration token="4" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>Media210.AddConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile4</ProfileToken>
        <Configuration>
          <Type>Analytics</Type>
          <Token>4</Token>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <AddConfigurationResponse>
        </AddConfigurationResponse>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <Step id="4">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="11">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>4</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="incorrect" />
                  <tt:SimpleItem Name="RuleName" Value="TestMotionRegion" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="7">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>



          <MediaProfile token="media_profile4">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile4</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC4">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS4</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="4" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>

            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id="7">
      <Command>Media210.RemoveConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile4</ProfileToken>
        <Configuration>
          <Type>Analytics</Type>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <RemoveConfigurationResponse></RemoveConfigurationResponse>
      </ResponseParameters>
    </Step>

  </Test>

  <!-- 1398 -->
    
  <Test ID="TC.ANALYTICS-2-1-1.233" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.8 - supportedRules does not contain RuleDescription element with Name value is equal to tt:MotionRegionDetector: empty response</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
         <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<!--           <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="5">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription> -->
        </SupportedRules> 
      </ResponseParameters>
    </Step>
	

		<!-- amountOfAdditionalRules = 4 -->
	
	<!--end A.8-->
    <Step id="7">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
   
  <Test ID="TC.ANALYTICS-2-1-1.234" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.8 - supportedRules does not contain RuleDescription element with Name value is equal to tt:MotionRegionDetector: no RuleDescription</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
         <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
           <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
 <!--         <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="5">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription> -->
        </SupportedRules> 
      </ResponseParameters>
    </Step>
	

	<!--end A.8-->

    <Step id="7">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step> 
  </Test>
   
  <Test ID="TC.ANALYTICS-2-1-1.235" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.8 - supportedRules does not contain RuleDescription element with Name value is equal to tt:MotionRegionDetector: no tt:MotionRegionDetector</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
         <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
           <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector1" maxInstances="5">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription> 
        </SupportedRules> 
      </ResponseParameters>
    </Step>
	
	<!-- amountOfAdditionalRules = 4 -->
	
	<!--end A.8-->

    <Step id="7">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
   
  <Test ID="TC.ANALYTICS-2-1-1.236" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>maxInstances = true; fault on CreateRules</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
		</RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="5">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
	
		<!-- amountOfAdditionalRules = 4 -->
	
	<!--end A.8-->

    <Step id="8">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>   
    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
   
  <Test ID="TC.ANALYTICS-2-1-1.237" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.9 - empty GetRulesResponse</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="1">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
	
		<!-- amountOfAdditionalRules = 0 -->
	
	<!--end A.8-->
	
		<!--A.9 start-->
	
    <Step id="8">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>

        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
		
		<!--end A.9-->

    <Step id="9">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
   
    <Step id="10">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

 
  </Test>
   
  <Test ID="TC.ANALYTICS-2-1-1.238" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>A.9 - no tt:MotionRegionDetector Rules in GetRulesResponse</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector" maxInstances="1">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
	
		<!-- amountOfAdditionalRules = 0 -->
	
	<!--end A.8-->
	
		<!--A.9 start-->
	
    <Step id="8">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector1" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>

		
		<!--end A.9-->

    <Step id="9">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    
    <Step id="10">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

 
  </Test>
   
  <Test ID="TC.ANALYTICS-2-1-1.239" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>SOAP fault response - A.9 - empty GetRulesResponse</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
	<!--end A.8-->

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
			<!--A.9 start-->
	
    <Step id="8">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>

		<!--end A.9-->
	
    <Step id="9">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    
    <Step id="10">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

 
  </Test>
   
  <Test ID="TC.ANALYTICS-2-1-1.240" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>SOAP fault response - A.9 - no tt:MotionRegionDetector Rules in GetRulesResponse</Name>
    <Description>
      Options.RuleNotification = true
      DUT sends the 1st PM response with required notification.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--A.2-->
    <!--A.1-->
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>
    <!--end of A.1-->
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
    <!--end of A.2-->
    <!--A.4 start-->
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <!--end A.4-->
    <!--A.3 start-->
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
              <axt:MaxRegions>3</axt:MaxRegions>
              <axt:DisarmSupport>true</axt:DisarmSupport>
              <axt:PolygonSupport>true</axt:PolygonSupport>
              <axt:PolygonLimits>
                <tt:Min>1</tt:Min>
                <tt:Max>10</tt:Max>
              </axt:PolygonLimits>
              <axt:SingleSensitivitySupport>true</axt:SingleSensitivitySupport>
              <axt:RuleNotification>true</axt:RuleNotification>
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3--> 
	
	<!--A.8 start-->
		
    <Step id="6">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
	
	<!--end A.8-->

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
			<!--A.9 start-->
	
    <Step id="8">
      <Command>Analytics20.GetRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfig>
          <Config Name="TestMotionRegion" Type="tt:MotionRegio2nDetector" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>
		  
          <Config Name="TestMotionRegion" Type="tt:MotionRegionDetector1" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Parameters>
              <!--Zero or more repetitions:-->
              <!--<tt:SimpleItem Name="?" Value="?"/>-->
              <!--Zero or more repetitions:-->
              <tt:ElementItem Name="MotionRegion">
                <axt:MotionRegionConfig Armed="true" Sensitivity="1">
                  <tt:Polygon>
                    <tt:Point x="1" y="1" />
                    <tt:Point x="1" y="1080" />
                    <tt:Point x="1920" y="1" />
                  </tt:Polygon>
                </axt:MotionRegionConfig>
                
                <!--You may enter ANY elements at this point-->
              
            </tt:ElementItem>
              <!--Optional:-->
              <tt:Extension>
                <!--You may enter ANY elements at this point-->
              </tt:Extension>
            </tt:Parameters>
          </Config>

        </ArrayOfConfig>
        
        
      </ResponseParameters>
    </Step>
		
		<!--end A.9-->
	
    <Step id="8">
		<Command>Analytics20.CreateRules</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    
    <Step id="10">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

 
  </Test>
 <Test ID="TC.ANALYTICS-2-1-1.501" ONVIFTestID="ANALYTICS-2-1-1" Enabled="true">
    <TestName>MOTION REGION DETECTOR EVENT</TestName>
    <Name>#1865</Name>
    <Description>
     
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/accessrules/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/analytics/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost:17934/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>   
    <Step id="2">
      <Command>Media210.GetAnalyticsConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoAnalyticsConfiguration>
          <VideoAnalyticsConfiguration token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <tt:Name>Analytics1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                  <tt:ElementItem Name="Name2"/>
                </tt:Parameters>
              </tt:AnalyticsModule>
            </tt:AnalyticsEngineConfiguration>
            <tt:RuleEngineConfiguration>
              <tt:Rule Name="Rule1" Type="xs:string">
                <tt:Parameters>
                  <tt:SimpleItem Name="Name1" Value="SomeName"/>
                  <tt:ElementItem Name="Name2" />
                </tt:Parameters>
              </tt:Rule>
            </tt:RuleEngineConfiguration>
          </VideoAnalyticsConfiguration>
        </ArrayOfVideoAnalyticsConfiguration>
      </ResponseParameters>
    </Step>   
    <Step id="3">
      <Command>Analytics20.GetSupportedRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <SupportedRules xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <tt:RuleContentSchemaLocation>http://anyuri</tt:RuleContentSchemaLocation>
          <tt:RuleDescription Name="tt:MotionRegionDetector">
            <tt:Parameters>
              <tt:ElementItemDescription Name="MotionRegion" Type="axt:MotionRegionConfig"/>
            </tt:Parameters>
            <tt:Messages>
              <tt:Source>
                <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                <tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>
              </tt:Source>
              <tt:Key/>
              <tt:Data>
                <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
              </tt:Data>
              <tt:ParentTopic>tns1:RuleEngine/MotionRegionDetector/Motion</tt:ParentTopic>
            </tt:Messages>
          </tt:RuleDescription>
        </SupportedRules>
      </ResponseParameters>
    </Step>
   
    <Step id="4">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Type>VideoSource</Type>
        <Type>Analytics</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <Analytics token="1" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
                <tt:Name>Analytics1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsModule" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeValue"/>
                      <tt:ElementItem Name="Name2"/>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>
                  <tt:Rule Name="Rule1" Type="xs:string">
                    <tt:Parameters>
                      <tt:SimpleItem Name="Name1" Value="SomeName"/>
                      <tt:ElementItem Name="Name2" />
                    </tt:Parameters>
                  </tt:Rule>
                </tt:RuleEngineConfiguration>
              </Analytics>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>   
    <Step id="5">
      <Command>Analytics20.GetRuleOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RuleType>tt:MotionRegionDetector</RuleType>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfConfigOptions xmlns:axt="http://www.onvif.org/ver20/analytics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <ConfigOptions Name="MotionRegion" Type="axt:MotionRegionConfigOptions">
            <axt:MotionRegionConfigOptions>
                    
            </axt:MotionRegionConfigOptions>
          </ConfigOptions>
        </ArrayOfConfigOptions>
      </ResponseParameters>
    </Step>
    <!--end A.3-->
    <Step id ="6">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
                      xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:pt="http://www.onvif.org/ver10/pacs">
          <tns1:Device xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <Trigger>
              <Relay3 wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay3>
            </Trigger>
          </tns1:Device>
          <tns1:RuleEngine xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <MotionRegionDetector>
              <Motion  wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="VideoSource" Type="tt:ReferenceToken"/>
                    <!--<tt:SimpleItemDescription Name="RuleName" Type="xs:string"/>-->
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Motion >
            </MotionRegionDetector>
          </tns1:RuleEngine>


        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Analytics20.CreateRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <Rule Name="TestMotionRegion" Type="tt:MotionRegionDetector">
          <Parameters>
            <!--Zero or more repetitions:-->
            <!--<SimpleItem Name="?" Value="?"/>-->
            <!--Zero or more repetitions:-->
            <ElementItem Name="MotionRegion" Armed="true" Sensitivity="1">
              <Polygon>
                <Point x="1" y="1" />
                <Point x="1" y="1080" />
                <Point x="1920" y="1" /><Point x="1920" y="1080" />
              </Polygon>
              <!--You may enter ANY elements at this point-->
            </ElementItem>
          </Parameters>
        </Rule>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:RuleEngine/MotionRegionDetector/Motion</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSource" Value="VS1" />
                 
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="State" Value="true" />
                </tt:Data>               
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Analytics20.DeleteRules</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <RuleName>TestMotionRegion</RuleName>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</TestSuit>