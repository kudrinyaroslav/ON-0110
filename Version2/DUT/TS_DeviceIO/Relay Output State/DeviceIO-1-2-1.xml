<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>DeviceIO commands template</Name>
    <Description>
    </Description>
  </Parameters>
  <Test ID="Features.01_01" ONVIFTestID="FEATURES" Enabled="true">
    <TestName>FEATURES</TestName>
    <Name>GetCapabilities and services</Name>
    <Description>
      GetCapabilities: supported
      GetServices: not supported
    </Description>
    <ExpectedResult>
      <TestSummary>
        Profile S: supported

        <![CDATA[
   

]]>
      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Device>
            <tt:XAddr>http://CAMERA_IP/onvif/device_service</tt:XAddr>
            <tt:Network>
              <tt:IPFilter>false</tt:IPFilter>
              <tt:ZeroConfiguration>false</tt:ZeroConfiguration>
              <tt:IPVersion6>false</tt:IPVersion6>
              <tt:DynDNS>true</tt:DynDNS>
            </tt:Network>
            <tt:System>
              <tt:DiscoveryResolve>true</tt:DiscoveryResolve>
              <tt:DiscoveryBye>true</tt:DiscoveryBye>
              <tt:RemoteDiscovery>false</tt:RemoteDiscovery>
              <tt:SystemBackup>false</tt:SystemBackup>
              <tt:SystemLogging>true</tt:SystemLogging>
              <tt:FirmwareUpgrade>false</tt:FirmwareUpgrade>
              <tt:SupportedVersions>
                <tt:Major>1</tt:Major>
                <tt:Minor>1</tt:Minor>
              </tt:SupportedVersions>
            </tt:System>
            <tt:IO>
              <tt:InputConnectors>0</tt:InputConnectors>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:IO>
            <tt:Security>
              <tt:TLS1.1>false</tt:TLS1.1>
              <tt:TLS1.2>false</tt:TLS1.2>
              <tt:OnboardKeyGeneration>false</tt:OnboardKeyGeneration>
              <tt:AccessPolicyConfig>false</tt:AccessPolicyConfig>
              <tt:X.509Token>false</tt:X.509Token>
              <tt:SAMLToken>false</tt:SAMLToken>
              <tt:KerberosToken>false</tt:KerberosToken>
              <tt:RELToken>false</tt:RELToken>
            </tt:Security>
          </tt:Device>
          <tt:Events>
            <tt:XAddr>http://CAMERA_IP/onvif/event</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
          <tt:Imaging>
            <tt:XAddr>http://CAMERA_IP/onvif/imaging</tt:XAddr>
          </tt:Imaging>
          <tt:Media>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
          <tt:PTZ>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
          </tt:PTZ>
          <tt:Extension>
            <tt:DeviceIO>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
              <tt:VideoSources>1</tt:VideoSources>
              <tt:VideoOutputs>1</tt:VideoOutputs>
              <tt:AudioSources>1</tt:AudioSources>
              <tt:AudioOutputs>1</tt:AudioOutputs>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:DeviceIO>
            <tt:AnalyticsDevice>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            </tt:AnalyticsDevice>
          </tt:Extension>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Device10.GetServices</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
        </ArrayOfService>
      </ResponseParameters>
    </Step>
  </Test>
  <!--Positive tests-->
  <Test ID = "TC.DEVICEIO-1-2-1.DTT_BUG" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>bug 42136 - russian words in comment</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
                <!--Если не inactive - fail-->
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  
  <Test ID = "TC.DEVICEIO-1-2-1.101" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Correct response</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="*">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Device>
            <tt:XAddr>http://CAMERA_IP/onvif/device_service</tt:XAddr>
            <tt:Network>
              <tt:IPFilter>false</tt:IPFilter>
              <tt:ZeroConfiguration>false</tt:ZeroConfiguration>
              <tt:IPVersion6>false</tt:IPVersion6>
              <tt:DynDNS>true</tt:DynDNS>
            </tt:Network>
            <tt:System>
              <tt:DiscoveryResolve>true</tt:DiscoveryResolve>
              <tt:DiscoveryBye>true</tt:DiscoveryBye>
              <tt:RemoteDiscovery>false</tt:RemoteDiscovery>
              <tt:SystemBackup>false</tt:SystemBackup>
              <tt:SystemLogging>true</tt:SystemLogging>
              <tt:FirmwareUpgrade>false</tt:FirmwareUpgrade>
              <tt:SupportedVersions>
                <tt:Major>1</tt:Major>
                <tt:Minor>1</tt:Minor>
              </tt:SupportedVersions>
            </tt:System>
            <tt:IO>
              <tt:InputConnectors>0</tt:InputConnectors>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:IO>
            <tt:Security>
              <tt:TLS1.1>false</tt:TLS1.1>
              <tt:TLS1.2>false</tt:TLS1.2>
              <tt:OnboardKeyGeneration>false</tt:OnboardKeyGeneration>
              <tt:AccessPolicyConfig>false</tt:AccessPolicyConfig>
              <tt:X.509Token>false</tt:X.509Token>
              <tt:SAMLToken>false</tt:SAMLToken>
              <tt:KerberosToken>false</tt:KerberosToken>
              <tt:RELToken>false</tt:RELToken>
            </tt:Security>
          </tt:Device>
          <tt:Events>
            <tt:XAddr>http://CAMERA_IP/onvif/event</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
          <tt:Imaging>
            <tt:XAddr>http://CAMERA_IP/onvif/imaging</tt:XAddr>
          </tt:Imaging>
          <tt:Media>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
          <tt:PTZ>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
          </tt:PTZ>
          <tt:Extension>
            <tt:DeviceIO>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
              <tt:VideoSources>1</tt:VideoSources>
              <tt:VideoOutputs>1</tt:VideoOutputs>
              <tt:AudioSources>1</tt:AudioSources>
              <tt:AudioOutputs>1</tt:AudioOutputs>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:DeviceIO>
            <tt:AnalyticsDevice>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            </tt:AnalyticsDevice>
          </tt:Extension>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <tt:SimpleItem Name="LogicalState1" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.102" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Several Initialized events. Needed RelayOutput in second PullMes</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="6">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="9">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.103" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Test Annex3. every time odd message is recived by pull message</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
            <RelayOutput token="Relay4">
              <tt:Properties>
                <tt:Mode>Bistable</tt:Mode>
                <tt:DelayTime>PT10S</tt:DelayTime>
                <tt:IdleState>closed</tt:IdleState>
              </tt:Properties>
            </RelayOutput>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--Start Annex A3-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay2</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay2">
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>-->
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay3</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay3">
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>-->
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <!--End Annex A3-->


    <Step id="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="7">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay3" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="14">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay4" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="15">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="16">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.104" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Test Annex3. every time odd empty message is recived by pull message</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
            <RelayOutput token="Relay4">
              <tt:Properties>
                <tt:Mode>Bistable</tt:Mode>
                <tt:DelayTime>PT10S</tt:DelayTime>
                <tt:IdleState>closed</tt:IdleState>
              </tt:Properties>
            </RelayOutput>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--Start Annex A3-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay2</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay2">
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>-->
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay3</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay3">
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>-->
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <!--End Annex A3-->


    <Step id="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="7">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay3" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="14">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay4" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="15">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="16">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.105" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>No option with Mode= Bistable for any RelayOutput</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
            <RelayOutput token="Relay4">
              <tt:Properties>
                <tt:Mode>Monostable</tt:Mode>
                <tt:DelayTime>PT10S</tt:DelayTime>
                <tt:IdleState>closed</tt:IdleState>
              </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--Start Annex A3-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay2</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay2">
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>-->
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay3</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay3">
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>-->
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>-->
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay4</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay4">
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>-->
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <!--End Annex A3-->
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.106" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>No optional DelayTimes in GetRelayOutputOptions</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <!--<DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>-->
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--If not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.107" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Initial state in PM = inactive</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.108" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Empty Options list</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <!--<RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>-->
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.109" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>IdleState is closed, exist restore command (step 11)</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>closed</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.110" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Mode is Monostable, exist restore command (step 11)</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <!--Restore configuration-->
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  
  
  <!--Negative tests-->
  <Test ID = "TC.DEVICEIO-1-2-1.201" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>empty Relay Outputs list</Name>
    <Description>
      4. If relayOutputsList is empty, FAIL the test and skip other steps.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <!--<RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>-->
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
  </Test> 
  <Test ID = "TC.DEVICEIO-1-2-1.202" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>No Changed event</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  -->
          <!--if not inactive fail-->
          <!--
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.203" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Incorrect state afetr 1st set</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="9">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.204" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Incorrect state afetr 2nd set</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.205" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>GetRelayOutputs: Invalid schema</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <!--<tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>-->
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.206" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>[#1202] Log for ticket. different RelayOutputOptions token name in GetRelayOutputOptions</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="output1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT30S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="output2">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>

        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Value="output1" Name="RelayToken" />
                </tt:Source>
                <tt:Key></tt:Key>
                <tt:Data>
                  <tt:SimpleItem Value="Inactive" Name="LogicalState" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>Relay1</Token>
        <Properties>
          <Mode>Bistable</Mode>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <RelayOutputToken>Relay1</RelayOutputToken>
      <LogicalState>active</LogicalState>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.207" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Different topic in PullMessage</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Profile</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Profile</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Profile</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.208" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Different relay token name in PullMesages</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.209" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Threr is no PropertyOperation = Initialized in PullMessage</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.210" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>SimpleItem Name="LogicalState" Value="active" is missed in PullMessages</Name>
    <Description>
      14.3.1.	If notification does not contain Data.SimpleItem with LogicalState name, FAIL the test and skip other steps.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <!--Start Annex A2-->
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--End Annex A2-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <!--<tt:SimpleItem Name="LogicalState" Value="active" />-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <!--<tt:SimpleItem Name="LogicalState" Value="inactive" />-->
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <!--<tt:SimpleItem Name="LogicalState" Value="active" />-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.211" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Monostable mod is presented but DelayTimes unexists</Name>
    <Description>
      ticket 1329. According to WSDL for command GetRelayOutputOptions:DelayTimes element must be present if MonoStable mode is supported.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.212" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>LogicalState=0 in PM</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="*">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Device>
            <tt:XAddr>http://CAMERA_IP/onvif/device_service</tt:XAddr>
            <tt:Network>
              <tt:IPFilter>false</tt:IPFilter>
              <tt:ZeroConfiguration>false</tt:ZeroConfiguration>
              <tt:IPVersion6>false</tt:IPVersion6>
              <tt:DynDNS>true</tt:DynDNS>
            </tt:Network>
            <tt:System>
              <tt:DiscoveryResolve>true</tt:DiscoveryResolve>
              <tt:DiscoveryBye>true</tt:DiscoveryBye>
              <tt:RemoteDiscovery>false</tt:RemoteDiscovery>
              <tt:SystemBackup>false</tt:SystemBackup>
              <tt:SystemLogging>true</tt:SystemLogging>
              <tt:FirmwareUpgrade>false</tt:FirmwareUpgrade>
              <tt:SupportedVersions>
                <tt:Major>1</tt:Major>
                <tt:Minor>1</tt:Minor>
              </tt:SupportedVersions>
            </tt:System>
            <tt:IO>
              <tt:InputConnectors>0</tt:InputConnectors>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:IO>
            <tt:Security>
              <tt:TLS1.1>false</tt:TLS1.1>
              <tt:TLS1.2>false</tt:TLS1.2>
              <tt:OnboardKeyGeneration>false</tt:OnboardKeyGeneration>
              <tt:AccessPolicyConfig>false</tt:AccessPolicyConfig>
              <tt:X.509Token>false</tt:X.509Token>
              <tt:SAMLToken>false</tt:SAMLToken>
              <tt:KerberosToken>false</tt:KerberosToken>
              <tt:RELToken>false</tt:RELToken>
            </tt:Security>
          </tt:Device>
          <tt:Events>
            <tt:XAddr>http://CAMERA_IP/onvif/event</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
          <tt:Imaging>
            <tt:XAddr>http://CAMERA_IP/onvif/imaging</tt:XAddr>
          </tt:Imaging>
          <tt:Media>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
          <tt:PTZ>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
          </tt:PTZ>
          <tt:Extension>
            <tt:DeviceIO>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
              <tt:VideoSources>1</tt:VideoSources>
              <tt:VideoOutputs>1</tt:VideoOutputs>
              <tt:AudioSources>1</tt:AudioSources>
              <tt:AudioOutputs>1</tt:AudioOutputs>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:DeviceIO>
            <tt:AnalyticsDevice>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            </tt:AnalyticsDevice>
          </tt:Extension>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="0" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>

                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <tt:SimpleItem Name="LogicalState1" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-1.501" ONVIFTestID="DEVICEIO-1-2-1" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>#1823: LogicalState=false in PM</Name>
    <Description>
Refresh features with GU 7.150
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="*">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Device>
            <tt:XAddr>http://CAMERA_IP/onvif/device_service</tt:XAddr>
            <tt:Network>
              <tt:IPFilter>false</tt:IPFilter>
              <tt:ZeroConfiguration>false</tt:ZeroConfiguration>
              <tt:IPVersion6>false</tt:IPVersion6>
              <tt:DynDNS>true</tt:DynDNS>
            </tt:Network>
            <tt:System>
              <tt:DiscoveryResolve>true</tt:DiscoveryResolve>
              <tt:DiscoveryBye>true</tt:DiscoveryBye>
              <tt:RemoteDiscovery>false</tt:RemoteDiscovery>
              <tt:SystemBackup>false</tt:SystemBackup>
              <tt:SystemLogging>true</tt:SystemLogging>
              <tt:FirmwareUpgrade>false</tt:FirmwareUpgrade>
              <tt:SupportedVersions>
                <tt:Major>1</tt:Major>
                <tt:Minor>1</tt:Minor>
              </tt:SupportedVersions>
            </tt:System>
            <tt:IO>
              <tt:InputConnectors>0</tt:InputConnectors>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:IO>
            <tt:Security>
              <tt:TLS1.1>false</tt:TLS1.1>
              <tt:TLS1.2>false</tt:TLS1.2>
              <tt:OnboardKeyGeneration>false</tt:OnboardKeyGeneration>
              <tt:AccessPolicyConfig>false</tt:AccessPolicyConfig>
              <tt:X.509Token>false</tt:X.509Token>
              <tt:SAMLToken>false</tt:SAMLToken>
              <tt:KerberosToken>false</tt:KerberosToken>
              <tt:RELToken>false</tt:RELToken>
            </tt:Security>
          </tt:Device>
          <tt:Events>
            <tt:XAddr>http://CAMERA_IP/onvif/event</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
          <tt:Imaging>
            <tt:XAddr>http://CAMERA_IP/onvif/imaging</tt:XAddr>
          </tt:Imaging>
          <tt:Media>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
          <tt:PTZ>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
          </tt:PTZ>
          <tt:Extension>
            <tt:DeviceIO>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
              <tt:VideoSources>1</tt:VideoSources>
              <tt:VideoOutputs>1</tt:VideoOutputs>
              <tt:AudioSources>1</tt:AudioSources>
              <tt:AudioOutputs>1</tt:AudioOutputs>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:DeviceIO>
            <tt:AnalyticsDevice>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            </tt:AnalyticsDevice>
          </tt:Extension>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Output_1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          
          
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Output_1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="false" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    
    
    <Step id ="11">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
</TestSuit>
