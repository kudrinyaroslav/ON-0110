<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>DeviceIO commands template</Name>
    <Description>
    </Description>
  </Parameters>
  <Test ID = "TC.Feat.01" ONVIFTestID="DEVICEIO-Feat" Enabled="true">
    <TestName>Device IO Service Features</TestName>
    <Name>Monostable: Supported, Monostable/Open and Monostable/Closed: Undefined</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <Code>Receiver</Code>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters special="2">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Device>
            <tt:XAddr>http://CAMERA_IP/onvif/device_service</tt:XAddr>
            <tt:Network>
              <tt:IPFilter>false</tt:IPFilter>
              <tt:ZeroConfiguration>false</tt:ZeroConfiguration>
              <tt:IPVersion6>false</tt:IPVersion6>
              <tt:DynDNS>true</tt:DynDNS>
            </tt:Network>
            <tt:System>
              <tt:DiscoveryResolve>true</tt:DiscoveryResolve>
              <tt:DiscoveryBye>true</tt:DiscoveryBye>
              <tt:RemoteDiscovery>false</tt:RemoteDiscovery>
              <tt:SystemBackup>false</tt:SystemBackup>
              <tt:SystemLogging>true</tt:SystemLogging>
              <tt:FirmwareUpgrade>false</tt:FirmwareUpgrade>
              <tt:SupportedVersions>
                <tt:Major>1</tt:Major>
                <tt:Minor>1</tt:Minor>
              </tt:SupportedVersions>
            </tt:System>
            <tt:Security>
              <tt:TLS1.1>false</tt:TLS1.1>
              <tt:TLS1.2>false</tt:TLS1.2>
              <tt:OnboardKeyGeneration>false</tt:OnboardKeyGeneration>
              <tt:AccessPolicyConfig>false</tt:AccessPolicyConfig>
              <tt:X.509Token>false</tt:X.509Token>
              <tt:SAMLToken>false</tt:SAMLToken>
              <tt:KerberosToken>false</tt:KerberosToken>
              <tt:RELToken>false</tt:RELToken>
            </tt:Security>
          </tt:Device>
          <tt:Events>
            <tt:XAddr>http://CAMERA_IP/onvif/event</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
          <tt:Imaging>
            <tt:XAddr>http://CAMERA_IP/onvif/imaging</tt:XAddr>
          </tt:Imaging>
          <!--           <tt:Media>
						<tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
						<tt:StreamingCapabilities>
						<tt:RTPMulticast>true</tt:RTPMulticast>
						<tt:RTP_TCP>false</tt:RTP_TCP>
						<tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
						</tt:StreamingCapabilities>
					</tt:Media> -->
          <tt:PTZ>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
          </tt:PTZ>
          <tt:Extension>
            <tt:DeviceIO>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
              <tt:VideoSources>1</tt:VideoSources>
              <tt:VideoOutputs>1</tt:VideoOutputs>
              <tt:AudioSources>1</tt:AudioSources>
              <tt:AudioOutputs>1</tt:AudioOutputs>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:DeviceIO>
            <tt:AnalyticsDevice>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            </tt:AnalyticsDevice>
          </tt:Extension>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>True</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">

          <RelayOutput token="RO1">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT60S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>


    <Step id ="9">
      <Command>DeviceIO10.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities VideoSources="2" VideoOutputs="2" AudioSources="2" AudioAutputs="2" RelayOutputs="2" DigitalInputs="1"/>
      </ResponseParameters>
    </Step>



    <Step id ="6">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="RO1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">1 3</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <RelayOutputToken>RO1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT30S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
    </Step>
    
    
    <Step id ="7">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType
				xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
				xmlns:tt="http://www.onvif.org/ver10/schema"
				xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"
				xmlns:tns1="http://www.onvif.org/ver10/topics"
				xmlns:pt="http://www.onvif.org/ver10/pacs"
				xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <!-- tns1:Device/Trigger/Relay-->
          <tns1:VideoSource xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
            <ImageTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="1">
                <tt:Source>
                  <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Key>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                </tt:Key>
                <tt:Data>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                </tt:Data>
              </tt:MessageDescription>

              <ImagingService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </ImagingService>

              <AnalyticsService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </AnalyticsService>

              <RecordingService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </RecordingService>
            </ImageTooBlurry>

            <ImageTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="1">
                <tt:Source>
                  <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Key>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                </tt:Key>
                <tt:Data>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                </tt:Data>
              </tt:MessageDescription>

              <ImagingService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </ImagingService>

              <AnalyticsService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </AnalyticsService>

              <RecordingService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </RecordingService>
            </ImageTooDark>

            <ImageTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="1">
                <tt:Source>
                  <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Key>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                </tt:Key>
                <tt:Data>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                </tt:Data>
              </tt:MessageDescription>

              <ImagingService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </ImagingService>

              <AnalyticsService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </AnalyticsService>

              <RecordingService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </RecordingService>
            </ImageTooBright>

            <GlobalSceneChange wstop:topic="true">
              <tt:MessageDescription IsProperty="1">
                <tt:Source>
                  <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Key>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                </tt:Key>
                <tt:Data>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                </tt:Data>
              </tt:MessageDescription>

              <ImagingService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </ImagingService>

              <AnalyticsService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </AnalyticsService>

              <RecordingService wstop:topic="true">
                <tt:MessageDescription IsProperty="1">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Key>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  </tt:Key>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                    <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </RecordingService>
            </GlobalSceneChange>

            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="1">
                <tt:Source>
                  <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken"/>
                  <tt:SimpleItemDescription Name="RelayToken1" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Key>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                </tt:Key>
                <tt:Data>
                  <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState"/>
                  <tt:SimpleItemDescription Name="LogicalState1" Type="tt:RelayLogicalState"/>
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
          </tns1:VideoSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="8">
      <Command>Device10.GetScopes</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfScope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/Profile/T</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/Profile/G</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/Profile/C</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/video_encoder</tt:ScopeItem>
          </Scope>
          <!--<Scope xmlns:tt="http://www.onvif.org/ver10/schema">
						<tt:ScopeDef>Fixed</tt:ScopeDef>
						<tt:ScopeItem>onvif://www.onvif.org/Profile/Streaming</tt:ScopeItem>
					</Scope>-->
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/ptz</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Configurable</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/f040b8ff-99fd-4a53-b96c-3a5e0d79bfb8</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/audio_encoder</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/hardware/P3343</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/name/AXIS%20P3343</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Configurable</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/location/city/NewCity</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Transmitter</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Analytic</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Storage</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Display</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Display</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/video_analytics</tt:ScopeItem>
          </Scope>
        </ArrayOfScope>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>GetDeviceInformation</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Manufacturer>DUT Simulator</Manufacturer>
        <Model>DUT</Model>
        <FirmwareVersion>000000</FirmwareVersion>
        <SerialNumber>000000000000000000</SerialNumber>
        <HardwareId>H00000</HardwareId>
      </ResponseParameters>
    </Step>

    <Step id="10">
      <Command>DeviceIO10.GetVideoSources</Command>
      <Response>Normal</Response>
      <RequestParameters />
      <ResponseParameters>
        <ArrayOfString>
          <string>1</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>

    <Step id="11">
      <Command>Imaging20.GetOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoSourceToken>1</VideoSourceToken>
      </RequestParameters>
      <ResponseParameters>
        <ImagingOptions20 xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:BacklightCompensation>
            <tt:Mode>ON</tt:Mode>
            <tt:Mode>OFF</tt:Mode>
            <tt:Level>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:Level>
          </tt:BacklightCompensation>
          <tt:Brightness>
            <tt:Min>0</tt:Min>
            <tt:Max>10</tt:Max>
          </tt:Brightness>
          <tt:ColorSaturation>
            <tt:Min>0</tt:Min>
            <tt:Max>6</tt:Max>
          </tt:ColorSaturation>
          <tt:Contrast>
            <tt:Min>0</tt:Min>
            <tt:Max>6</tt:Max>
          </tt:Contrast>
          <tt:Exposure>
            <tt:Mode>AUTO</tt:Mode>
            <tt:Priority>LowNoise</tt:Priority>
            <tt:Priority>FrameRate</tt:Priority>

          </tt:Exposure>
          <tt:Focus>
            <tt:AutoFocusModes>AUTO</tt:AutoFocusModes>

            <tt:NearLimit>
              <tt:Min>0</tt:Min>
              <tt:Max>10</tt:Max>
            </tt:NearLimit>


          </tt:Focus>
          <tt:IrCutFilterModes>ON</tt:IrCutFilterModes>
          <tt:IrCutFilterModes>OFF</tt:IrCutFilterModes>

          <tt:Sharpness>
            <tt:Min>0</tt:Min>
            <tt:Max>6</tt:Max>
          </tt:Sharpness>
          <tt:WhiteBalance>
            <tt:Mode>MANUAL</tt:Mode>

            <tt:YrGain>
              <tt:Min>0</tt:Min>
              <tt:Max>255</tt:Max>
            </tt:YrGain>

            <tt:Extension>
            </tt:Extension>
          </tt:WhiteBalance>
          <tt:WideDynamicRange>
            <tt:Mode>ON</tt:Mode>
            <tt:Mode>OFF</tt:Mode>

          </tt:WideDynamicRange>
          <tt:Extension>
            <tt:ImageStabilization>
              <tt:Mode>OFF</tt:Mode>
              <tt:Mode>ON</tt:Mode>
              <tt:Mode>AUTO</tt:Mode>
              <tt:Mode>Extended</tt:Mode>
              <tt:Level>
                <tt:Min>0</tt:Min>
                <tt:Max>10</tt:Max>
              </tt:Level>
            </tt:ImageStabilization>
            <tt:Extension>
              <tt:IrCutFilterAutoAdjustment>
                <tt:BoundaryType>Common</tt:BoundaryType>
                <tt:BoundaryType>ToOn</tt:BoundaryType>
                <tt:BoundaryType>ToOff</tt:BoundaryType>
                <tt:BoundaryType>Extended</tt:BoundaryType>
                <tt:BoundaryOffset>true</tt:BoundaryOffset>
                <tt:ResponseTimeRange>
                  <tt:Min>PT1S</tt:Min>
                  <tt:Max>PT60S</tt:Max>
                </tt:ResponseTimeRange>
              </tt:IrCutFilterAutoAdjustment>
              <tt:Extension>
                <tt:ToneCompensationOptions>
                  <tt:Mode>OFF</tt:Mode>
                  <tt:Mode>ON</tt:Mode>
                  <tt:Mode>AUTO</tt:Mode>
                  <tt:Level>true</tt:Level>
                </tt:ToneCompensationOptions>
                <tt:DefoggingOptions>
                  <tt:Mode>OFF</tt:Mode>
                  <tt:Mode>ON</tt:Mode>
                  <tt:Mode>AUTO</tt:Mode>
                  <tt:Level>true</tt:Level>
                </tt:DefoggingOptions>
                <tt:NoiseReductionOptions>
                  <tt:Level>true</tt:Level>
                </tt:NoiseReductionOptions>

              </tt:Extension>
            </tt:Extension>
          </tt:Extension>

        </ImagingOptions20>
      </ResponseParameters>
    </Step>

  </Test>
  
  <!--Positive tests-->
  <Test ID = "TC.DEVICEIO-1-2-3.101" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Correct response. Discrete = false in GetRelayOutputOptions</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.102" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>OutputOptions.Discrete = True, DelayTime 20 and 120</Name>
    <Description>
      !!! Compare parameter: Set DelayTime should be PT20S !!!
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT120S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
            <RelayOutput token="Relay4">
              <tt:Properties>
                <tt:Mode>Bistable</tt:Mode>
                <tt:DelayTime>PT10S</tt:DelayTime>
                <tt:IdleState>closed</tt:IdleState>
              </tt:Properties>
            </RelayOutput>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--Start Annex A3-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay2</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay2">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay3</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay3">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">true</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <!--End Annex A3-->


    <Step id="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="7">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT20S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay3" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="14">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay4" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="15">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="16">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT120S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="17">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.103" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Discrete skipped in Options</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <!--<Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>-->
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.104" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Discrete and DelayTimes skipped in Options</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <!--<DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>-->
            <!--<Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>-->
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.105" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>OutputOptions.Discrete = True. DelayTime= 5 5.5</Name>
    <Description>
      !!! Compare parameter: Set DelayTime should be PT5S !!!
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT120S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
            <RelayOutput token="Relay4">
              <tt:Properties>
                <tt:Mode>Bistable</tt:Mode>
                <tt:DelayTime>PT10S</tt:DelayTime>
                <tt:IdleState>closed</tt:IdleState>
              </tt:Properties>
            </RelayOutput>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--Start Annex A3-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay2</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay2">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">5 5.5</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay3</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay3">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">5 5.5</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">true</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <!--End Annex A3-->


    <Step id="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="7">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT20S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay3" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="14">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay4" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="15">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="16">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT120S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="17">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.106" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>OutputOptions.Discrete = True. DelayTime= 1 5.5 10</Name>
    <Description>
      !!! Compare parameter: Set DelayTime should be PT5.5S !!!
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT120S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
            <RelayOutput token="Relay4">
              <tt:Properties>
                <tt:Mode>Bistable</tt:Mode>
                <tt:DelayTime>PT10S</tt:DelayTime>
                <tt:IdleState>closed</tt:IdleState>
              </tt:Properties>
            </RelayOutput>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--Start Annex A3-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay2</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay2">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">1 5.5 10</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay3</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay3">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">1 5.5 10</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">true</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <!--End Annex A3-->


    <Step id="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="7">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT20S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay3" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="14">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay4" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="15">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="16">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT120S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="17">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.107" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>No Monostable mode in Options</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay2">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay3">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
   </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.108" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – BISTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>OutputOptions.Discrete = True. DelayTime= 1 3 7 120</Name>
    <Description>
      !!! Compare parameter: Set DelayTime should be PT3S !!!
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT120S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
            <RelayOutput token="Relay4">
              <tt:Properties>
                <tt:Mode>Bistable</tt:Mode>
                <tt:DelayTime>PT10S</tt:DelayTime>
                <tt:IdleState>closed</tt:IdleState>
              </tt:Properties>
            </RelayOutput>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <!--Start Annex A3-->
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay2</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay2">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">1 3 7 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay3</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay3">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <!--<Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>-->
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">1 3 7 120</DelayTimes>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">1 3 7 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">true</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <!--End Annex A3-->


    <Step id="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="7">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT3S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay3" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="14">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay4" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="15">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="16">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT120S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="17">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.109" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>To check test when Monostable/Open and Monostable/Closed: Undefined</Name>
    <Description>
      Refresh features with TC.Feat.01
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="RO1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>          
          
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="RO1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>RO1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  
  <!--Negative tests-->
  <Test ID = "TC.DEVICEIO-1-2-3.201" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Discrete=true, DelayTimes skipped</Name>
    <Description>
      Should set PT5S
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <!--<DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>-->
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">true</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.202" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>No Initialized event. PropertyOperation="Initialized" is absent</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.203" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>No Changed event for required token</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay2" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.204" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Incorrect state afetr 2nd set</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  <!--if not inactive fail-->
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.DEVICEIO-1-2-3.205" ONVIFTestID="DEVICEIO-1-2-3" Enabled="true">
    <TestName>IO SETRELAYOUTPUTSTATE – MONOSTABLE MODE (OPENED IDLE STATE)</TestName>
    <Name>Empty pullMessages</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>DeviceIO10.GetRelayOutputs</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay1">
            <tt:Properties>
              <tt:Mode>Bistable</tt:Mode>
              <tt:DelayTime>PT1S</tt:DelayTime>
              <tt:IdleState>open</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay2">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
          <RelayOutput token="Relay3">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT10S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>DeviceIO10.GetRelayOutputOptions</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfRelayOutputOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutputOptions token="Relay1">
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Bistable</Mode>
            <Mode xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">Monostable</Mode>
            <DelayTimes xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">20 120</DelayTimes>
            <Discrete xmlns="http://www.onvif.org/ver10/deviceIO/wsdl">false</Discrete>
          </RelayOutputOptions>
        </ArrayOfRelayOutputOptions>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:TopicExpression>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:2634/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters />
          <wsa:Metadata />
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Monostable</Mode>
          <DelayTime>PT5S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>inactive</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="inactive" />
                  --><!--if not inactive fail--><!--
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>DeviceIO10.SetRelayOutputState</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <LogicalState>active</LogicalState>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="10">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now">
        </CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Device/Trigger/Relay</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="RelayToken" Value="Relay1" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="LogicalState" Value="active" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>DeviceIO10.SetRelayOutputSettings</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <RelayOutputToken>Relay1</RelayOutputToken>
        <Properties>
          <Mode>Bistable</Mode>
          <DelayTime>PT1S</DelayTime>
          <IdleState>open</IdleState>
        </Properties>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  
 
</TestSuit>
