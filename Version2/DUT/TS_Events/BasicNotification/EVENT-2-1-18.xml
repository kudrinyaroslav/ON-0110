<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>EVENT-2-1-18 BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</Name>
    <Description>
    </Description>
  </Parameters>
  <Test ID = "TC.EVENT-2-1-18.01" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>Correct response</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return Correct response:
      Received event topic is presented in GetEventProperties response
      GetEventProperties response is correct: only root elements have prefixes

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
        EVENT-2-1-18 BASIC NOTIFICATION INTERFACE - NOTIFY FILTER

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   Timeout of 60 seconds will be used
   
   STEP 3 - Parse topic
      Topic: tns1:VideoSource/SignalLoss; Namespaces: tns1="http://www.onvif.org/ver10/topics"
      WARNING: topic not found
   STEP PASSED

   STEP 4 - Creating listening server
   STEP PASSED

   STEP 5 - Send Subscribe request
      Transmit done
      Receive done
   STEP PASSED

   STEP 6 - Check that the DUT returned Subscribe response
   STEP PASSED

   STEP 7 - Check that CurrentTime is specified
   STEP PASSED

   STEP 8 - Check that TerminationTime is specified
   STEP PASSED

   STEP 9 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 10 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 11 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 12 - Check that URL specified is valid
   STEP PASSED

   STEP 13 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 14 - Wait for notification
      Receive done
   STEP PASSED

   STEP 15 - Validate notifications SOAP packet
   STEP PASSED

   STEP 16 - Validate Headers
   STEP PASSED

   STEP 17 - Check that DUT sent notification messages
   STEP PASSED

   STEP 18 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 19 - Validate messages
   STEP PASSED

   STEP 20 - Send Unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST PASSED

        ]]>


      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-2-1-18.02" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>No Topics in EventProperties</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return no Topics in EventProperties.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        EVENT-2-1-18 BASIC NOTIFICATION INTERFACE - NOTIFY FILTER

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        The DUT provides no topics. Test passed.
        TEST PASSED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-2-1-18.03" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>Correct response (received topic not found)</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return Correct response: received event topic is not presented in GetEventProperties response.

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
        EVENT-2-1-18 BASIC NOTIFICATION INTERFACE - NOTIFY FILTER

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   Timeout of 60 seconds will be used
   
   STEP 3 - Parse topic
      Topic: tns1:VideoSource/SignalLoss; Namespaces: tns1="http://www.onvif.org/ver10/topics"
      WARNING: topic not found
   STEP PASSED

   STEP 4 - Creating listening server
   STEP PASSED

   STEP 5 - Send Subscribe request
      Transmit done
      Receive done
   STEP PASSED

   STEP 6 - Check that the DUT returned Subscribe response
   STEP PASSED

   STEP 7 - Check that CurrentTime is specified
   STEP PASSED

   STEP 8 - Check that TerminationTime is specified
   STEP PASSED

   STEP 9 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 10 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 11 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 12 - Check that URL specified is valid
   STEP PASSED

   STEP 13 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 14 - Wait for notification
      Receive done
   STEP PASSED

   STEP 15 - Validate notifications SOAP packet
   STEP PASSED

   STEP 16 - Validate Headers
   STEP PASSED

   STEP 17 - Check that DUT sent notification messages
   STEP PASSED

   STEP 18 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 19 - Validate messages
   STEP PASSED

   STEP 20 - Send Unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST PASSED
]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66:8080/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <Message xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </Message>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  
  <Test ID = "TC.EVENT-2-1-18.04" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>Not expected topic</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return incorrect response: notification with not excpected topic.

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
        EVENT-2-1-18 BASIC NOTIFICATION INTERFACE - NOTIFY FILTER

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   Timeout of 60 seconds will be used
   
   STEP 3 - Parse topic
      Topic: tns1:VideoSource/SignalLoss; Namespaces: tns1="http://www.onvif.org/ver10/topics"
      WARNING: topic not found
   STEP PASSED

   STEP 4 - Creating listening server
   STEP PASSED

   STEP 5 - Send Subscribe request
      Transmit done
      Receive done
   STEP PASSED

   STEP 6 - Check that the DUT returned Subscribe response
   STEP PASSED

   STEP 7 - Check that CurrentTime is specified
   STEP PASSED

   STEP 8 - Check that TerminationTime is specified
   STEP PASSED

   STEP 9 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 10 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 11 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 12 - Check that URL specified is valid
   STEP PASSED

   STEP 13 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 14 - Wait for notification
      Receive done
   STEP PASSED

   STEP 15 - Validate notifications SOAP packet
   STEP PASSED

   STEP 16 - Validate Headers
   STEP PASSED

   STEP 17 - Check that DUT sent notification messages
   STEP PASSED

   STEP 18 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 19 - Validate messages
      Invalid topic. 

      Expected: tns1:VideoSource/SignalLoss, where 

        xmlns:tns1=http://www.onvif.org/ver10/topics

      Actual: tns1:Device, where 

        xmlns:tns1=http://www.onvif.org/ver10/topics
   STEP FAILED

   STEP 20 - Send Unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST FAILED
]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66:8080/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2"
      xmlns:tns1="http://www.onvif.org/ver10/topics">
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <SubscriptionReference>
          <Address xmlns="http://www.w3.org/2005/08/addressing">http://192.168.10.79</Address>
          <ReferenceParameters xmlns="http://www.w3.org/2005/08/addressing" />
          <Metadata xmlns="http://www.w3.org/2005/08/addressing" />
        </SubscriptionReference>
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Device</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <Message xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </Message>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-2-1-18.05" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>Two NotificationMessage in one notify</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return correct response: tow notification.

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
     
]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66:8080/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
      
       <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <Message xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </Message>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-2-1-18.06" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>Two Notifications</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return correct response: tow notification.

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
     
]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66:8080/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
      
       <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <Message xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </Message>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
      
       <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <Message xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </Message>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-2-1-18.07" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>The second notification with incorrect topic</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return tow notification. 
      The first notification has correct topic, the second notification has incorrect (not expected) topic

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
       EVENT-2-1-18 BASIC NOTIFICATION INTERFACE - NOTIFY FILTER

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   Timeout of 60 seconds will be used
   
   STEP 3 - Parse topic
      Topic: tns1:VideoSource/SignalLoss; Namespaces: tns1="http://www.onvif.org/ver10/topics"
      WARNING: topic not found
   STEP PASSED

   STEP 4 - Creating listening server
   STEP PASSED

   STEP 5 - Send Subscribe request
      Transmit done
      Receive done
   STEP PASSED

   STEP 6 - Check that the DUT returned Subscribe response
   STEP PASSED

   STEP 7 - Check that CurrentTime is specified
   STEP PASSED

   STEP 8 - Check that TerminationTime is specified
   STEP PASSED

   STEP 9 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 10 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 11 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 12 - Check that URL specified is valid
   STEP PASSED

   STEP 13 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 14 - Wait for notification
      Receive done
   STEP PASSED

   STEP 15 - Validate notifications SOAP packet
   STEP PASSED

   STEP 16 - Validate Headers
   STEP PASSED

   STEP 17 - Check that DUT sent notification messages
   STEP PASSED

   STEP 18 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 19 - Validate messages
      Invalid topic. 

      Expected: tns1:VideoSource/SignalLoss, where 

        xmlns:tns1=http://www.onvif.org/ver10/topics

      Actual: tns1:VideoSource, where 

        xmlns:tns1=http://www.onvif.org/ver10/topics
   STEP FAILED

   STEP 20 - Send Unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST FAILED

]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66:8080/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
      
       <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <Message xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </Message>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-2-1-18.08" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>Changed event</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return changed event

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[   
EVENT-2-1-18 BASIC NOTIFICATION INTERFACE - NOTIFY FILTER

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   Timeout of 60 seconds will be used
   
   STEP 3 - Parse topic
      Topic: tns1:VideoSource/SignalLoss; Namespaces: tns1="http://www.onvif.org/ver10/topics"
      WARNING: topic not found
   STEP PASSED

   STEP 4 - Creating listening server
   STEP PASSED

   STEP 5 - Send Subscribe request
      Transmit done
      Receive done
   STEP PASSED

   STEP 6 - Check that the DUT returned Subscribe response
   STEP PASSED

   STEP 7 - Check that CurrentTime is specified
   STEP PASSED

   STEP 8 - Check that TerminationTime is specified
   STEP PASSED

   STEP 9 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 10 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 11 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 12 - Check that URL specified is valid
   STEP PASSED

   STEP 13 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 14 - Wait for notification
      Receive done
   STEP PASSED

   STEP 15 - Validate notifications SOAP packet
   STEP PASSED

   STEP 16 - Validate Headers
   STEP PASSED

   STEP 17 - Check that DUT sent notification messages
   STEP PASSED

   STEP 18 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 19 - Validate messages
   STEP PASSED

   STEP 20 - Send Unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST PASSED

]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66:8080/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-2-1-18.09" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>Unacceptable Initial TerminationTime Fault</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return Correct response: 
      DUT sends correct UnacceptableInitialTerminationTime Fault to Subscribe request
     
      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
  
        ]]>


      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <RequestParameters>
        <InitialTerminationTime>PT10S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66/onvif_notify_server</Address>
      </RequestParameters>
      <Details Timestamp="now" MinimumTime="now+30" MaximumTime="now+60">
        <soap:Detail xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
          <UnacceptableInitialTerminationTimeFault xmlns="http://docs.oasis-open.org/wsn/b-2">
            <Timestamp xmlns="http://docs.oasis-open.org/wsrf/bf-2">1900-01-01T01:01:01+03:00</Timestamp>
            <MinimumTime>1900-01-01T01:01:01+03:00</MinimumTime>
            <MaximumTime>1900-01-01T01:01:01+04:00</MaximumTime>
          </UnacceptableInitialTerminationTimeFault>
        </soap:Detail>
      </Details>
    </Step>
    <Step id ="4">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-2-1-18.10" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>DUT sends notification with delay</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return Correct response:
      notification was received in some seconds after request

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
        EVENT-2-1-18 BASIC NOTIFICATION INTERFACE - NOTIFY FILTER

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   Timeout of 60 seconds will be used
   
   STEP 3 - Parse topic
      Topic: tns1:VideoSource/SignalLoss; Namespaces: tns1="http://www.onvif.org/ver10/topics"
      WARNING: topic not found
   STEP PASSED

   STEP 4 - Creating listening server
   STEP PASSED

   STEP 5 - Send Subscribe request
      Transmit done
      Receive done
   STEP PASSED

   STEP 6 - Check that the DUT returned Subscribe response
   STEP PASSED

   STEP 7 - Check that CurrentTime is specified
   STEP PASSED

   STEP 8 - Check that TerminationTime is specified
   STEP PASSED

   STEP 9 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 10 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 11 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 12 - Check that URL specified is valid
   STEP PASSED

   STEP 13 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 14 - Wait for notification
      Receive done
   STEP PASSED

   STEP 15 - Validate notifications SOAP packet
   STEP PASSED

   STEP 16 - Validate Headers
   STEP PASSED

   STEP 17 - Check that DUT sent notification messages
   STEP PASSED

   STEP 18 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 19 - Validate messages
   STEP PASSED

   STEP 20 - Send Unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST PASSED

        ]]>


      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification timeout="20000">
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  
  <Test ID = "TC.EVENT-2-1-18.11" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>Correct response (old script)</Name>
    <Description>
      Check BASIC NOTIFICATION INTERFACE - NOTIFY FILTER test
      when DUT return Correct response:

      On management tab select:
      Event topic: tns1:VideoSource/tnsaxis:Tampering
      Namespaces:
      tnsaxis="http://www.axis.com/2009/event/topics"
      tns1="http://www.onvif.org/ver10/topics"
      If Get was used, reset test for DUT before
      test run.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>


      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66:8080/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:ax="http://www.axis.com/2009/event/topics">ax:Tampering</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
<Test ID = "TC.EVENT-2-1-18.12" ONVIFTestID="EVENT-2-1-18" Enabled="true">
    <TestName>BASIC NOTIFICATION INTERFACE - NOTIFY FILTER</TestName>
    <Name>No property events</Name>
    <Description>
     

      On management tab select:
      Event topic: tns1:VideoSource/SignalLoss
      Namespaces:
      tns1="http://www.onvif.org/ver10/topics"

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        


      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
  <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/doorcontrol/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDoor12/DoorService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            
            
            

          </tns1:VideoSource>
          
          
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Subscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
        <Address ignore="1">http://192.168.10.66/onvif_notify_server/</Address>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="1">
        <SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa5="http://www.w3.org/2005/08/addressing" >
          <wsnt:SubscriptionReference>
            <wsa5:Address>http://192.168.10.209/Web_Service?Idx=0</wsa5:Address>
          </wsnt:SubscriptionReference>
          <wsnt:CurrentTime>2010-09-07T13:32:51</wsnt:CurrentTime>
          <wsnt:TerminationTime>2010-09-07T13:33:01</wsnt:TerminationTime>
        </SubscribeResponse>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
      <Notification>
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2">
      
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <MessageATTENTION_FOR_INCORRECT_TAG xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </MessageATTENTION_FOR_INCORRECT_TAG>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="5">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
</TestSuit>
