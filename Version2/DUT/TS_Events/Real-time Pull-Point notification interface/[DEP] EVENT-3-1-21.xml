<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</Name>
    <Description>
    </Description>
  </Parameters>

  <Test ID = "TC.EVENT-3-1-23.01" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>No Topics in GetEventProperties</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE test
      when DUT return Wrong response:
      (No MessageDescription element with IsProperty attribute set to "true").
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
        
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.02" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Termination time is updeted in the first PM response</Name>
    <Description>
      DUT sends increased termination time in the first PM response
      Check that TT will wait for initial termination time expiration before send checking PM request
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>      

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>        
        <!--<InitialTerminationTime>PT60S</InitialTerminationTime>-->
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  
  <Test ID = "TC.EVENT-3-1-23.03" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Two NotificationMessage in one PM</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE test      
      when DUT return two notification.

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
        EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        STEP 3 - Create Pull Point Subsciption
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Check that TerminationTime is specified
        STEP PASSED

        STEP 5 - Validate CurrentTime and TerminationTime
        STEP PASSED

        STEP 6 - Check if the DUT returned SubscriptionReference
        STEP PASSED

        STEP 7 - Check if SubscriptionReference contains address
        STEP PASSED

        STEP 8 - Check that URL specified is valid
        STEP PASSED

        Initial deadline - 13.08.2013 12:30:27

        STEP 9 - Send PullMessages request
        Transmit done
        Waiting for PullMessagesResponse message
        STEP PASSED

        STEP 10 - Set Synchronization Point
        Transmit done
        Receive done
        STEP PASSED

        STEP 11 - Get PullMessages response
        Receive done
        STEP PASSED

        STEP 12 - Check that DUT sent notification messages
        STEP PASSED

        STEP 13 - Validate CurrentTime and TerminationTime
        STEP PASSED

        STEP 14 - Check that a maximum number of 1 Notification Messages is included in PullMessagesResponse
        Maximum number of messages exceeded
        STEP FAILED

        STEP 15 - Send Unsubscribe request
        Transmit done
        Receive done
        STEP PASSED

        TEST FAILED


      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
      
        <!--<InitialTerminationTime>PT60S</InitialTerminationTime>-->
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="2"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  
  <Test ID = "TC.EVENT-3-1-23.04" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Changed event</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE test
      when DUT return changed event

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>


      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">70</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Changed">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.05" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>DUT sends notification with delay</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE test
      when DUT return Correct response:
      notification was received in some seconds after request

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
      
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <Timeout>18000</Timeout>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>  
  <Test ID = "TC.EVENT-3-1-23.06" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Wrong response: TerminationTime less than CurrentTime for PullMessage</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE test
      when DUT return wrong response (TerminationTime less than CurrentTime for PullMessage).
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
      EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   STEP 3 - Create Pull Point Subsciption
      Transmit done
      Receive done
   STEP PASSED

   STEP 4 - Check that TerminationTime is specified
   STEP PASSED

   STEP 5 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 6 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 7 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 8 - Check that URL specified is valid
   STEP PASSED

   Initial deadline - 13.08.2013 12:32:39
   
   STEP 9 - Send PullMessages request
      Transmit done
      Waiting for PullMessagesResponse message
   STEP PASSED

   STEP 10 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 11 - Get PullMessages response
      Receive done
   STEP PASSED

   STEP 12 - Check that DUT sent notification messages
   STEP PASSED

   STEP 13 - Validate CurrentTime and TerminationTime
      TerminationTime <= CurrentTime
   STEP FAILED

   Subscription deleted by Timeout
TEST FAILED

        ]]>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
      
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">0</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics" xmlns:tnsaxis="http://www.axis.com/2009/event/topics">tns1:Device/tnsaxis:IO/Port</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics" xmlns:tnsaxis="http://www.axis.com/2009/event/topics">tns1:Device/tnsaxis:IO/Port</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>  
  <Test ID = "TC.EVENT-3-1-23.07" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Wrong response: invalid NotificationMessage</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE test
      when DUT return wrong response (invalid NotificationMessage).
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
      <![CDATA[
      EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   STEP 3 - Create Pull Point Subsciption
      Transmit done
      Receive done
   STEP PASSED

   STEP 4 - Check that TerminationTime is specified
   STEP PASSED

   STEP 5 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 6 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 7 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 8 - Check that URL specified is valid
   STEP PASSED

   Initial deadline - 13.08.2013 12:35:46
   
   STEP 9 - Send PullMessages request
      Transmit done
      Waiting for PullMessagesResponse message
   STEP PASSED

   STEP 10 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 11 - Get PullMessages response
      Receive done
      The element 'NotificationMessage' in namespace 'http://docs.oasis-open.org/wsn/b-2' has incomplete content. List of possible elements expected: 'SubscriptionReference, Topic, ProducerReference, Message' in namespace 'http://docs.oasis-open.org/wsn/b-2'.
   STEP FAILED

   STEP 12 - Send Unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST FAILED
]]>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">15</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType/>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.08" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>No NotificationMessage</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE test
      when DUT return wrong response (empty NotificationMessage).
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>
       
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
       
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <Timeout>18000</Timeout>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
    
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">15</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.09" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Fault to CPPS</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION all tests
      when DUT sends fault to CreatePullPointSubscription requies.
      
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
        EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   STEP 3 - Create Pull Point Subsciption
      Transmit done
      Receive done
      SOAP fault returned
      Code: Sender
      Subcode: InvalidArgVal
      Subcode: InvalidIPv6Address
      Reason: System.Web.Services.Protocols.SoapException: MESSAGE
         at DUT.CameraWebService.Events10.EventService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\ONVIF\DUT Sim\Version2\DUT\CameraWebService\ServiceEvents10\EventService.asmx.cs:line 101
         at DUT.CameraWebService.Events10.EventService.CreatePullPointSubscription(FilterType Filter, String InitialTerminationTime, CreatePullPointSubscriptionSubscriptionPolicy SubscriptionPolicy, XmlElement[]& Any, DateTime& CurrentTime, Nullable`1& TerminationTime) in D:\ONVIF\DUT Sim\Version2\DUT\CameraWebService\ServiceEvents10\EventService.asmx.cs:line 142
   STEP FAILED

TEST FAILED
]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>

        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>InvalidIPv6Address</Subcode>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>


    </Step>


    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.10" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Fault on CPPS (UnacceptableInitialTerminationTimeFault)</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION all tests
      DUT sends UnacceptableInitialTerminationTimeFault on Create Pull Point Subscription.

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
      
]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>

        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <RequestParameters>
      
      </RequestParameters>
      <Details Timestamp="now" MinimumTime="now+30" MaximumTime="now+60">
        <soap:Detail xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
          <UnacceptableInitialTerminationTimeFault xmlns="http://docs.oasis-open.org/wsn/b-2">
            <Timestamp xmlns="http://docs.oasis-open.org/wsrf/bf-2">1900-01-01T01:01:01+03:00</Timestamp>
            <MinimumTime>1900-01-01T01:01:01+03:00</MinimumTime>
            <MaximumTime>1900-01-01T01:01:01+04:00</MaximumTime>
          </UnacceptableInitialTerminationTimeFault>
        </soap:Detail>
      </Details>
    </Step>


    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.11" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>No response to CPPS</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION all tests
      when DUT sends no response to CreatePullPointSubscription requies.

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>
        <![CDATA[
      
]]>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>

        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>NoResponse</Response>
      
      <RequestParameters>
        
      </RequestParameters>


    </Step>


    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.12" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Fault on PullMessages (TerminationTime)</Name>
    <Description>      
      DUT does not accept Termination Time on PullMessages requests and sends PullMessagesFaultResponse
      DUT can re-send PM with new Termination Time (Check  that Termination Time in request is correct)
    </Description>
    <ExpectedResult>
      
      <TestSummary>
       
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <Details>
        <soap:Detail xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
          <PullMessagesFaultResponse xmlns="http://www.onvif.org/ver10/events/wsdl">
            <MaxTimeout>PT10S</MaxTimeout>
            <MaxMessageLimit>2</MaxMessageLimit>
          </PullMessagesFaultResponse>
        </soap:Detail>
      </Details>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT10S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.13" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Fault on PullMessages</Name>
    <Description>
      DUT sends general fault on PullMessages requests 
    </Description>
    <ExpectedResult>

      <TestSummary>
        EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        STEP 3 - Create Pull Point Subsciption
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Check that TerminationTime is specified
        STEP PASSED

        STEP 5 - Validate CurrentTime and TerminationTime
        STEP PASSED

        STEP 6 - Check if the DUT returned SubscriptionReference
        STEP PASSED

        STEP 7 - Check if SubscriptionReference contains address
        STEP PASSED

        STEP 8 - Check that URL specified is valid
        STEP PASSED

        Initial deadline - 13.08.2013 17:23:45

        STEP 9 - Send PullMessages request
        Transmit done
        Waiting for PullMessagesResponse message
        STEP PASSED

        STEP 10 - Set Synchronization Point
        Transmit done
        Receive done
        STEP PASSED

        STEP 11 - Get PullMessages response
        Receive done
        STEP FAILED

        STEP 12 - Send Unsubscribe request
        Transmit done
        Receive done
        STEP PASSED

        TEST FAILED

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>

      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      
    </Step>
    
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.14" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>No response on PullMessages (TerminationTime)</Name>
    <Description>
     
    </Description>
    <ExpectedResult>

      <TestSummary>
        <![CDATA[
        EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        STEP 3 - Create Pull Point Subsciption
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Check that TerminationTime is specified
        STEP PASSED

        STEP 5 - Validate CurrentTime and TerminationTime
        STEP PASSED

        STEP 6 - Check if the DUT returned SubscriptionReference
        STEP PASSED

        STEP 7 - Check if SubscriptionReference contains address
        STEP PASSED

        STEP 8 - Check that URL specified is valid
        STEP PASSED

        Initial deadline - 13.08.2013 17:25:11

        STEP 9 - Send PullMessages request
        Transmit done
        Waiting for PullMessagesResponse message
        STEP PASSED

        STEP 10 - Set Synchronization Point
        Transmit done
        Receive done
        STEP PASSED

        STEP 11 - Get PullMessages response
        Receive done
        STEP PASSED

        Exception of type FaultException<PullMessagesFaultResponseType> received. Will try to pull messages with new parameters
      
   STEP 12 - Check that it is not double fault for this PullMesages request
   STEP PASSED

   STEP 13 - Check if correct parameters are specified in fault
   STEP PASSED

   STEP 14 - Send PullMessages request
      Transmit done
      Waiting for PullMessagesResponse message
   STEP PASSED

   STEP 15 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 16 - Get PullMessages response
      Receive done
      The HTTP request has exceeded the allotted timeout
   STEP FAILED

   STEP 17 - Send Unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST FAILED
]]>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>

      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id="5">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <Details>
        <soap:Detail xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
          <PullMessagesFaultResponse xmlns="http://www.onvif.org/ver10/events/wsdl">
            <MaxTimeout>PT10S</MaxTimeout>
            <MaxMessageLimit>2</MaxMessageLimit>
          </PullMessagesFaultResponse>
        </soap:Detail>
      </Details>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
        <Timeout>PT10S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      
      
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.15" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Termination time is not updeted</Name>
    <Description>
      set correct TerminationTime in CreatePullPointSubscription and RullMessages in the script

      DUT sends no increased termination time in the PM responses
      Check that TT will send PM request until initial termination time expire
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<InitialTerminationTime>PT60S</InitialTerminationTime>-->
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime>2013-08-13T17:35:52.6851269+04:00</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime>2013-08-13T17:35:52.6851269+04:00</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.16" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Fault to checking PM</Name>
    <Description>
      DUT sends increased termination time in the first PM response
      Check that TT will wait for initial termination time expiration before send checking PM request
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<InitialTerminationTime>PT60S</InitialTerminationTime>-->
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.17" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Termination time in PM is less than initial termination time (updated PM)</Name>
    <Description>
      <![CDATA[
      DUT sends PM response with updated Termination Time where 
      TerminationTime < initial Termination Time (returned in CPPS response)
      
    ]]>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<InitialTerminationTime>PT60S</InitialTerminationTime>-->
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">600</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">5</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">5</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">610</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-23.18" ONVIFTestID="EVENT-3-1-23" Enabled="true">
    <TestName>EVENT-3-1-23 REALTIME PULLPOINT SUBSCRIPTION – PULLMESSAGES AS KEEP-ALIVE</TestName>
    <Name>Termination time in PM is less than initial termination time (checking PM)</Name>
    <Description>
      <![CDATA[
      DUT sends checking PM response with 
      TerminatioTime < initial Termination Time (returned in CPPS response)
      
    ]]>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>

          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<InitialTerminationTime>PT60S</InitialTerminationTime>-->
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">65</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">5</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">5</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:VideoSource/SignalLoss</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>

        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
</TestSuit>
