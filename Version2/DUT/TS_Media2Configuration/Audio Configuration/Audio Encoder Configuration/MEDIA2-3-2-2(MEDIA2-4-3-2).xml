<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>AAC Audio Encoder Configuration</Name>
    <Description>
      Media service must be: http://localhost:2780/MediaService.asmx
    </Description>
  </Parameters>
  

  <!--Tests for Pull Point Subscriptions-->
  
  
  <!-- Positive -->
  <Test ID = "TC.MEDIA2-3-2-2.101" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Correct response</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.102" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Several configurations in GetAudioEncoderConfigurationsResponse</Name>
    <Description>
      Needed configuration is the last in the list of returned
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>G726</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>50</tt:Bitrate>
            <tt:SampleRate>600</tt:SampleRate>
          </AudioEncoder2Configuration>



          <AudioEncoder2Configuration token="1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>


        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>


          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>G726</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>40</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>60</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>


        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>


          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>


        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>


    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>


    <Step id ="8">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="13">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.103" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>No optional (multicast) element in GetAudioEncoderConfigurationsResponse</Name>
    <Description>
      No multicast element in GetAudioEncoderConfigurationsResponse
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <!-- <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast> -->
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>

    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <!--         <Multicast>
          <Address>
            <Type>IPv4</Type>
            <IPv4Address>0.0.0.0</IPv4Address>       
          </Address>
          <Port>0</Port>
          <TTL>5</TTL>
          <AutoStart>false</AutoStart>
          </Multicast> -->
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <!--             <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast> -->
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <!--           <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast> -->
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <!--             <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast> -->
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <!--           <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast> -->
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.104" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Not MP4A-LATM encoding in GetAudioEncoderConfigurationsResponse, GetAudioEncoderConfigurationOptions has needed option among others</Name>
    <Description>
      Configuration has wrong encoding but has the needed in options
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>G726</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>G726</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>

          </AudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>

          </AudioEncoder2ConfigurationOptions>
        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>G726</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.105" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>MP4A-LATM encoding in GetAudioEncoderConfigurationsResponse, GetAudioEncoderConfigurationOptions has needed option among others</Name>
    <Description>
      Configuration has right encoding but the needed option is last in the options list
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>G726</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>

          </AudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>

          </AudioEncoder2ConfigurationOptions>
        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.106" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>GetAudioEncoderConfigurations w/token returns several configurations w/different tokens</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>G726</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>50</tt:Bitrate>
            <tt:SampleRate>600</tt:SampleRate>
          </AudioEncoder2Configuration>



          <AudioEncoder2Configuration token="1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>


        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>


          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>G726</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>40</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>60</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>


        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>


          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>


        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="6">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>          
          <AudioEncoder2Configuration token="1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>


        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="9">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>



  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.107" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>Features: GetServices is supported</TestName>
    <Name>Empty BitrateList and  SampleRateList</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>70</tt:Bitrate>
            <tt:SampleRate>100</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>

            </tt:BitrateList>
            <tt:SampleRateList>

            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>70</Bitrate>
          <SampleRate>100</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>70</tt:Bitrate>
            <tt:SampleRate>100</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>70</Bitrate>
          <SampleRate>100</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>70</tt:Bitrate>
            <tt:SampleRate>100</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>



  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.108" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Different fields UseCount</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>2</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>3</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.110" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Correct response tests for pullPointSubscriptions</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.111" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Empty first pullMessages</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.112" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>MPEG4-GENERIC Encoding value in Options</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MPEG4-GENERIC</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MPEG4-GENERIC</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MPEG4-GENERIC</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MPEG4-GENERIC</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MPEG4-GENERIC</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MPEG4-GENERIC</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.113" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Both MP4A-LATM and MPEG4-GENERIC Encoding value in Options (1st is MPEG4-GENERIC)</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MPEG4-GENERIC</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MPEG4-GENERIC</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MPEG4-GENERIC</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MPEG4-GENERIC</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MPEG4-GENERIC</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MPEG4-GENERIC</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
 <Test ID = "TC.MEDIA2-3-2-2.114" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Both MP4A-LATM and MPEG4-GENERIC Encoding value in Options (1st is MP4A-LATM)</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MPEG4-GENERIC</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>
          

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.115" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>mpeg4-generic Encoding value in Options</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>mpeg4-generic</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>mpeg4-generic</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>mpeg4-generic</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>mpeg4-generic</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>mpeg4-generic</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>mpeg4-generic</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.116" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>mp4a-latm Encoding value in Options</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>mp4a-latm</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>mp4a-latm</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>mp4a-latm</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>mp4a-latm</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>mp4a-latm</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>mpeg4-generic</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <!-- Negative -->

  <Test ID = "TC.MEDIA2-3-2-2.201" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>No configurations in GetAudioEncoderConfigurationsResponse</Name>
    <Description>
      GetAudioEncoderConfigurationsResponse  did  not  contain  at  least  one  Audio  Encoder Configuration.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>


        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.202" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Value of SampleRate element didn't change after first SetAudioEncoderConfigurationRequest</Name>
    <Description>
      Audio  encoder  configuration  parameters  from  GetAudioEncoderConfigurationsResponse are  not  identical  to  the  parameters  set  up  in  SetAudioEncoderConfigurationRequest message (the first one).

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.203" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Value of Bitrate element didn't change after second SetAudioEncoderConfigurationRequest</Name>
    <Description>
      Audio  encoder  configuration  parameters  from  GetAudioEncoderConfigurationsResponse are  not  identical  to  the  parameters  set  up  in  SetAudioEncoderConfigurationRequest message (the second one).

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.204" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>GetAudioEncoderConfigurationOptionsResponse: invalid schema</Name>
    <Description>
      DUT did not send valid GetAudioEncoderConfigurationOptionsResponse message (no encoding element)
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <!-- <tt:Encoding>MP4A-LATM</tt:Encoding> -->
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>


    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.205" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>GetAudioEncoderConfigurationOptionsResponse: invalid schema</Name>
    <Description>
      GetAudioEncoderConfigurationOptionsResponse  did  not  contain  at  least  one  Audio Encoder Configuration Option.
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.206" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name> Value of Bitrate element didn't change after first SetAudioEncoderConfigurationRequest</Name>
    <Description>
      Audio  encoder  configuration  parameters  from  GetAudioEncoderConfigurationsResponse are  not  identical  to  the  parameters  set  up  in  SetAudioEncoderConfigurationRequest message (the first one).

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>90</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>90</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>90</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.207" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Value of SampleRate element didn't change after second SetAudioEncoderConfigurationRequest</Name>
    <Description>
      Audio  encoder  configuration  parameters  from  GetAudioEncoderConfigurationsResponse are  not  identical  to  the  parameters  set  up  in  SetAudioEncoderConfigurationRequest message (the second one).

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.208" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>GetAudioEncoderConfigurations w/token doesn't return configurations</Name>
    <Description>
      GetAudioEncoderConfigurations after first SetAudioEncoderConfiguration doesn't return configurations
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <!--           <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>
 -->
        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.209" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>GetAudioEncoderConfigurations w/token doesn't return configurations - 2</Name>
    <Description>
      GetAudioEncoderConfigurations after second SetAudioEncoderConfiguration doesn't return configurations
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>

    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="0" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <!--           <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration> -->

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.210" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Wrong token in GetAudioEncoderConfigurations</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>G726</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>50</tt:Bitrate>
            <tt:SampleRate>600</tt:SampleRate>
          </AudioEncoder2Configuration>



          <AudioEncoder2Configuration token="1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>


        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>


          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>G726</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>40</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>60</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>


        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>


          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>


        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>

  <!--Negative tests for pullPointSubscriptions-->
  <Test ID = "TC.MEDIA2-3-2-2.211" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Different topik</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.212" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Different Token</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AECDiffer" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AECDiffer" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.213" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Differen type. expected AudioEncoder actualy VideoSourse</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>newAECForTestTool1</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="VideoSourse" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>newAECForTestTool1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="VideoSourse" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.214" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Missed field simple item = Token</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <!--<tt:SimpleItem Name="Token" Value="AEC1" />-->
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <!--<tt:SimpleItem Name="Token" Value="AEC1" />-->
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.215" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Missed field simple item = Type</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <!--<tt:SimpleItem Name="Type" Value="AudioEncoder" />-->
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <!--<tt:SimpleItem Name="Type" Value="AudioEncoder" />-->
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.216" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Different SimpleItem Name field expected "Token", actualy "Configuration"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Configuration" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Configuration" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.217" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Different SimpleItem Name field expected "Type", actualy "Configuration"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Configuration" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Configuration" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.218" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Empty PullMessageResponse</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MEDIA2-3-2-2.219" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Missed field simple item = Token and field simple item = Type</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <!--<tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />-->
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <!--<tt:SimpleItem Name="Token" Value="AEC1" />
                  <tt:SimpleItem Name="Type" Value="AudioEncoder" />-->
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>AEC1</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="AEC1" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="AEC1">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>


  <!-- Fault -->
  <Test ID = "TC.MEDIA2-3-2-2.301" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Fault on GetServices</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>




  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.302" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Fault on GetAudioEncoderConfigurations wo/token</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Fault</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>




  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.303" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Fault on GetAudioEncoderConfigurationOptions</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>




  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.304" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Fault on SetAudioEncoderConfiguration</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>




  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.305" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>Fault on GetAudioEncoderConfigurations w/token</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>




  </Test>

  <!-- NoResponse -->
  <Test ID = "TC.MEDIA2-3-2-2.401" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>NoResponse on GetServices</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.402" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>NoResponse on GetAudioEncoderConfigurations wo/token</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.403" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>NoResponse on GetAudioEncoderConfigurationOptions</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.404" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>NoResponse on SetAudioEncoderConfiguration</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.405" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>AAC Audio Encoder Configuration</TestName>
    <Name>NoResponse on GetAudioEncoderConfigurations w/token</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>

  <Test ID = "TC.MEDIA2-3-2-2.ProbablyBAD" ONVIFTestID="MEDIA2-3-2-2" Enabled="true">
    <TestName>Features: GetServices is supported</TestName>
    <Name>Correct response</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id ="2">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
        <!--<ProfileToken>0</ProfileToken>-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>


          </AudioEncoder2ConfigurationOptions>

        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>80</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="5">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>80</tt:Bitrate>
            <tt:SampleRate>80</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>500</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetAudioEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfAudioEncoder2Configuration>
          <AudioEncoder2Configuration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>MP4A-LATM</tt:Encoding>

            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Bitrate>500</tt:Bitrate>
            <tt:SampleRate>800</tt:SampleRate>
          </AudioEncoder2Configuration>

        </ArrayOfAudioEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id ="8">
      <Command>Media210.SetAudioEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <AudioEncoder2Configuration token="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>MP4A-LATM</Encoding>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <Bitrate>80</Bitrate>
          <SampleRate>800</SampleRate>
        </AudioEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
        <SetAudioEncoderConfiguration>
        </SetAudioEncoderConfiguration>
      </ResponseParameters>
    </Step>

  </Test>
</TestSuit>
