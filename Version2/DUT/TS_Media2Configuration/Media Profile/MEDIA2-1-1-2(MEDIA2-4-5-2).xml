<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="GENERIC PAN/TILT SPEED SPACE" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>Media Configuration Create Media Profile with Pre-Defined Configuration</Name>
    <Description>

    </Description>
  </Parameters>

  <!-- positive -->

  <Test ID = "MEDIA2-1-1-2.101" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Correct response - 1 profile - 1 CompatibleConfiguration</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <!--<Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>-->
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>2</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>3</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.102" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Empty first pullMessages</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="9">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="13">
      <Command>Media210.GetProfiles</Command>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.103" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Maximum profiles - there is not fixed</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <!--<Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>-->
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="2" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile0" fixed ="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="7">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="9">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="14">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>media2_profile1</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC2</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID = "MEDIA2-1-1-2.104" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Maximum profiles - all profiles are fixed</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <!--<Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>-->
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="2" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile0" fixed ="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile1" fixed ="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="7">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="9">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="14">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>media2_profile1</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC2</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID = "MEDIA2-1-1-2.105" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Skipped MaximumNumberOfProfiles</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <!--<Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>-->
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.106" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>GetProfiles: any element in Configurations</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <!--<Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>-->
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <MyElement>any element</MyElement>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.107" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>GetProfiles: VideoSource as any element in Configurations</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <!--<Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>-->
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
             

            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.201" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Different topik</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>Media210.GetProfiles</Command>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.202" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Different profileToken</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>Media210.GetProfiles</Command>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.203" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Missed field "simple item" </Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <!--<tt:SimpleItem Name="Token" Value="media_profile1" />-->
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <!--<tt:SimpleItem Name="Token" Value="media_profile1" />-->
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>Media210.GetProfiles</Command>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.204" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Different SimpleItem Name field expected "Token", actualy "Type"</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Type" Value="VSC1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Configuration" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>Media210.GetProfiles</Command>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.205" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Empty PMResponse</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <!--<NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>-->
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>Media210.GetProfiles</Command>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.206" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Empty VSC list</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <!--<VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>-->
          
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.207" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Created profile does not contain VSC</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <!--<VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>-->


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.208" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Created profile contains VSC with unexpected token</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.209" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Empty profile list after profile creation</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
  <Test ID = "MEDIA2-1-1-2.210" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>RollBack procedure when test failed</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="2" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile0" fixed ="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="7">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="9">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="12">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="13">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="14">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>media2_profile1</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

  </Test>
  <Test ID = "MEDIA2-1-1-2.211" ONVIFTestID="MEDIA2-1-1-2" Enabled="true">
    <TestName>Media Configuration Create Media Profile with Pre-Defined Configuration</TestName>
    <Name>Invalid GetProfiles: SourceToken element missed</Name>
    <Description>
      Tests for Pull Messages
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <!--<Step id ="*">
      <Command>PullPointSubscriptionService10.Renew</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>-->
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>

          </Service>

          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>

        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="3" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>
        </Capabilities2>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<Token>media_profile1</Token>-->
        <Type>All</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
               
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <!--<tt:SourceToken>VS1</tt:SourceToken>-->
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <MyElement>any element</MyElement>
             


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="50" y="60" width="100" height="50">
            </tt:Bounds>
            <tt:Extension>
              <tt:Rotate>
                <tt:Mode>ON</tt:Mode>
                <tt:Degree>200</tt:Degree>
              </tt:Rotate>
            </tt:Extension>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ProfileChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="6">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Name>testMedia2</Name>

        <Configuration>
          <Type>VideoSource</Type>
          <Token>VSC1</Token>
        </Configuration>
      </RequestParameters>

      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
        <Type>VideoSource</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>


            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ProfileChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Token" Value="media_profile1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id="11">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>NoProfile</Subcode>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>


  </Test>
</TestSuit>