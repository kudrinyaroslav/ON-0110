<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Media Streaming" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>MODIFY ALL SUPPORTED METADATA CONFIGURATIONS</Name>
    <Description>
      Media service must be: http://localhost:17934/ServiceMedia2SVC/Media2Service.svc
    </Description>
  </Parameters>

  <!--Positive tests-->
  <Test ID = "TC.MEDIA2-Feat.101" ONVIFTestID="MEDIA2-Feat" Enabled="true">
    <TestName>Media2 Service Features</TestName>
    <Name>PTZ is not supported, Analytics is not supported</Name>
    <Description>

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Fault</Response>
      <Code>Receiver</Code>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Device>
            <tt:XAddr>http://CAMERA_IP/onvif/device_service</tt:XAddr>
            <tt:Network>
              <tt:IPFilter>false</tt:IPFilter>
              <tt:ZeroConfiguration>false</tt:ZeroConfiguration>
              <tt:IPVersion6>false</tt:IPVersion6>
              <tt:DynDNS>true</tt:DynDNS>
            </tt:Network>
            <tt:System>
              <tt:DiscoveryResolve>true</tt:DiscoveryResolve>
              <tt:DiscoveryBye>true</tt:DiscoveryBye>
              <tt:RemoteDiscovery>false</tt:RemoteDiscovery>
              <tt:SystemBackup>false</tt:SystemBackup>
              <tt:SystemLogging>true</tt:SystemLogging>
              <tt:FirmwareUpgrade>false</tt:FirmwareUpgrade>
              <tt:SupportedVersions>
                <tt:Major>1</tt:Major>
                <tt:Minor>1</tt:Minor>
              </tt:SupportedVersions>
            </tt:System>
            <tt:IO>
              <tt:InputConnectors>0</tt:InputConnectors>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:IO>
            <tt:Security>
              <tt:TLS1.1>false</tt:TLS1.1>
              <tt:TLS1.2>false</tt:TLS1.2>
              <tt:OnboardKeyGeneration>false</tt:OnboardKeyGeneration>
              <tt:AccessPolicyConfig>false</tt:AccessPolicyConfig>
              <tt:X.509Token>false</tt:X.509Token>
              <tt:SAMLToken>false</tt:SAMLToken>
              <tt:KerberosToken>false</tt:KerberosToken>
              <tt:RELToken>false</tt:RELToken>
            </tt:Security>
          </tt:Device>
          <tt:Events>
            <tt:XAddr>http://CAMERA_IP/onvif/event</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
          <tt:Imaging>
            <tt:XAddr>http://CAMERA_IP/onvif/imaging</tt:XAddr>
          </tt:Imaging>
          <tt:Media>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
          <tt:PTZ>
            <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
          </tt:PTZ>
          <tt:Extension>
            <tt:DeviceIO>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
              <tt:VideoSources>1</tt:VideoSources>
              <tt:VideoOutputs>1</tt:VideoOutputs>
              <tt:AudioSources>1</tt:AudioSources>
              <tt:AudioOutputs>1</tt:AudioOutputs>
              <tt:RelayOutputs>4</tt:RelayOutputs>
            </tt:DeviceIO>
            <tt:AnalyticsDevice>
              <tt:XAddr>http://CAMERA_IP/onvif/media</tt:XAddr>
            </tt:AnalyticsDevice>
          </tt:Extension>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="16">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 OSD="true" SnapshotUri="true" VideoSourceMode="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities ConfigurationsSupported="VideoSource VideoEncoder AudioSource AudioEncoder Metadata Analytics AudioOutput PTZ" MaximumNumberOfProfiles="32">
          </tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTP_RTSP_TCP="true" RTPMulticast="true" RTSPStreaming="true" RTSPWebSocketUri="http://www.anyURI">
          </tcr:StreamingCapabilities>
        </Capabilities2>

      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Device10.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <DeviceServiceCapabilities xmlns:tds="http://www.onvif.org/ver10/device/wsdl">
          <tds:Network NTP="1" IPVersion6="true" ZeroConfiguration="true" DynDNS="true" IPFilter="false" DHCPv6="true" />
          <tds:Security UsernameToken="true" HttpDigest="true" />
          <tds:System SystemLogging="true" DiscoveryBye="true" />
        </DeviceServiceCapabilities>
      </ResponseParameters>
    </Step>
    <!--     <Step id="4">
      <Command>Device10.GetRelayOutputs</Command>
      <Response>Fault</Response>
      <ResponseParameters>
        <ArrayOfRelayOutput xmlns:tt="http://www.onvif.org/ver10/schema">
          <RelayOutput token="Relay 1">
            <tt:Properties>
              <tt:Mode>Monostable</tt:Mode>
              <tt:DelayTime>PT50S</tt:DelayTime>
              <tt:IdleState>closed</tt:IdleState>
            </tt:Properties>
          </RelayOutput>
        </ArrayOfRelayOutput>
      </ResponseParameters>
    </Step> -->
    <!--     <Step id="5">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
        <Type>VideoEncoder</Type>
		<Type>VideoSource</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H264</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
              </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step> -->

    <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--         <ConfigurationToken>0</ConfigurationToken>
        <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions ConstantBitRateSupported="false" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>JPEG</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>1.000000</tt:Min>
              <tt:Max>10.000000</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>320</tt:Width>
              <tt:Height>184</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>640</tt:Width>
              <tt:Height>360</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>32</tt:Min>
              <tt:Max>4096</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

          <VideoEncoder2ConfigurationOptions ProfilesSupported="Baseline" GovLengthRange="1 150" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>1.000000</tt:Min>
              <tt:Max>10.000000</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>320</tt:Width>
              <tt:Height>184</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>640</tt:Width>
              <tt:Height>360</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>64</tt:Min>
              <tt:Max>16384</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

          <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>Mpeg4</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

          <VideoEncoder2ConfigurationOptions ProfilesSupported="Baseline" GovLengthRange="1 150" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>1.000000</tt:Min>
              <tt:Max>10.000000</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>320</tt:Width>
              <tt:Height>184</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>640</tt:Width>
              <tt:Height>360</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>64</tt:Min>
              <tt:Max>16384</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id ="3">
      <Command>Media210.GetAudioEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--         <ConfigurationToken>0</ConfigurationToken>
        <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>G726</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>

          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>PCMU</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>

          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>
        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="15">
      <Command>Media210.GetAudioDecoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfAudioEncoder2ConfigurationOptions>
          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>G726</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>

          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>PCMU</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>

          <AudioEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>MP4A-LATM</tt:Encoding>
            <tt:BitrateList>
              <tt:Items>80</tt:Items>
              <tt:Items>500</tt:Items>
            </tt:BitrateList>
            <tt:SampleRateList>
              <tt:Items>80</tt:Items>
              <tt:Items>800</tt:Items>
            </tt:SampleRateList>
          </AudioEncoder2ConfigurationOptions>
        </ArrayOfAudioEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>


    <Step id="8">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics" xmlns:tnsaxis="http://www.axis.com/2009/event/topics" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
          <tns1:Door xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl">
            <State>
              <DoorMode wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" xmlns:pt="http://www.onvif.org/ver10/pacs" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="tdc:DoorAlarmState" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" />
                  </tt:Data>
                </tt:MessageDescription>
              </DoorMode>
              <DoorAlarm wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" xmlns:pt="http://www.onvif.org/ver10/pacs" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="tdc:DoorAlarmState" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" />
                  </tt:Data>
                </tt:MessageDescription>
              </DoorAlarm>
              <DoorPhysicalState wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" xmlns:pt="http://www.onvif.org/ver10/pacs" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="tdc:DoorAlarmState" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" />
                  </tt:Data>
                </tt:MessageDescription>
              </DoorPhysicalState>
              <DoubleLockPhysicalState wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" xmlns:pt="http://www.onvif.org/ver10/pacs" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="tdc:DoorAlarmState" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" />
                  </tt:Data>
                </tt:MessageDescription>
              </DoubleLockPhysicalState>
              <LockPhysicalState wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" xmlns:pt="http://www.onvif.org/ver10/pacs" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="tdc:DoorAlarmState" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" />
                  </tt:Data>
                </tt:MessageDescription>
              </LockPhysicalState>
              <DoorTamper wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" xmlns:pt="http://www.onvif.org/ver10/pacs" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="tdc:DoorAlarmState" xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl" />
                  </tt:Data>
                </tt:MessageDescription>
              </DoorTamper>
              <DoorFault wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="State" Type="tdc:DoorFaultState" />
                    <tt:SimpleItemDescription Name="Reason" Type="xs:string" />
                  </tt:Data>
                </tt:MessageDescription>
              </DoorFault>
            </State>
          </tns1:Door>
          <tns1:Configuration>
            <Door>
              <Changed wstop:topic="true">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Changed>
              <Removed wstop:topic="true">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Removed>
            </Door>
            <AccessPoint>
              <Changed wstop:topic="true">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Changed>
              <Removed wstop:topic="true">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Removed>
            </AccessPoint>
            <Area>
              <Changed wstop:topic="true">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Changed>
              <Removed wstop:topic="true">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="DoorToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Removed>
            </Area>
          </tns1:Configuration>
          <tns1:AccessControl xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl">
            <AccessGranted>
              <Anonymous wstop:topic="true" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Anonymous>
              <Credential wstop:topic="true" xmlns:tns2="http://www.onvif.org/ver10/pacs" xmlns:tns3="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="tns2:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="CredentialToken" Type="tns2:ReferenceToken" />
                    <tt:SimpleItemDescription Name="CredentialHolderName" Type="tns3:string" />
                  </tt:Data>
                </tt:MessageDescription>
              </Credential>
            </AccessGranted>
            <AccessTaken>
              <Anonymous wstop:topic="true" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Anonymous>
              <Credential wstop:topic="true" xmlns:tns2="http://www.onvif.org/ver10/pacs" xmlns:tns3="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="tns2:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="CredentialToken" Type="tns2:ReferenceToken" />
                    <tt:SimpleItemDescription Name="CredentialHolderName" Type="tns3:string" />
                  </tt:Data>
                </tt:MessageDescription>
              </Credential>
            </AccessTaken>
            <AccessNotTaken>
              <Anonymous wstop:topic="true" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Anonymous>
              <Credential wstop:topic="true" xmlns:tns2="http://www.onvif.org/ver10/pacs" xmlns:tns3="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="tns2:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="CredentialToken" Type="tns2:ReferenceToken" />
                    <tt:SimpleItemDescription Name="CredentialHolderName" Type="tns3:string" />
                  </tt:Data>
                </tt:MessageDescription>
              </Credential>
            </AccessNotTaken>
            <Duress wstop:topic="true" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1" xmlns:pt="http://www.onvif.org/ver10/pacs">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="AccessPointToken" Type="pt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="Reason" Type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" />
                </tt:Data>
              </tt:MessageDescription>
            </Duress>
            <Denied>
              <Anonymous wstop:topic="true" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="Reason" Type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" />
                  </tt:Data>
                </tt:MessageDescription>
              </Anonymous>
              <Credential wstop:topic="true" xmlns:tns2="http://www.onvif.org/ver10/pacs" xmlns:tns3="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="tns2:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="CredentialToken" Type="tns2:ReferenceToken" />
                    <tt:SimpleItemDescription Name="CredentialHolderName" Type="tns3:string" />
                  </tt:Data>
                </tt:MessageDescription>
              </Credential>
              <CredentialNotFound>
                <Card wstop:topic="true" xmlns:tns2="http://www.onvif.org/ver10/pacs" xmlns:tns3="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                  <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                    <tt:Source>
                      <tt:SimpleItemDescription Name="AccessPointToken" Type="tns2:ReferenceToken" />
                    </tt:Source>
                    <tt:Data>
                      <tt:SimpleItemDescription Name="CredentialToken" Type="tns2:ReferenceToken" />
                      <tt:SimpleItemDescription Name="CredentialHolderName" Type="tns3:string" />
                    </tt:Data>
                  </tt:MessageDescription>
                </Card>
              </CredentialNotFound>
            </Denied>
            <Request>
              <Anonymous wstop:topic="true" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                </tt:MessageDescription>
              </Anonymous>
              <Credential wstop:topic="true" xmlns:tns2="http://www.onvif.org/ver10/pacs" xmlns:tns3="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="tns2:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="CredentialToken" Type="tns2:ReferenceToken" />
                    <tt:SimpleItemDescription Name="CredentialHolderName" Type="tns3:string" />
                  </tt:Data>
                </tt:MessageDescription>
              </Credential>
              <Timeout wstop:topic="true" xmlns:tns2="http://www.onvif.org/ver10/pacs" xmlns:tns3="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false" xmlns:tt="http://www.onvif.org/ver10/schema">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="tns2:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="CredentialToken" Type="tns2:ReferenceToken" />
                    <tt:SimpleItemDescription Name="CredentialHolderName" Type="tns3:string" />
                  </tt:Data>
                </tt:MessageDescription>
              </Timeout>
            </Request>
          </tns1:AccessControl>
          <tns1:AccessPoint xmlns:tdc="http://www.onvif.org/ver10/doorcontrol/wsdl">
            <State>
              <Enabled wstop:topic="true" xmlns:pt="http://www.onvif.org/ver10/pacs" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
                <tt:MessageDescription IsProperty="false">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="AccessPointToken" Type="pt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="Reason" Type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" />
                  </tt:Data>
                </tt:MessageDescription>
              </Enabled>
            </State>
          </tns1:AccessPoint>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id="33">
      <Command>Device10.GetScopes</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfScope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/Profile/G</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/Profile/C</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/video_encoder</tt:ScopeItem>
          </Scope>
          <!--<Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/Profile/Streaming</tt:ScopeItem>
          </Scope>-->
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/ptz</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Configurable</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/f040b8ff-99fd-4a53-b96c-3a5e0d79bfb8</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/audio_encoder</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/hardware/P3343</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/name/AXIS%20P3343</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Configurable</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/location/city/NewCity</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Transmitter</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Analytic</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Storage</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Display</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/Network_Video_Display</tt:ScopeItem>
          </Scope>
          <Scope xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:ScopeDef>Fixed</tt:ScopeDef>
            <tt:ScopeItem>onvif://www.onvif.org/type/video_analytics</tt:ScopeItem>
          </Scope>
        </ArrayOfScope>
      </ResponseParameters>
    </Step>
    <Step id="34">
      <Command>Event10.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities PersistentNotificationStorage="true" MaxNotificationProducers="1" MaxPullPoints="4"/>
      </ResponseParameters>
    </Step>
    <Step id="35">
      <Command>GetDeviceInformation</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Manufacturer>DUT Simulator</Manufacturer>
        <Model>DUT</Model>
        <FirmwareVersion>000000</FirmwareVersion>
        <SerialNumber>000000000000000000</SerialNumber>
        <HardwareId>H00000</HardwareId>
      </ResponseParameters>
    </Step>
  </Test>

  <Test ID = "MEDIA2-8-1-1.101" ONVIFTestID="MEDIA2-8-1-1" Enabled="true">
    <TestName>MODIFY ALL SUPPORTED METADATA CONFIGURATIONS</TestName>
    <Name>One Metadata configuration, All options are supported</Name>
    <Description>
      Run test with Assume All Features as supported

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>


    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>MetadataConfig_1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>true</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
              </tt:Filter>
              <tt:SubscriptionPolicy>
              </tt:SubscriptionPolicy>
            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetMetadataConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>MDC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <MetadataConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:PTZStatusFilterOptions>
            <tt:PanTiltStatusSupported>true</tt:PanTiltStatusSupported>
            <tt:ZoomStatusSupported>true</tt:ZoomStatusSupported>
            <tt:PanTiltPositionSupported>true</tt:PanTiltPositionSupported>
            <tt:ZoomPositionSupported>true</tt:ZoomPositionSupported>
          </tt:PTZStatusFilterOptions>
          <tt:Extension>
            <tt:CompressionType>GZIP</tt:CompressionType>
          </tt:Extension>
        </MetadataConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>true</Status>
            <Position>true</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Type" Value="Metadata" />
                  <tt:SimpleItem Name="Token" Value="MDC1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>true</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>
             
            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <!--<tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>-->
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>true</Status>
            <Position>false</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <!--<tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>-->
            <!--<tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>-->
            <!--<tt:Analytics>true</tt:Analytics>-->
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "MEDIA2-8-1-1.102" ONVIFTestID="MEDIA2-8-1-1" Enabled="true">
    <TestName>MODIFY ALL SUPPORTED METADATA CONFIGURATIONS</TestName>
    <Name>One Metadata configuration, All options = false</Name>
    <Description>
      Run test with Assume All Features as supported
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>


    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>MetadataConfig_1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>false</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
              </tt:Filter>
              <tt:SubscriptionPolicy>
              </tt:SubscriptionPolicy>
            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetMetadataConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>MDC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <MetadataConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:PTZStatusFilterOptions>
            <tt:PanTiltStatusSupported>false</tt:PanTiltStatusSupported>
            <tt:ZoomStatusSupported>false</tt:ZoomStatusSupported>
            <tt:PanTiltPositionSupported>false</tt:PanTiltPositionSupported>
            <tt:ZoomPositionSupported>false</tt:ZoomPositionSupported>
          </tt:PTZStatusFilterOptions>          
        </MetadataConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="None">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>false</Status>
            <Position>false</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Type" Value="Metadata" />
                  <tt:SimpleItem Name="Token" Value="MDC1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>false</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="None">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>true</Status>
            <Position>false</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1">
            <tt:Name>TestName2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <!--<tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>-->
            <!--<tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>-->
            <!--<tt:Analytics>true</tt:Analytics>-->
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>

            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "MEDIA2-8-1-1.103" ONVIFTestID="MEDIA2-8-1-1" Enabled="true">
    <TestName>MODIFY ALL SUPPORTED METADATA CONFIGURATIONS</TestName>
    <Name>One Metadata configuration, optional options skipped</Name>
    <Description>
      Run test with Assume All Features as supported
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>


    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>MetadataConfig_1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>false</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
              </tt:Filter>
              <tt:SubscriptionPolicy>
              </tt:SubscriptionPolicy>
            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetMetadataConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>MDC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <MetadataConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:PTZStatusFilterOptions>
            <tt:PanTiltStatusSupported>false</tt:PanTiltStatusSupported>
            <tt:ZoomStatusSupported>false</tt:ZoomStatusSupported>
            <!--<tt:PanTiltPositionSupported>false</tt:PanTiltPositionSupported>
            <tt:ZoomPositionSupported>false</tt:ZoomPositionSupported>-->
          </tt:PTZStatusFilterOptions>
        </MetadataConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="None">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>false</Status>
            <Position>false</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Type" Value="Metadata" />
                  <tt:SimpleItem Name="Token" Value="MDC1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>false</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>

            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="None">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>true</Status>
            <Position>false</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1">
            <tt:Name>TestName2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <!--<tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>-->
            <!--<tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>-->
            <!--<tt:Analytics>true</tt:Analytics>-->
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>

            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "MEDIA2-8-1-1.104" ONVIFTestID="MEDIA2-8-1-1" Enabled="true">
    <TestName>MODIFY ALL SUPPORTED METADATA CONFIGURATIONS</TestName>
    <Name>[Feat.101] PTZ and Alalytics are not supported, DUT returns them with false velues in GetMC response</Name>
    <Description>
      Refresh features with TC.MEDIA2-Feat.101

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>


    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>MetadataConfig_1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>false</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
              </tt:Filter>
              <tt:SubscriptionPolicy>
              </tt:SubscriptionPolicy>
            </tt:Events>
            <tt:Analytics>false</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetMetadataConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>MDC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <MetadataConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:PTZStatusFilterOptions>
            <tt:PanTiltStatusSupported>false</tt:PanTiltStatusSupported>
            <tt:ZoomStatusSupported>false</tt:ZoomStatusSupported>
            <tt:PanTiltPositionSupported>false</tt:PanTiltPositionSupported>
            <tt:ZoomPositionSupported>false</tt:ZoomPositionSupported>
          </tt:PTZStatusFilterOptions>
          <tt:Extension>
            <tt:CompressionType>GZIP</tt:CompressionType>
          </tt:Extension>
        </MetadataConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>         
          <Events>
          </Events>
        
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Type" Value="Metadata" />
                  <tt:SimpleItem Name="Token" Value="MDC1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>false</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>
            <tt:Analytics>false</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <!--<tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>-->
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>         
          <Events>
          </Events>
       
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>false</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>
          
            <tt:Analytics>false</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>

            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "MEDIA2-8-1-1.105" ONVIFTestID="MEDIA2-8-1-1" Enabled="true">
    <TestName>MODIFY ALL SUPPORTED METADATA CONFIGURATIONS</TestName>
    <Name>[Feat.101] PTZ and Alalytics are not supported, DUT does not return them in GetMC response</Name>
    <Description>
      Refresh features with TC.MEDIA2-Feat.101

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>


    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>MetadataConfig_1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>false</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
              </tt:Filter>
              <tt:SubscriptionPolicy>
              </tt:SubscriptionPolicy>
            </tt:Events>
            <tt:Analytics>false</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetMetadataConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>MDC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <MetadataConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:PTZStatusFilterOptions>
            <tt:PanTiltStatusSupported>false</tt:PanTiltStatusSupported>
            <tt:ZoomStatusSupported>false</tt:ZoomStatusSupported>
            <tt:PanTiltPositionSupported>false</tt:PanTiltPositionSupported>
            <tt:ZoomPositionSupported>false</tt:ZoomPositionSupported>
          </tt:PTZStatusFilterOptions>
          <tt:Extension>
            <tt:CompressionType>GZIP</tt:CompressionType>
          </tt:Extension>
        </MetadataConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <Events>
          </Events>

          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Type" Value="Metadata" />
                  <tt:SimpleItem Name="Token" Value="MDC1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
          
            <tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>
         
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <!--<tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>-->
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <Events>
          </Events>

          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            

          
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>

            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "MEDIA2-8-1-1.106" ONVIFTestID="MEDIA2-8-1-1" Enabled="true">
    <TestName>MODIFY ALL SUPPORTED METADATA CONFIGURATIONS</TestName>
    <Name>Two Metadata configurations, All options are supported</Name>
    <Description>
      Run test with Assume All Features as supported

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>


    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>MetadataConfig_1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>true</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
              </tt:Filter>
              <tt:SubscriptionPolicy>
              </tt:SubscriptionPolicy>
            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
          <MetadataConfiguration token="MDC2" CompressionType="GZIP">
            <tt:Name>MetadataConfig_1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>true</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
              </tt:Filter>
              <tt:SubscriptionPolicy>
              </tt:SubscriptionPolicy>
            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Filter>
          <![CDATA[<wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>]]>
        </Filter>
      </RequestParameters>
      <ResponseParameters special="3">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:3246/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>Media210.GetMetadataConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>MDC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <MetadataConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:PTZStatusFilterOptions>
            <tt:PanTiltStatusSupported>true</tt:PanTiltStatusSupported>
            <tt:ZoomStatusSupported>true</tt:ZoomStatusSupported>
            <tt:PanTiltPositionSupported>true</tt:PanTiltPositionSupported>
            <tt:ZoomPositionSupported>true</tt:ZoomPositionSupported>
          </tt:PTZStatusFilterOptions>
          <tt:Extension>
            <tt:CompressionType>GZIP</tt:CompressionType>
          </tt:Extension>
        </MetadataConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>true</Status>
            <Position>true</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Type" Value="Metadata" />
                  <tt:SimpleItem Name="Token" Value="MDC1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>true</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <!--<tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>-->
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>true</Status>
            <Position>false</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <!--<tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>-->
            <!--<tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>-->
            <!--<tt:Analytics>true</tt:Analytics>-->
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>

            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="4">
      <Command>Media210.GetMetadataConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>MDC2</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <MetadataConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:PTZStatusFilterOptions>
            <tt:PanTiltStatusSupported>true</tt:PanTiltStatusSupported>
            <tt:ZoomStatusSupported>true</tt:ZoomStatusSupported>
            <tt:PanTiltPositionSupported>true</tt:PanTiltPositionSupported>
            <tt:ZoomPositionSupported>true</tt:ZoomPositionSupported>
          </tt:PTZStatusFilterOptions>
          <tt:Extension>
            <tt:CompressionType>GZIP</tt:CompressionType>
          </tt:Extension>
        </MetadataConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>true</Status>
            <Position>true</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>PullPointSubscriptionService10.PullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT60S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">30</TerminationTime>
        <TimeShift>-2000</TimeShift>
      </ResponseParametersAdditional>
      <ResponseParameters special="1">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Media/ConfigurationChanged</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-01T07:18:40.321" xmlns:tt="http://www.onvif.org/ver10/schema">
                <tt:Source>
                  <tt:SimpleItem Name="Type" Value="Metadata" />
                  <tt:SimpleItem Name="Token" Value="MDC1" />
                </tt:Source>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName1</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>true</tt:Position>
            </tt:PTZStatus>
            <tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>
            <tt:Analytics>true</tt:Analytics>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>
            <!--<tt:AnalyticsEngineConfiguration>
              <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                <tt:Parameters>
                  <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                  <tt:ElementItem Name="ComlexElemen">
                    <tt:Token>Compplex1</tt:Token>
                    <tt:Type>ComplexType</tt:Type>
                  </tt:ElementItem>
                  <tt:Extension>
                    <tt:Token>ExtentionToken</tt:Token>
                  </tt:Extension>
                </tt:Parameters>
              </tt:AnalyticsModule>
              <tt:Extension>
              </tt:Extension>
            </tt:AnalyticsEngineConfiguration>-->
            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media210.SetMetadataConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <MetadataConfiguration token="MDC2" CompressionType="GZIP">
          <Name>TestName1</Name>
          <UseCount>1</UseCount>
          <PTZStatus>
            <Status>true</Status>
            <Position>false</Position>
          </PTZStatus>
          <Events>
          </Events>
          <Analytics>true</Analytics>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.1</IPv4Address>
            </Address>
            <Port>1</Port>
            <TTL>1</TTL>
            <AutoStart>false</AutoStart>
          </Multicast>
          <SessionTimeout>1PT</SessionTimeout>
        </MetadataConfiguration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media210.GetMetadataConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>token</ConfigurationToken>-->
        <!--<ProfileToken>media_profile1</ProfileToken >-->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMetadataConfiguration xmlns:wsdl="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

          <MetadataConfiguration token="MDC1" CompressionType="GZIP">
            <tt:Name>TestName2</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <!--<tt:PTZStatus>
              <tt:Status>true</tt:Status>
              <tt:Position>false</tt:Position>
            </tt:PTZStatus>-->
            <!--<tt:Events>
              <tt:Filter>
                <wsnt:TopicExpression Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tns1="http://www.onvif.org/ver10/topics">tns1:Media/ConfigurationChanged</wsnt:TopicExpression>
              </tt:Filter>

            </tt:Events>-->
            <!--<tt:Analytics>true</tt:Analytics>-->
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>
              </tt:Address>
              <tt:Port>1</tt:Port>
              <tt:TTL>1</tt:TTL>
              <tt:AutoStart>true</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>P396DT1H1M1S</tt:SessionTimeout>

            <tt:Extension>

            </tt:Extension>
          </MetadataConfiguration>
        </ArrayOfMetadataConfiguration>
      </ResponseParameters>
    </Step>

    <Step id ="12">
      <Command>PullPointSubscriptionService10.Unsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>



</TestSuit>



