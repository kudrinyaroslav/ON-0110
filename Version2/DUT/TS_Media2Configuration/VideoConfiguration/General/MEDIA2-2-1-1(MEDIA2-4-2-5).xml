<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>Get Video Encoder Instances</Name>
    <Description>
      Media service must be: http://localhost:2780/MediaService.asmx
    </Description>
  </Parameters>
  
  
  
<!-- Positive -->  

  <Test ID = "MEDIA2-2-1-1.101" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile - not fixed (skipped); 1 VSC; 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>


<!-- restore -->


    <Step id ="16">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
   <Step id ="18">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.102" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile - not fixed (false); 1 VSC; 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1" fixed="false">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->



		
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="18">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

	
  </Test>

  <Test ID = "MEDIA2-2-1-1.103" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile - fixed; 1 VSC; 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 1
		numberOfVEC1 				 := 3 -->

		
<!-- Step15 Annex28 -->

    <Step id="7">
      <Command>Media210.RemoveConfiguration</Command>
      <Response>Normal</Response>
	  <RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>All</Type>
				<!-- <Token>VSC1</Token> -->
			</Configuration> 
	</RequestParameters>
      <ResponseParameters>
			<RemoveConfigurationResponse></RemoveConfigurationResponse>
      </ResponseParameters>
    </Step> 

<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
        <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

   <Step id="17">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      <Token>media_profile1</Token>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">


            

              </Configurations>
          </MediaProfile>
		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<Step id="18">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

	<Step id="19">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

	
  </Test>

  <Test ID = "MEDIA2-2-1-1.104" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>0 profiles; 1 VSC; 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>

        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


<!-- Step15 Annex28 -->


<!-- Step16 Annex27 -->

    <Step id ="7">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="8">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="9">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="10">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="13">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="14">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>


<!-- restore -->

    <Step id ="15">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

   <Step id ="16">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

  </Test>

  <Test ID = "MEDIA2-2-1-1.105" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile - not fixed (skipped); 2 VSC - 2nd w/total=0; 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>

   <Step id ="6">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC2</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>0</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>

<!-- Step8 -->

   <Step id ="7">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


<!-- Step15 Annex28 -->

    <Step id ="8">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="9">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="10">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
		
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="14">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="15">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="16">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>


<!-- restore -->

    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="18">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="19">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

  </Test>

  <Test ID = "MEDIA2-2-1-1.106" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>total=0; numberOfVEC1=0</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>0</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>

        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 0
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 0 -->

	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

	
  </Test>
  
  <Test ID = "MEDIA2-2-1-1.107" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>3 profile - 2 not fixed + 1 fixed; 1 VSC; 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        
          <MediaProfile token="media_profile2" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>

          <MediaProfile token="media_profile3" fixed="false">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>

		  
		  
		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 1
		numberOfVEC1 				 := 3 -->



<!-- Step15 Annex28 -->

    <Step id="7">
      <Command>Media210.RemoveConfiguration</Command>
      <Response>Normal</Response>
	  <RequestParameters>
			<ProfileToken>media_profile2</ProfileToken>
			<Configuration>
				<Type>All</Type>
				<!-- <Token>VSC1</Token> -->
			</Configuration> 
	</RequestParameters>
      <ResponseParameters>
			<RemoveConfigurationResponse></RemoveConfigurationResponse>
      </ResponseParameters>
    </Step> 

    <Step id ="8">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="9">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile3</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>	
	

<!-- Step16 Annex27 -->

    <Step id ="10">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="11">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="12">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="14">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="15">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="16">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="17">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->
	
   <Step id ="18">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="19">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

    <Step id ="20">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile3</string>
      </ResponseParameters>
    </Step>

   <Step id="21">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      <Token>media_profile2</Token>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile2" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">


            

              </Configurations>
          </MediaProfile>
		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<Step id="22">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

	<Step id="23">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile2</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="24">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
   
  </Test>

  <Test ID = "MEDIA2-2-1-1.108" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>total=0</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>0</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 0
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

<!-- restore -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

	
  </Test>

  <Test ID = "MEDIA2-2-1-1.109" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>no Codec in GetVideoEncoderInstances</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">

            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->

		
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="18">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

	
  </Test>
 
  <Test ID = "MEDIA2-2-1-1.110" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>numberOfProfilesToBeCreated1 = cap1.ProfileCapabilities.MaximumNumberOfProfiles - numberOfFixedProfiles1</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="1" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 1
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->
		
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="18">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
   
   
  </Test>

  <Test ID = "MEDIA2-2-1-1.111" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>numberOfProfilesToBeCreated1 = numberOfVEC1</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>

          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  

        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 1 -->



<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="18">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
   
   
  </Test>

  <Test ID = "MEDIA2-2-1-1.112" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile - not fixed (skipped); 1 VSC (total=2); 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>2</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 2
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->



<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next profile -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="17">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="18">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="19">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC3</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="21">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="22">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC3</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="23">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken2</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC3">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="24">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>
	
    <Step id ="25">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="26">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="27">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id ="28">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>   

   </Test>

  <Test ID = "MEDIA2-2-1-1.113" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile - not fixed (skipped); 2 VSC (total= 1, 1); 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>Mpeg4</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>

   <Step id ="6">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC2</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>Mpeg4</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>
   
<!-- Step8 -->

   <Step id ="7">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 2
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->

		
<!-- Step15 Annex28 -->

    <Step id ="8">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="9">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="10">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="14">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="15">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="16">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next VSC -->

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="18">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
		  
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="19">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="21">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC3</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="22">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="23">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC3</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="24">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken2</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC2">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC3">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="25">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="26">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="27">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="28">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
   
   <Step id ="29">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
   
  </Test>

  <Test ID = "MEDIA2-2-1-1.114" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 VSC (total=2); for 2nd profile 2nd configuration and 2nd option are suitable</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Codec>
               <tt:Encoding>Mpeg4</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>2</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 2
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next profile -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="17">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="18">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="19">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC3</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="21">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>
		
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>H264</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>
       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
	
   <Step id ="22">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC1">
            <Name>user0</Name>
            <Encoding>H264</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="23">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="24">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken2</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken2">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="25">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="26">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="27">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
   
   <Step id ="28">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id ="29">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
   
  </Test>
 
  <Test ID = "MEDIA2-2-1-1.115" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>2 VSC (total = 2, 3)</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="6" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Codec>
               <tt:Encoding>Mpeg4</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>2</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>

   <Step id ="6">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC2</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Codec>
               <tt:Encoding>Mpeg4</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>3</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>

<!-- Step8 -->

   <Step id ="7">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
		  <VideoEncoder2Configuration token="VEC4" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
		  <VideoEncoder2Configuration token="VEC5" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
		  <VideoEncoder2Configuration token="VEC6" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 5
		MaximumNumberOfProfiles		 := 6
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 6 -->

		
<!-- Step15 Annex28 -->

    <Step id ="8">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="9">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="10">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="14">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="15">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="16">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next profile -->

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="18">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="19">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="21">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC3</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="22">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>
		
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>H264</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>
       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
	
   <Step id ="23">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC1">
            <Name>user0</Name>
            <Encoding>H264</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="24">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="25">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken2</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken2">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next VSC -->

	<Step id ="26">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken3</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="27">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken3</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="28">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken3</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="29">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken3</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="30">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC3</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Jpeg</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="31">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="32">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken3</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC3</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="33">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken3</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken3">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC2">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC3">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Jpeg</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next profile -->

	<Step id ="34">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken4</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="35">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken4</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="36">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken4</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="37">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken4</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC4" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="38">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC4</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Jpeg</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="39">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC4">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="40">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken4</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC4</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="41">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken4</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC2">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC4">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Jpeg</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next profile -->

	
	<Step id ="42">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken5</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="43">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken5</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="44">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken5</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="45">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken5</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC5" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="46">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC5</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Jpeg</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="47">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC5">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="48">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken5</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC5</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="49">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken5</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken5">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC2">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC5">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Jpeg</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->
	
   <Step id ="50">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

   <Step id ="51">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>
	
   <Step id ="52">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken3</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

   <Step id ="53">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken4</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

   <Step id ="54">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken5</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>
   
   <Step id ="55">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="56">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
   
   <Step id ="57">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>   

   <Step id ="58">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>   

   <Step id ="59">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC4" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>   

   <Step id ="60">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC5" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>   
   
  </Test>

  <!-- restore -->
  
  <Test ID = "MEDIA2-2-1-1.116" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>2 profile - not fixed + fixed w/no configurations; 1 VSC; 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   
recheck a.28 and restore for configurations
      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

            

              </Configurations>
          </MediaProfile>
        
          <MediaProfile token="media_profile2" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

            

              </Configurations>
          </MediaProfile>


		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 1
		numberOfVEC1 				 := 3 -->


<!-- Step15 Annex28 -->

    <Step id="7">
      <Command>Media210.RemoveConfiguration</Command>
      <Response>Normal</Response>
	  <RequestParameters>
			<ProfileToken>media_profile2</ProfileToken>
			<Configuration>
				<Type>All</Type>
				<!-- <Token>VSC1</Token> -->
			</Configuration> 
	</RequestParameters>
      <ResponseParameters>
			<RemoveConfigurationResponse></RemoveConfigurationResponse>
      </ResponseParameters>
    </Step> 


    <Step id ="8">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>
	
<!-- Step16 Annex27 -->

    <Step id ="9">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="10">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="14">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="15">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="16">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->
	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="18">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>

      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id="19">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      <Token>media_profile2</Token>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile2" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">


            

              </Configurations>
          </MediaProfile>
		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

  </Test>

  <Test ID = "MEDIA2-2-1-1.117" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile not fixed - All configs</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

             <AudioSource token="ASC1">
              <tt:Name>AudioSourceConfig1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>AS1</tt:SourceToken>
            </AudioSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>
            </VideoEncoder>
			
			 <AudioEncoder token="AEC1">
              <tt:Name>AudioEncConf1</tt:Name>            
              
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>PCMU</tt:Encoding>
             
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>
               <tt:Bitrate>64</tt:Bitrate>
              <tt:SampleRate>8000</tt:SampleRate>              
            </AudioEncoder>
			
            <Analytics token="VAC1">
                <tt:Name>videoAnaliticsName</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                    <tt:Parameters>
                      <!--Zero or more repetitions:-->
                      <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                      <!--Zero or more repetitions:-->
                      <tt:ElementItem Name="ComlexElemen">
                        <tt:Token>Compplex1</tt:Token>
                        <tt:Type>ComplexType</tt:Type>
                        <!--You may enter ANY elements at this point-->
                      </tt:ElementItem>
                      <!--Optional:-->
                      <tt:Extension>
                        <tt:Token>ExtentionToken</tt:Token>
                        <!--You may enter ANY elements at this point-->
                      </tt:Extension>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                  <!--Optional:-->
                  <tt:Extension>
                    <!--You may enter ANY elements at this point-->
                  </tt:Extension>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>

                  <!--Optional:-->
                  <tt:Extension>
                    <!--You may enter ANY elements at this point-->
                  </tt:Extension>
                </tt:RuleEngineConfiguration>
            </Analytics>
				
            <PTZ token="ptz0">
                <tt:Name>PTZConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:NodeToken>ptz0</tt:NodeToken>
                <tt:DefaultAbsolutePantTiltPositionSpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/PositionGenericSpace</tt:DefaultAbsolutePantTiltPositionSpace>
                <tt:DefaultAbsoluteZoomPositionSpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/PositionGenericSpace</tt:DefaultAbsoluteZoomPositionSpace>
                <tt:DefaultRelativePanTiltTranslationSpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/TranslationGenericSpace</tt:DefaultRelativePanTiltTranslationSpace>
                <tt:DefaultRelativeZoomTranslationSpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/TranslationGenericSpace</tt:DefaultRelativeZoomTranslationSpace>
                <tt:DefaultContinuousPanTiltVelocitySpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/VelocityGenericSpace</tt:DefaultContinuousPanTiltVelocitySpace>
                <tt:DefaultContinuousZoomVelocitySpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/VelocityGenericSpace</tt:DefaultContinuousZoomVelocitySpace>
                <tt:DefaultPTZTimeout>PT1M</tt:DefaultPTZTimeout>
                <tt:PanTiltLimits>
                <tt:Range>
                  <tt:URI>http://www.onvif.org/ver10/tptz/PanTiltSpaces/PositionGenericSpace</tt:URI>
                  <tt:XRange>
                    <tt:Min>-1.000000</tt:Min>
                    <tt:Max>1.000000</tt:Max>
                  </tt:XRange>
                  <tt:YRange>
                    <tt:Min>-1.000000</tt:Min>
                    <tt:Max>1.000000</tt:Max>
                  </tt:YRange>
                </tt:Range>
              </tt:PanTiltLimits>
              <tt:ZoomLimits>
                <tt:Range>
                  <tt:URI>http://www.onvif.org/ver10/tptz/ZoomSpaces/PositionGenericSpace</tt:URI>
                  <tt:XRange>
                    <tt:Min>0.000000</tt:Min>
                    <tt:Max>1.000000</tt:Max>
                  </tt:XRange>
                </tt:Range>
              </tt:ZoomLimits> 
            </PTZ>
			  
			<Metadata token="MC1" CompressionType="None">
              <tt:Name>MetadataConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
			  <tt:PTZStatus>
				<tt:Status>true</tt:Status>
				<tt:Position>false</tt:Position>
			  </tt:PTZStatus>
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>
              <tt:SessionTimeout>PT0S</tt:SessionTimeout>
            </Metadata>

			<AudioOutput token="AOC1">
                <tt:Name>TestName1</tt:Name>
                <tt:OutputToken>AO1</tt:OutputToken>
                <!--Optional:-->
                <tt:SendPrimacy>www.onvif.org/ver20/HalfDuplex/Server</tt:SendPrimacy>
                <tt:OutputLevel>10</tt:OutputLevel>
            </AudioOutput>
			  
			<AudioDecoder token="ADC1">
                <tt:Name>AudioDecoder1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
            </AudioDecoder>
   

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>


<!-- restore -->
	
    <Step id ="16">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>AudioSource</Type>
			<Token>ASC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>AudioEncoder</Type>
			<Token>AEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>Analytics</Type>
			<Token>VAC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>PTZ</Type>
			<Token>ptz0</Token>
		  </Configuration>
		  <Configuration>
			<Type>Metadata</Type>
			<Token>MC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>AudioOutput</Type>
			<Token>AOC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>AudioDecoder</Type>
			<Token>ADC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="18">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.118" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile - fixed - All configs</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
    
          <MediaProfile token="media_profile1" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

             <AudioSource token="ASC1">
              <tt:Name>AudioSourceConfig1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>AS1</tt:SourceToken>
            </AudioSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>
            </VideoEncoder>
			
			 <AudioEncoder token="AEC1">
              <tt:Name>AudioEncConf1</tt:Name>            
              
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>PCMU</tt:Encoding>
             
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>
               <tt:Bitrate>64</tt:Bitrate>
              <tt:SampleRate>8000</tt:SampleRate>              
            </AudioEncoder>
			
            <Analytics token="VAC1">
                <tt:Name>videoAnaliticsName</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:AnalyticsEngineConfiguration>
                  <tt:AnalyticsModule Name="AnalyticsEngineConfiguration1" Type="VideoAnalyticsConfiguration">
                    <tt:Parameters>
                      <!--Zero or more repetitions:-->
                      <tt:SimpleItem Name="VideoConfiguration" Value="VC1"/>
                      <!--Zero or more repetitions:-->
                      <tt:ElementItem Name="ComlexElemen">
                        <tt:Token>Compplex1</tt:Token>
                        <tt:Type>ComplexType</tt:Type>
                        <!--You may enter ANY elements at this point-->
                      </tt:ElementItem>
                      <!--Optional:-->
                      <tt:Extension>
                        <tt:Token>ExtentionToken</tt:Token>
                        <!--You may enter ANY elements at this point-->
                      </tt:Extension>
                    </tt:Parameters>
                  </tt:AnalyticsModule>
                  <!--Optional:-->
                  <tt:Extension>
                    <!--You may enter ANY elements at this point-->
                  </tt:Extension>
                </tt:AnalyticsEngineConfiguration>
                <tt:RuleEngineConfiguration>

                  <!--Optional:-->
                  <tt:Extension>
                    <!--You may enter ANY elements at this point-->
                  </tt:Extension>
                </tt:RuleEngineConfiguration>
            </Analytics>
				
            <PTZ token="ptz0">
                <tt:Name>PTZConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:NodeToken>ptz0</tt:NodeToken>
                <tt:DefaultAbsolutePantTiltPositionSpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/PositionGenericSpace</tt:DefaultAbsolutePantTiltPositionSpace>
                <tt:DefaultAbsoluteZoomPositionSpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/PositionGenericSpace</tt:DefaultAbsoluteZoomPositionSpace>
                <tt:DefaultRelativePanTiltTranslationSpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/TranslationGenericSpace</tt:DefaultRelativePanTiltTranslationSpace>
                <tt:DefaultRelativeZoomTranslationSpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/TranslationGenericSpace</tt:DefaultRelativeZoomTranslationSpace>
                <tt:DefaultContinuousPanTiltVelocitySpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/VelocityGenericSpace</tt:DefaultContinuousPanTiltVelocitySpace>
                <tt:DefaultContinuousZoomVelocitySpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/VelocityGenericSpace</tt:DefaultContinuousZoomVelocitySpace>
                <tt:DefaultPTZTimeout>PT1M</tt:DefaultPTZTimeout>
                <tt:PanTiltLimits>
                <tt:Range>
                  <tt:URI>http://www.onvif.org/ver10/tptz/PanTiltSpaces/PositionGenericSpace</tt:URI>
                  <tt:XRange>
                    <tt:Min>-1.000000</tt:Min>
                    <tt:Max>1.000000</tt:Max>
                  </tt:XRange>
                  <tt:YRange>
                    <tt:Min>-1.000000</tt:Min>
                    <tt:Max>1.000000</tt:Max>
                  </tt:YRange>
                </tt:Range>
              </tt:PanTiltLimits>
              <tt:ZoomLimits>
                <tt:Range>
                  <tt:URI>http://www.onvif.org/ver10/tptz/ZoomSpaces/PositionGenericSpace</tt:URI>
                  <tt:XRange>
                    <tt:Min>0.000000</tt:Min>
                    <tt:Max>1.000000</tt:Max>
                  </tt:XRange>
                </tt:Range>
              </tt:ZoomLimits> 
            </PTZ>
			  
			<Metadata token="MC1" CompressionType="None">
              <tt:Name>MetadataConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
			  <tt:PTZStatus>
				<tt:Status>true</tt:Status>
				<tt:Position>false</tt:Position>
			  </tt:PTZStatus>
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>
              <tt:SessionTimeout>PT0S</tt:SessionTimeout>
            </Metadata>

			<AudioOutput token="AOC1">
                <tt:Name>TestName1</tt:Name>
                <tt:OutputToken>AO1</tt:OutputToken>
                <!--Optional:-->
                <tt:SendPrimacy>www.onvif.org/ver20/HalfDuplex/Server</tt:SendPrimacy>
                <tt:OutputLevel>10</tt:OutputLevel>
            </AudioOutput>
			  
			<AudioDecoder token="ADC1">
                <tt:Name>AudioDecoder1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
            </AudioDecoder>
   

              </Configurations>
          </MediaProfile>
		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 1
		numberOfVEC1 				 := 3 -->

		
<!-- Step15 Annex28 -->

    <Step id="7">
      <Command>Media210.RemoveConfiguration</Command>
      <Response>Normal</Response>
	  <RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>All</Type>
				<!-- <Token>VSC1</Token> -->
			</Configuration> 
	</RequestParameters>
      <ResponseParameters>
			<RemoveConfigurationResponse></RemoveConfigurationResponse>
      </ResponseParameters>
    </Step> 

<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

   <Step id="17">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      <Token>media_profile1</Token>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">


            

              </Configurations>
          </MediaProfile>
		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>
	
	<Step id="18">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
			<Type>AudioOutput</Type>
			<Token>AOC1</Token>
		  </Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	
	
	<Step id="19">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
			<Type>AudioSource</Type>
			<Token>ASC1</Token>
		  </Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	
	
	<Step id="20">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

	<Step id="21">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
			<Type>Metadata</Type>
			<Token>MC1</Token>
		  </Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	
	
	<Step id="22">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
			<Type>Analytics</Type>
			<Token>VAC1</Token>
		  </Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>
	
	<Step id="23">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
			<Type>PTZ</Type>
			<Token>ptz0</Token>
		  </Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>
	
	<Step id="24">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
			<Type>AudioDecoder</Type>
			<Token>ADC1</Token>
		  </Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>		

	<Step id="25">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
			<Type>AudioEncoder</Type>
			<Token>AEC1</Token>
		  </Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

	<Step id="26">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="27">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>


	
  </Test>

   <!-- #1441 -->
  
  <Test ID = "MEDIA2-2-1-1.119" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>1 profile - not fixed (skipped); 1 VSC; 3 VEC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>2</tt:Number>
            </tt:Codec>
            <tt:Total>2</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 2
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>H264</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>H264</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- next -->

    <Step id ="16">
		<Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="17">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="18">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="19">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC3</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>H264</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="21">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3">
            <Name>user0</Name>
            <Encoding>H264</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="22">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC3</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="23">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken2</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC3">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>



<!-- restore -->


    <Step id ="24">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="25">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>
	
    <Step id ="26">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
   <Step id ="27">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
	
   <Step id ="28">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

  </Test>
  
  <Test ID = "MEDIA2-2-1-1.120" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>#1441 - as provided in ticket</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            <tt:Codec>
               <tt:Encoding>JPEG</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>2</tt:Number>
            </tt:Codec>
            <tt:Total>3</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 3
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>H264</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC1">
            <Name>user0</Name>
            <Encoding>H264</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- next -->

    <Step id ="16">
		<Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="17">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="18">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="19">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>H264</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="21">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>H264</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="22">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="23">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken2</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

<!-- next -->

    <Step id ="24">
		<Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken3</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="25">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken3</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="26">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken3</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="27">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken3</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="28">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC3</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>JPEG</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="29">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3">
            <Name>user0</Name>
            <Encoding>JPEG</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="30">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken3</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC3</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="31">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken3</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC3">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>JPEG</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>




<!-- restore -->


    <Step id ="32">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="33">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="34">
		<Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken3</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>
	
    <Step id ="35">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
   <Step id ="36">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>H264</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
	
   <Step id ="37">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>
	
   <Step id ="38">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>H264</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

  </Test>

  
  
  
  
  
<!-- Negative -->
 
  <Test ID = "MEDIA2-2-1-1.201" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>numberOfProfilesToBeCreated1 > cap1.ProfileCapabilities.MaximumNumberOfProfiles - numberOfFixedProfiles1 (MaximumNumberOfProfiles lower numberOfProfilesToBeCreated1) </Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>5</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 5
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->



  </Test>

  <Test ID = "MEDIA2-2-1-1.202" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>numberOfProfilesToBeCreated1 > cap1.ProfileCapabilities.MaximumNumberOfProfiles - numberOfFixedProfiles1 (Subtraction result lower than numberOfProfilesToBeCreated1)</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1" fixed="true">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="1" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 1
		numberOfFixedProfiles1 		 := 1
		numberOfVEC1 				 := 3 -->

	
  </Test>

  <Test ID = "MEDIA2-2-1-1.203" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>numberOfProfilesToBeCreated1 > numberOfVEC1</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>

        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
  </Test>

  <Test ID = "MEDIA2-2-1-1.204" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>0 VSC</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>

		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.205" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>MaximumNumberOfProfiles="-4"</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="-4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->
	
  </Test>

  <Test ID = "MEDIA2-2-1-1.206" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>no MaximumNumberOfProfiles in GetServiceCapabilities</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
  </Test>

  <Test ID = "MEDIA2-2-1-1.207" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>a.27 - no VideoSource in GetVideoSourceConfigurations response</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
<!--           <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration> -->
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="10">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
  </Test>

  <Test ID = "MEDIA2-2-1-1.208" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>a.27 - no VideoSource w/correct token in GetVideoSourceConfigurations response</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->



		
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
           <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration> 
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="10">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="11">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
  </Test>
 
  <Test ID = "MEDIA2-2-1-1.209" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>a.27 no VEC in GetVideoEncoderConfigurations response</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->

		
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>

        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="12">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="13">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
  </Test>

  <Test ID = "MEDIA2-2-1-1.210" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>a.27 VEC from GetVideoEncoderConfigurations is contained in configuredProfilesList (w/same VSC)</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>2</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 2
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next profile -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="17">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="18">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="19">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>
	
<!-- restore -->

    <Step id ="20">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="21">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="22">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="23">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

	
  </Test>

  <Test ID = "MEDIA2-2-1-1.211" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>a.27 VEC from GetVideoEncoderConfigurations is contained in configuredProfilesList (w/diff VSC)</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>

   <Step id ="6">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC2</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>
   
<!-- Step8 -->

   <Step id ="7">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 2
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->

		
<!-- Step15 Annex28 -->

    <Step id ="8">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="9">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="10">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="14">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="15">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="16">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next VSC -->

    <Step id ="17">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="18">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
		  
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="19">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- restore -->
	
    <Step id ="21">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="22">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="23">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>

   <Step id ="24">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>


	
  </Test>
 
  <Test ID = "MEDIA2-2-1-1.212" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>a.27 number of options is reached</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
			<tt:Codec>
               <tt:Encoding>Mpeg4</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>2</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 2
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->

		
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>

   <Step id="14">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC2</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

   <Step id="15">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		      <Token>clearProfileToken</Token>
				<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="clearProfileToken">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC2">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>Mpeg4</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

	<!-- next profile -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken2</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="17">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="18">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken2</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="19">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken2</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="20">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC3</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>


	
<!-- restore -->


    <Step id ="21">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="22">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken2</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>

    <Step id ="23">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
   <Step id ="24">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple">
            <Name>user0</Name>
            <Encoding>Jpeg</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
			<RateControl>
              <FrameRateLimit>30</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>80</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>


	
  </Test>

  <Test ID = "MEDIA2-2-1-1.213" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>each total is lower than max. sum is higher</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
          <VideoSourceConfiguration token="VSC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Codec>
               <tt:Encoding>Mpeg4</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>2</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>

   <Step id ="6">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC2</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Codec>
               <tt:Encoding>Mpeg4</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>3</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>

<!-- Step8 -->

   <Step id ="7">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 5
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->



  </Test>

  
  
  
<!-- Fault -->

  <Test ID = "MEDIA2-2-1-1.301" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on GetProfiles</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Fault</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.302" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on GetServiceCapabilities</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Fault</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

  </Test>

  <Test ID = "MEDIA2-2-1-1.303" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on GetVideoSourceConfigurations</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "MEDIA2-2-1-1.304" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on GetVideoEncoderInstances</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Fault</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.305" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on GetVideoEncoderConfigurations</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Fault</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "MEDIA2-2-1-1.306" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on DeleteProfile</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>



<!-- restore -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	


  </Test>

  <Test ID = "MEDIA2-2-1-1.307" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on CreateProfile</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Fault</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>


<!-- restore -->

	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "MEDIA2-2-1-1.308" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on AddConfiguration</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Fault</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "MEDIA2-2-1-1.309" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on GetVideoEncoderConfigurationOptions</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Fault</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.310" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>Fault on SetVideoEncoderConfiguration</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>


<!-- restore -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>



  </Test>


  
  
<!-- NoResponse -->

  <Test ID = "MEDIA2-2-1-1.401" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on GetProfiles</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>NoResponse</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.402" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on GetServiceCapabilities</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>NoResponse</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

  </Test>

  <Test ID = "MEDIA2-2-1-1.403" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on GetVideoSourceConfigurations</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "MEDIA2-2-1-1.404" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on GetVideoEncoderInstances</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.405" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on GetVideoEncoderConfigurations</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>NoResponse</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

  </Test>

  <Test ID = "MEDIA2-2-1-1.406" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on DeleteProfile</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>



<!-- restore -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	


  </Test>

  <Test ID = "MEDIA2-2-1-1.407" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on CreateProfile</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>


<!-- restore -->

	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "MEDIA2-2-1-1.408" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on AddConfiguration</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>NoResponse</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>



  </Test>

  <Test ID = "MEDIA2-2-1-1.409" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on GetVideoEncoderConfigurationOptions</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- restore -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


  </Test>

  <Test ID = "MEDIA2-2-1-1.410" ONVIFTestID="MEDIA2-2-1-1" Enabled="true">
    <TestName>Get Video Encoder Instances</TestName>
    <Name>NoResponse on SetVideoEncoderConfiguration</Name>
    <Description>  

    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>   

      </TestSummary>
    </ExpectedResult>
   <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
         <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>    
   
   <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
	  <RequestParameters>
	 		<Type>All</Type>
      </RequestParameters> 
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
             <VideoSource token="VSC1">
              <tt:Name>VideoSourceConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:SourceToken>VS1</tt:SourceToken>
              <tt:Bounds height="1080" width="1920" y="1" x="1">
              </tt:Bounds>
            </VideoSource>

            <VideoEncoder token="VEC1">
              <tt:Name>VideoEncConf1</tt:Name>
              <tt:UseCount>1</tt:UseCount>
              <tt:Encoding>H264</tt:Encoding>
              <tt:Resolution>
                <tt:Width>320</tt:Width>
                <tt:Height>192</tt:Height>
              </tt:Resolution>
              <tt:Quality>7</tt:Quality>
              <tt:RateControl>
                <tt:FrameRateLimit>1</tt:FrameRateLimit>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <tt:BitrateLimit>2048</tt:BitrateLimit>
              </tt:RateControl>
              <!--<tt:H264>
                <tt:GovLength>32</tt:GovLength>
                <tt:H264Profile>Baseline</tt:H264Profile>
              </tt:H264>-->
              <tt:Multicast>
                <tt:Address>
                  <tt:Type>IPv4</tt:Type>
                  <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                </tt:Address>
                <tt:Port>0</tt:Port>
                <tt:TTL>3</tt:TTL>
                <tt:AutoStart>false</tt:AutoStart>
              </tt:Multicast>

            </VideoEncoder>
            

              </Configurations>
          </MediaProfile>
        

		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="3">
      <Command>Media210.GetServiceCapabilities</Command>
      <Response>Normal</Response>      
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities2 SnapshotUri="true" Rotation="true" VideoSourceMode="true" OSD="true" xmlns:tcr="http://www.onvif.org/ver20/media/wsdl">
          <tcr:ProfileCapabilities MaximumNumberOfProfiles="4" ConfigurationsSupported="VideoSource VideoEncoder"></tcr:ProfileCapabilities>
          <tcr:StreamingCapabilities RTSPStreaming="true" RTPMulticast="true" RTP_RTSP_TCP="true" NonAggregateControl="true"></tcr:StreamingCapabilities>         
        </Capabilities2>
      </ResponseParameters>
    </Step>	

   <Step id="4">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
<!--         <ProfileToken>media_profile1</ProfileToken> -->
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>
          </VideoSourceConfiguration>
		  
		  
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

<!-- step7 -->

   <Step id ="5">
      <Command>Media210.GetVideoEncoderInstances</Command>
      <Response>Normal</Response>
      <RequestParameters>
		<ConfigurationToken>VSC1</ConfigurationToken>   
	  </RequestParameters> 
	   <ResponseParameters>
	    <EncoderInstanceInfo xmlns:tt="http://www.onvif.org/ver20/media/wsdl">
            
            <tt:Codec>
               <tt:Encoding>H264</tt:Encoding>
               <tt:Number>1</tt:Number>
            </tt:Codec>
            <tt:Total>1</tt:Total>
            
         </EncoderInstanceInfo>
		</ResponseParameters> 
   </Step>


<!-- Step8 -->

   <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <!-- <ProfileToken>media_profile2</ProfileToken>  -->
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="VEC3" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

<!-- 	numberOfProfilesToBeCreated1 := 1
		MaximumNumberOfProfiles		 := 4
		numberOfFixedProfiles1 		 := 0
		numberOfVEC1 				 := 3 -->


	
<!-- Step15 Annex28 -->

    <Step id ="7">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>media_profile1</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>


<!-- Step16 Annex27 -->

    <Step id ="8">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
       <Name>testMedia</Name>
      </RequestParameters>
      <ResponseParameters>
        <string>clearProfileToken</string>
      </ResponseParameters>
    </Step>
	
	<Step id ="9">
      <Command>Media210.GetVideoSourceConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <!--<ConfigurationToken>VSC1</ConfigurationToken>-->
        <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>

      <ResponseParameters>
        <ArrayOfVideoSourceConfiguration>
          <VideoSourceConfiguration token="VSC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:SourceToken>source1</tt:SourceToken>
            <tt:Bounds x="1" y="1" width="100" height="50">
            </tt:Bounds>

          </VideoSourceConfiguration>
        </ArrayOfVideoSourceConfiguration>
      </ResponseParameters>
    </Step>

	<Step id="10">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>clearProfileToken</ProfileToken>
			<Configuration>
				<Type>VideoSource</Type>
				<Token>VSC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>

   <Step id ="11">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>clearProfileToken</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC2" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>Jpeg</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

   <Step id ="12">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC2</ConfigurationToken>
       <!--  <ProfileToken>0</ProfileToken> -->
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
        <VideoEncoder2ConfigurationOptions GovLengthRange="10" FrameRatesSupported="0 30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Encoding>Mpeg4</tt:Encoding>
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>         
           <tt:ResolutionsAvailable>
            <tt:Width>40</tt:Width>
          <tt:Height>80</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:BitrateRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:BitrateRange>
        </VideoEncoder2ConfigurationOptions>

       </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="13">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>NoResponse</Response>
      <RequestParameters>
		 <VideoEncoder2Configuration token="VEC2">
            <Name>user0</Name>
            <Encoding>Mpeg4</Encoding>
            <Resolution>
               <Width>40</Width>
               <Height>80</Height>
            </Resolution>
              <Multicast>
                <Address>
                  <Type>IPv4</Type>
                  <IPv4Address>0.0.0.0</IPv4Address>
                </Address>
                <Port>0</Port>
                <TTL>5</TTL>
                <AutoStart>False</AutoStart> 
              </Multicast>
            <Quality>0</Quality>
         </VideoEncoder2Configuration>
	  </RequestParameters> 
	   <ResponseParameters>
        <SetVideoEncoderConfiguration>       
       </SetVideoEncoderConfiguration>
	   </ResponseParameters> 
   </Step>


<!-- restore -->

    <Step id ="16">
      <Command>Media210.CreateProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
		  <Name>media2_profile1</Name>
		  <Configuration>
			<Type>VideoEncoder</Type>
			<Token>VEC1</Token>
		  </Configuration>
		  <Configuration>
			<Type>VideoSource</Type>
			<Token>VSC1</Token>
		  </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <string>media_profile1</string>
      </ResponseParameters>
    </Step>
	
    <Step id ="17">
      <Command>Media210.DeleteProfile</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Token>clearProfileToken</Token>
      </RequestParameters>
      <ResponseParameters>
	  <DeleteProfileResponse></DeleteProfileResponse>
      </ResponseParameters>
    </Step>



  </Test>

  </TestSuit>
