<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>Real Time Viewing DUT H.265 media streaming using RTP-Unicast/UDP transport. </Name>
    <Description>
	  Use service/1 user name and password on Discovery tab
		  
		  
      Media service must be: http://localhost:2780/MediaService.asmx
    </Description>
  </Parameters>

  <!--positive-->
  
  <!-- Annex 6 -->
  
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.101" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>1 profile w/suitable GetVideoEncoderConfigurationOptions Response</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.102" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>2 profiles: 1st wo VideoSource and VideoEncoder; 2nd w/suitable GetVideoEncoderConfigurationOptions Response</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile11">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">


            </Configurations>
          </MediaProfile>		
		
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.103" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>2 profiles: 1st wo  VideoEncoder; 2nd w/suitable GetVideoEncoderConfigurationOptions Response</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile11">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>

            </Configurations>
          </MediaProfile>		
		
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.104" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>2 profiles: 1st wo VideoSource; 2nd w/suitable GetVideoEncoderConfigurationOptions Response</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile11">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
			  
            </Configurations>
          </MediaProfile>		
		
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.105" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>2 profiles: 1st wo/suitable GetVideoEncoderConfigurationOptions Response</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile01">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
		
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile01</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="4">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>

          <VideoEncoder2ConfigurationOptions  xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="5">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="6">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="7">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.106" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>1 profile wo/suitable GetVideoEncoderConfigurationOptions Response</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.107" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>1 profile wo VideoEncoder</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>

            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id ="3">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
	  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="4">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="5">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="7">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="8">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id ="9">
      <Command>Media210.RemoveConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ProfileToken>media_profile1</ProfileToken>
      <!--<ArrayOfConfiguration>--> 
          <Configuration>
            <Type>VideoEncoder</Type>
			<Token>NewVEC</Token>
          </Configuration>         
       <!--</ArrayOfConfiguration>--> 
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

    <Step id="10">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.108" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>4 profiles - 4th will be used in 2nd cycle</Name>
    <Description>
		1st profile w/ VSC and VEC - unsuitable options
		2nd wo VSC
		3rd w same VSC.token as 1st
		4th wo VEC - will be used 
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile_1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC0">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>

          <MediaProfile token="media_profile01">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">

              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>

          <MediaProfile token="media_profile001">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>

          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>

		  </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC0</ConfigurationToken>
        <ProfileToken>media_profile_1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="4">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile001</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
	
    <Step id ="6">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile_1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="7">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile_1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
	
    <Step id ="8">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="9">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="10">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	
	
	
<!-- start -->
	
    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="13">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="14">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC2">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="15">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="16">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
<!-- SetVideoEncoderConfiguration - data from GetProfiles-->
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.109" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>no GovLengthRange in profile; is in GetVideoEncoderConfigurationOptions</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  GovLengthRange="10 40" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1" GovLength="10">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.110" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>no ProfilesSupported in profile; is in GetVideoEncoderConfigurationOptions</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  ProfilesSupported="Simple High Baseline AdvancedSimple Extended" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1" Profile="High">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.111" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported in GetVideoEncoderConfigurationOptions; no vecOptions.@ConstantBitRateSupported;  </Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10 40 50" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
            <FrameRateLimit>10</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.112" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported in GetVideoEncoderConfigurationOptions; vecOptions.@ConstantBitRateSupported; ConstantBitRateSupported="true" </Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10 40 50" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
		   <ConstantBitRateSpecified>True</ConstantBitRateSpecified>
            <FrameRateLimit>10</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.113" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported in GetVideoEncoderConfigurationOptions; vecOptions.@ConstantBitRateSupported; ConstantBitRateSupported="false" </Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10 40 50" ConstantBitRateSupported="false" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
		   <ConstantBitRateSpecified>False</ConstantBitRateSpecified>
            <FrameRateLimit>10</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.114" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>GovLengthRange in profile; is in GetVideoEncoderConfigurationOptions</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1" GovLength="0">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  GovLengthRange="10 40" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1" GovLength="10">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1" GovLength="0">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.115" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>ProfilesSupported in profile; is in GetVideoEncoderConfigurationOptions</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1" Profiles="Simple">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  ProfilesSupported="Simple High Baseline AdvancedSimple Extended" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1" Profile="High">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1" Profiles="Simple">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.116" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported and profile.Configurations.VideoEncoder.RateControl; no vecOptions.@ConstantBitRateSupported;  </Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
				
                <tt:RateControl ConstantBitRate="true">
                  <tt:FrameRateLimit>1.5</tt:FrameRateLimit>
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>

                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10.1 40 50" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
            <FrameRateLimit>10,1</FrameRateLimit>
            <BitrateLimit>100</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

		    <RateControl>
			<ConstantBitRateSpecified>True</ConstantBitRateSpecified>
			<FrameRateLimit>1,5</FrameRateLimit>
            <BitrateLimit>2048</BitrateLimit>
          </RateControl> 
		  
           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.117" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported  and profile.Configurations.VideoEncoder.RateControl; vecOptions.@ConstantBitRateSupported; ConstantBitRateSupported="true" </Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
				
                <tt:RateControl ConstantBitRate="true">
                  <tt:FrameRateLimit>1.5</tt:FrameRateLimit>
                  <tt:BitrateLimit>20</tt:BitrateLimit>
                </tt:RateControl>
				
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10 40 50" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
		   <ConstantBitRateSpecified>True</ConstantBitRateSpecified>
            <FrameRateLimit>10</FrameRateLimit>
            <BitrateLimit>20</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

		    <RateControl>
			<ConstantBitRateSpecified>True</ConstantBitRateSpecified>
			<FrameRateLimit>1,5</FrameRateLimit>
            <BitrateLimit>20</BitrateLimit>
          </RateControl> 
		  
           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.118" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>and profile.Configurations.VideoEncoder.RateControl; vecOptions.@ConstantBitRateSupported; ConstantBitRateSupported="true" </Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
				
                <tt:RateControl ConstantBitRate="true">
                  <tt:FrameRateLimit>1.5</tt:FrameRateLimit>
                  <tt:BitrateLimit>20</tt:BitrateLimit>
                </tt:RateControl>
				
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
		   <ConstantBitRateSpecified>True</ConstantBitRateSpecified>
            <FrameRateLimit>1,5</FrameRateLimit>
            <BitrateLimit>20</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>

		    <RateControl>
			<ConstantBitRateSpecified>True</ConstantBitRateSpecified>
			<FrameRateLimit>1,5</FrameRateLimit>
            <BitrateLimit>20</BitrateLimit>
          </RateControl> 
		  
           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>3</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>
		
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.119" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>no Multicast in profile;</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->

                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  GovLengthRange="10 40" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>

          </VideoEncoder2ConfigurationOptions>
        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

<!-- start -->
	
    <Step id="4">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1" GovLength="10">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->


          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="5">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->
	
    <Step id="6">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="VEC1">
          <Name>VideoEncConf1</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>401</Width>
            <Height>801</Height>
          </Resolution>


          <Quality>7</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

<!-- SetVideoEncoderConfiguration - data from GetVideoEncoderConfigurations-->
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.120" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>no GovLengthRange in Configuration; is in GetVideoEncoderConfigurationOptions</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  GovLengthRange="10 40" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC" GovLength="10">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC" GovLength="10">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.121" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>no ProfilesSupported in Configuration; is in GetVideoEncoderConfigurationOptions</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions   ProfilesSupported="Simple High Baseline AdvancedSimple Extended" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC" Profile="High">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC" Profiles="High">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.122" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported in GetVideoEncoderConfigurationOptions; no vecOptions.@ConstantBitRateSupported;</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10 40 50" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
            <FrameRateLimit>10</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.123" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported in GetVideoEncoderConfigurationOptions; vecOptions.@ConstantBitRateSupported; ConstantBitRateSupported="true"</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10 40 50" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
		   <ConstantBitRateSpecified>True</ConstantBitRateSpecified>
            <FrameRateLimit>10</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.124" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported in GetVideoEncoderConfigurationOptions; vecOptions.@ConstantBitRateSupported; ConstantBitRateSupported="false"</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.1</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10 40 50" ConstantBitRateSupported="false" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
		   <ConstantBitRateSpecified>False</ConstantBitRateSpecified>
            <FrameRateLimit>10</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.1</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.1</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.125" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>GovLengthRange in Configuration; is in GetVideoEncoderConfigurationOptions</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" GovLength="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  GovLengthRange="10 40" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC" GovLength="10">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC" GovLength="0">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC" GovLength="0">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.126" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>ProfilesSupported in Configuration; is in GetVideoEncoderConfigurationOptions</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" Profiles="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
<!--             <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl> -->
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions  ProfilesSupported="Simple High Baseline AdvancedSimple Extended" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC" Profile="High">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

<!--           <RateControl>
            <FrameRateLimit>0</FrameRateLimit>
            <BitrateLimit>0</BitrateLimit>
          </RateControl> -->

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC" Profile="High">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC" Profiles="Simple">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.127" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported and Configuration.RateControl; no vecOptions.@ConstantBitRateSupported;</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
                <tt:RateControl ConstantBitRate="true">
                  <tt:FrameRateLimit>1.5</tt:FrameRateLimit>
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10.1 40 50" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
            <FrameRateLimit>10,1</FrameRateLimit>
            <BitrateLimit>100</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <tt:RateControl>
                  <tt:FrameRateLimit>10.1</tt:FrameRateLimit>
                  <tt:BitrateLimit>100</tt:BitrateLimit>
                </tt:RateControl>
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>
            <RateControl>
			<ConstantBitRateSpecified>True</ConstantBitRateSpecified>
                  <FrameRateLimit>1,5</FrameRateLimit>
                  <BitrateLimit>2048</BitrateLimit>
            </RateControl>
           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.128" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>vecOptions.@FrameRatesSupported  and Configuration.RateControl; vecOptions.@ConstantBitRateSupported; ConstantBitRateSupported="true"</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
                <tt:RateControl ConstantBitRate="true">
                  <tt:FrameRateLimit>1.5</tt:FrameRateLimit>
                  <tt:BitrateLimit>20</tt:BitrateLimit>
                </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions FrameRatesSupported="30 20 10 40 50" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
		   <ConstantBitRateSpecified>True</ConstantBitRateSpecified>
            <FrameRateLimit>10</FrameRateLimit>
            <BitrateLimit>20</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>
                <tt:RateControl ConstantBitRate="true">
                  <tt:FrameRateLimit>10</tt:FrameRateLimit>
                  <tt:BitrateLimit>20</tt:BitrateLimit>
                </tt:RateControl>
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>
           <RateControl>
		   <ConstantBitRateSpecified>True</ConstantBitRateSpecified>
            <FrameRateLimit>1,5</FrameRateLimit>
            <BitrateLimit>20</BitrateLimit>
          </RateControl>
           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.129" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>and Configuration.RateControl; vecOptions.@ConstantBitRateSupported; ConstantBitRateSupported="true"</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>PASSED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  
          <VideoEncoder2Configuration token="NewVEC" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>402</tt:Width>
              <tt:Height>802</tt:Height>
            </tt:Resolution>            
                <tt:RateControl ConstantBitRate="true">
                  <tt:FrameRateLimit>1.5</tt:FrameRateLimit>
                  <tt:BitrateLimit>20</tt:BitrateLimit>
                </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>NewVEC</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H265</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id="7">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>NewVEC</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

<!-- start -->
	
    <Step id="8">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H265</Encoding>
          <Resolution>
            <Width>40</Width>
            <Height>80</Height>
          </Resolution>

           <RateControl>
		   <ConstantBitRateSpecified>True</ConstantBitRateSpecified>
            <FrameRateLimit>1,5</FrameRateLimit>
            <BitrateLimit>20</BitrateLimit>
          </RateControl> 

           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>0</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
	
    <Step id="9">
      <Command>Media210.GetStreamUri</Command>
      <Response>Normal</Response>
	  <!-- <Response>Fault</Response> -->
      <RequestParameters>
        <Protocol>RtspUnicast</Protocol>
        <!--see tr2:TransportProtocol-->
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <string>rtsp://192.168.10.230/rtsp_tunnel?h26x=4&amp;line=1&amp;inst=1&amp;enableaudio=1&amp;audio_mode=1</string>
      </ResponseParameters>
    </Step>
	
	<!-- restore -->

    <Step id="10">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
      <Token>media_profile1</Token>	  
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="NewVEC">
                <tt:Name>user0</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>40</tt:Width>
                  <tt:Height>80</tt:Height>
                </tt:Resolution>

				<tt:RateControl ConstantBitRate="true">
                  <tt:FrameRateLimit>1.5</tt:FrameRateLimit>
                  <tt:BitrateLimit>20</tt:BitrateLimit>
                </tt:RateControl>
				
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>5</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>0</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

   <Step id="11">
	<Command>Media210.AddConfiguration</Command>
		<Response>Normal</Response>
		<RequestParameters>
			<ProfileToken>media_profile1</ProfileToken>
			<Configuration>
				<Type>VideoEncoder</Type>
				<Token>VEC1</Token>
			</Configuration>
		</RequestParameters>
		<ResponseParameters>
			<AddConfigurationResponse>
			</AddConfigurationResponse>
		</ResponseParameters>
    </Step>	

    <Step id="12">
      <Command>Media210.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <VideoEncoder2Configuration token="NewVEC">
          <Name>user0</Name>
          <UseCount>1</UseCount>
          <Encoding>H264</Encoding>
          <Resolution>
            <Width>402</Width>
            <Height>802</Height>
          </Resolution>
           <RateControl>
		   <ConstantBitRateSpecified>True</ConstantBitRateSpecified>
            <FrameRateLimit>1,5</FrameRateLimit>
            <BitrateLimit>20</BitrateLimit>
          </RateControl>
           <Multicast>
                  <Address>
                    <Type>IPv4</Type>
                    <IPv4Address>0.0.0.0</IPv4Address>
                  </Address>
                  <Port>0</Port>
                  <TTL>5</TTL>
                  <AutoStart>False</AutoStart>
            </Multicast>
          <Quality>80</Quality>
          <!--You may enter ANY elements at this point-->
        </VideoEncoder2Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>

	</Test>





	
<!-- negative	 -->
	
  <Test ID = "TC.MEDIA2_RTSS-1-1-8.201" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>no profiles in GetProfiles</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
		
		
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>


	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.202" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>1 profile wo/VSC</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <!-- <VideoSource token="VSC1"> -->
                <!-- <tt:Name>VideoSourceConf1</tt:Name> -->
                <!-- <tt:UseCount>1</tt:UseCount> -->
                <!-- <tt:SourceToken>VS1</tt:SourceToken> -->
                <!-- <tt:Bounds height="1080" width="1920" y="1" x="1"> -->
                <!-- </tt:Bounds> -->
              <!-- </VideoSource> -->
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>


	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.203" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>1 profile wo/suitable options</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
        </ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

   <Step id ="4">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  

        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="5">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

	</Test>

  <Test ID = "TC.MEDIA2_RTSS-1-1-8.204" ONVIFTestID="MEDIA2_RTSS-1-1-8" Enabled="true">
    <TestName>MEDIA2 STREAMING – H.265 (RTP-Unicast/UDP, IPv4)</TestName>
    <Name>2 profiles: 1st wo/suitable options; 2nd w same VSC.token</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <ONVIFTestResult>FAILED</ONVIFTestResult>
      <TestSummary>

      </TestSummary>
    </ExpectedResult>
    <Step id="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceEvents10/EventService.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver20/media/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceMedia20/Media2Service.asmx</tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>

    <Step id="2">
      <Command>Media210.GetProfiles</Command>
      <Response>Normal</Response>
      <RequestParameters>
	    <Type>VideoSource</Type>
        <Type>VideoEncoder</Type>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfMediaProfile>
          <MediaProfile token="media_profile1">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
 
          <MediaProfile token="media_profile2">
            <Name xmlns="http://www.onvif.org/ver20/media/wsdl">media2_profile1</Name>
            <Configurations xmlns="http://www.onvif.org/ver20/media/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
              <VideoSource token="VSC1">
                <tt:Name>VideoSourceConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:SourceToken>VS1</tt:SourceToken>
                <tt:Bounds height="1080" width="1920" y="1" x="1">
                </tt:Bounds>
              </VideoSource>
              <VideoEncoder token="VEC1">
                <tt:Name>VideoEncConf1</tt:Name>
                <tt:UseCount>1</tt:UseCount>
                <tt:Encoding>H265</tt:Encoding>
                <tt:Resolution>
                  <tt:Width>401</tt:Width>
                  <tt:Height>801</tt:Height>
                </tt:Resolution>
                <!--<tt:RateControl>
                  <tt:FrameRateLimit>1</tt:FrameRateLimit>
                  -->
                <!--<tt:EncodingInterval>0</tt:EncodingInterval>-->
                <!--
                  <tt:BitrateLimit>2048</tt:BitrateLimit>
                </tt:RateControl>-->
                <!--<tt:H265>
                <tt:GovLength>32</tt:GovLength>
                <tt:H265Profile>Baseline</tt:H265Profile>
              </tt:H265>-->
                <tt:Multicast>
                  <tt:Address>
                    <tt:Type>IPv4</tt:Type>
                    <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
                  </tt:Address>
                  <tt:Port>0</tt:Port>
                  <tt:TTL>3</tt:TTL>
                  <tt:AutoStart>false</tt:AutoStart>
                </tt:Multicast>
                <tt:Quality>7</tt:Quality>
                <tt:SessionTimeout>PT0S</tt:SessionTimeout>
              </VideoEncoder>
            </Configurations>
          </MediaProfile>
 
		</ArrayOfMediaProfile>
      </ResponseParameters>
    </Step>

    <Step id="3">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

    <Step id="4">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile2</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>
	
   <Step id ="5">
      <Command>Media210.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <RequestParameters> 
<!--         <ConfigurationToken>VEC3</ConfigurationToken> -->
         <ProfileToken>media_profile1</ProfileToken> 
      </RequestParameters>
     
      <ResponseParameters>
        <ArrayOfVideoEncoder2Configuration>
          <VideoEncoder2Configuration token="VEC1" GovLength="10" Profile="Simple" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>1</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:Resolution>            
            <tt:RateControl>
              <tt:FrameRateLimit>30</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:Multicast>
              <tt:Address>

                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>

              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:Quality>80</tt:Quality>            
          </VideoEncoder2Configuration>
		  

        </ArrayOfVideoEncoder2Configuration>
      </ResponseParameters>
    </Step>

    <Step id="6">
      <Command>Media210.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>VEC1</ConfigurationToken>
        <ProfileToken>media_profile1</ProfileToken>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfVideoEncoder2ConfigurationOptions>
          <VideoEncoder2ConfigurationOptions GovLengthRange="10 20" FrameRatesSupported="30" ProfilesSupported="Simple" ConstantBitRateSupported="true" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Encoding>H264</tt:Encoding>
            <tt:QualityRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:QualityRange>
            <tt:ResolutionsAvailable>
              <tt:Width>40</tt:Width>
              <tt:Height>80</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:BitrateRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:BitrateRange>
          </VideoEncoder2ConfigurationOptions>

        </ArrayOfVideoEncoder2ConfigurationOptions>
      </ResponseParameters>
    </Step>

	</Test>

	
	</TestSuit>
