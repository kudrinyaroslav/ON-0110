<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</Name>
    <Description>
    </Description>
  </Parameters>
  <Test ID = "TC.EVENT-3-1-15.00" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>No Topics in GetEventProperties</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Wrong response:
      (No MessageDescription element with IsProperty attribute set to "true").
    </Description>
    <ExpectedResult>
      <TestSummary>
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        The DUT provides no topics. Test passed.
        TEST PASSED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.01" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Wrong response: No MessageDescription element with IsProperty attribute set to "true"</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Wrong response:
      (No MessageDescription element with IsProperty attribute set to "true").

      Check window appearing.
      Press Cancel.
    </Description>
    <ExpectedResult>
      <TestSummary>
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        Timeout of 60 seconds will be used

        STEP 3 - Check if test should be continued
        Operator cancelled the test
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.02" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Wrong response: TerminationTime less than CurrentTime for PullMessage</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return wrong response (TerminationTime less than CurrentTime for PullMessage).

      Set 20S on Management tab.
    </Description>
    <ExpectedResult>
      <TestSummary>
        <![CDATA[
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   Timeout of 20 seconds will be used
   
   STEP 3 - Create Pull Point Subsciption
      Transmit done
      Receive done
   STEP PASSED

   STEP 4 - Check that TerminationTime is specified
   STEP PASSED

   STEP 5 - Validate times
   STEP PASSED

   STEP 6 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 7 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 8 - Check that URL specified is valid
   STEP PASSED

   STEP 9 - Send PullMessages request
      Transmit done
      Waiting for PullMessagesResponse message 
   STEP PASSED

   STEP 10 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 11 - Get PullMessages response
      Receive done
   STEP PASSED

   STEP 12 - Validate CurrentTime and TerminationTime
      TerminationTime <= CurrentTime
   STEP FAILED

   STEP 13 - Delete Subscription Manager
      Send unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST FAILED
        ]]>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">0</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics" xmlns:tnsaxis="http://www.axis.com/2009/event/topics">tns1:Device/tnsaxis:IO/Port</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics" xmlns:tnsaxis="http://www.axis.com/2009/event/topics">tns1:Device/tnsaxis:IO/Port</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.10" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Wrong response: more than 2 message in response</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return wrong response (more than 2 message in response).
    </Description>
    <ExpectedResult>
      <TestSummary>
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        Timeout of 20 seconds will be used

        STEP 3 - Create Pull Point Subsciption
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Check that TerminationTime is specified
        STEP PASSED

        STEP 5 - Validate times
        STEP PASSED

        STEP 6 - Check if the DUT returned SubscriptionReference
        STEP PASSED

        STEP 7 - Check if SubscriptionReference contains address
        STEP PASSED

        STEP 8 - Check that URL specified is valid
        STEP PASSED

        STEP 9 - Send PullMessages request
        Transmit done
        Waiting for PullMessagesResponse message
        STEP PASSED

        STEP 10 - Set Synchronization Point
        Transmit done
        Receive done
        STEP PASSED

        STEP 11 - Get PullMessages response
        Receive done
        STEP PASSED

        STEP 12 - Validate CurrentTime and TerminationTime
        STEP PASSED

        STEP 13 - Check that DUT sent notification messages
        STEP PASSED

        STEP 14 - Check that a maximum number of 2 Notification Messages is included in PullMessagesResponse
        Maximum number of messages exceeded
        STEP FAILED

        STEP 15 - Delete Subscription Manager
        Send unsubscribe request
        Transmit done
        Receive done
        STEP PASSED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">15</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.11" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Empty TopicSet on GetProperties</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Empty TopicSet on GetProperties.
    </Description>
    <ExpectedResult>
      <TestSummary>
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        The DUT provides no topics. Test passed.
        TEST PASSED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType/>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.12" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Wrong response: empty NotificationMessage (invalid response)</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return wrong response (empty NotificationMessage).
    </Description>
    <ExpectedResult>
      <TestSummary>
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        Timeout of 20 seconds will be used

        STEP 3 - Create Pull Point Subsciption
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Check that TerminationTime is specified
        STEP PASSED

        STEP 5 - Validate times
        STEP PASSED

        STEP 6 - Check if the DUT returned SubscriptionReference
        STEP PASSED

        STEP 7 - Check if SubscriptionReference contains address
        STEP PASSED

        STEP 8 - Check that URL specified is valid
        STEP PASSED

        STEP 9 - Send PullMessages request
        Transmit done
        Waiting for PullMessagesResponse message
        STEP PASSED

        STEP 10 - Set Synchronization Point
        Transmit done
        Receive done
        STEP PASSED

        STEP 11 - Get PullMessages response
        Receive done
        The element 'NotificationMessage' in namespace 'http://docs.oasis-open.org/wsn/b-2' has incomplete content. List of possible elements expected: 'SubscriptionReference, Topic, ProducerReference, Message' in namespace 'http://docs.oasis-open.org/wsn/b-2'.
        STEP FAILED

        STEP 12 - Delete Subscription Manager
        Send unsubscribe request
        Transmit done
        Receive done
        STEP PASSED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">15</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType/>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.13" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Wrong response: empty NotificationMessage</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return wrong response (empty NotificationMessage).
    </Description>
    <ExpectedResult>
      <TestSummary>
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        Timeout of 20 seconds will be used

        STEP 3 - Create Pull Point Subsciption
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Check that TerminationTime is specified
        STEP PASSED

        STEP 5 - Validate times
        STEP PASSED

        STEP 6 - Check if the DUT returned SubscriptionReference
        STEP PASSED

        STEP 7 - Check if SubscriptionReference contains address
        STEP PASSED

        STEP 8 - Check that URL specified is valid
        STEP PASSED

        STEP 9 - Send PullMessages request
        Transmit done
        Waiting for PullMessagesResponse message
        STEP PASSED

        STEP 10 - Set Synchronization Point
        Transmit done
        Receive done
        STEP PASSED

        STEP 11 - Get PullMessages response
        Receive done
        STEP PASSED

        STEP 12 - Validate CurrentTime and TerminationTime
        STEP PASSED

        STEP 13 - Check that DUT sent notification messages
        No notification messages received
        STEP FAILED

        STEP 14 - Delete Subscription Manager
        Send unsubscribe request
        Transmit done
        Receive done
        STEP PASSED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">15</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.14" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Bug 4896</Name>
    <Description>
      Bug 4896.
    </Description>
    <ExpectedResult>
      <TestSummary>
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        The element 'GetEventPropertiesResponse' in namespace 'http://www.onvif.org/ver10/events/wsdl' has incomplete content. List of possible elements expected: 'TopicExpressionDialect' in namespace 'http://docs.oasis-open.org/wsn/b-2'.
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"/>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.17" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>CR49</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
        <![CDATA[
        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

   STEP 1 - Get Event service address
      Transmit done
      Receive done
   STEP PASSED

   STEP 2 - Get Event Properties
      Transmit done
      Receive done
   STEP PASSED

   Timeout of 20 seconds will be used
   
   STEP 3 - Create Pull Point Subsciption
      Transmit done
      Receive done
   STEP PASSED

   STEP 4 - Check that TerminationTime is specified
   STEP PASSED

   STEP 5 - Validate times
   STEP PASSED

   STEP 6 - Check if the DUT returned SubscriptionReference
   STEP PASSED

   STEP 7 - Check if SubscriptionReference contains address
   STEP PASSED

   STEP 8 - Check that URL specified is valid
   STEP PASSED

   STEP 9 - Send PullMessages request
      Transmit done
      Waiting for PullMessagesResponse message 
   STEP PASSED

   STEP 10 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 11 - Get PullMessages response
      Receive done
      Exception of type FaultException<PullMessagesFaultResponseType> received. Try to pull messages with new parameters
   STEP PASSED

   STEP 12 - Check if correct paramters are specified in fault
   STEP PASSED

   STEP 13 - Send PullMessages request
      Transmit done
      Waiting for PullMessagesResponse message 
   STEP PASSED

   STEP 14 - Set Synchronization Point
      Transmit done
      Receive done
   STEP PASSED

   STEP 15 - Get PullMessages response
      Receive done
   STEP PASSED

   STEP 16 - Validate CurrentTime and TerminationTime
   STEP PASSED

   STEP 17 - Check that DUT sent notification messages
   STEP PASSED

   STEP 18 - Check that a maximum number of 1 Notification Messages is included in PullMessagesResponse
   STEP PASSED

   STEP 19 - Validate messages
      Topic tns1:RuleEngine/LineDetector/Crossed is incorrect: namespace prefix  not defined
   STEP FAILED

   STEP 20 - Delete Subscription Manager
      Send unsubscribe request
      Transmit done
      Receive done
   STEP PASSED

TEST FAILED
        ]]>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <Details>
        <soap:Detail xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
          <PullMessagesFaultResponse xmlns="http://www.onvif.org/ver10/events/wsdl">
            <MaxTimeout>P396DT1H1M1S</MaxTimeout>
            <MaxMessageLimit>1</MaxMessageLimit>
          </PullMessagesFaultResponse>
        </soap:Detail>
      </Details>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>P396DT1H1M1S</Timeout>
        <MessageLimit>1</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="8">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.18" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Hikvision: 10501</Name>
    <Description>
      From: yuxh [mailto:yuxh@hikvision.com]
      Sent: den 10 februari 2011 10:15
      To: Baldvin Gislason Bern; Evgeny Verzilov
      Subject: Re: [onvif_tsc_wgtesttool] First alpha (v.1.02.3.1)

      Termination timeout: 60s
      In DUT code in PullpointSubscriptionService.asmx for PullMessages
      uncomment string for XmlReplySubstituteExtension marked for this bug.

      Note: Don't forget comment it again
    </Description>
    <ExpectedResult>
      <TestSummary>
        No internal exception.

        EVENT-3-1-15 REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES

        STEP 1 - Get Event service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Get Event Properties
        Transmit done
        Receive done
        STEP PASSED

        Timeout of 60 seconds will be used

        STEP 3 - Create Pull Point Subsciption
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Check that TerminationTime is specified
        STEP PASSED

        STEP 5 - Validate times
        STEP PASSED

        STEP 6 - Check if the DUT returned SubscriptionReference
        STEP PASSED

        STEP 7 - Check if SubscriptionReference contains address
        STEP PASSED

        STEP 8 - Check that URL specified is valid
        STEP PASSED

        STEP 9 - Send PullMessages request
        Transmit done
        Waiting for PullMessagesResponse message
        STEP PASSED

        STEP 10 - Set Synchronization Point
        Transmit done
        Receive done
        STEP PASSED

        STEP 11 - Get PullMessages response
        Receive done
        STEP PASSED

        STEP 12 - Validate CurrentTime and TerminationTime
        STEP PASSED

        STEP 13 - Check that DUT sent notification messages
        STEP PASSED

        STEP 14 - Check that a maximum number of 2 Notification Messages is included in PullMessagesResponse
        STEP PASSED

        STEP 15 - Validate messages
        STEP PASSED

        STEP 16 - Delete Subscription Manager
        Send unsubscribe request
        Transmit done
        Receive done
        STEP PASSED

        TEST PASSED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://172.6.97.101/onvif/Events</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>true</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>true</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:MediaControl wstop:topic="true">
            <tns1:VideoSourceConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceConfigurationToken" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="Config" Type="tt:VideoSourceConfiguration"/>
                </tt:Data>
              </tt:MessageDescription>
            </tns1:VideoSourceConfiguration>
            <tns1:AudioSourceConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="AudioSourceConfigurationToken" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="Config" Type="tt:AudioSourceConfiguration"/>
                </tt:Data>
              </tt:MessageDescription>
            </tns1:AudioSourceConfiguration>
            <tns1:VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="Config" Type="tt:VideoEncoderConfiguration"/>
                </tt:Data>
              </tt:MessageDescription>
            </tns1:VideoEncoderConfiguration>
            <tns1:AudioEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="AudioEncoderConfigurationToken" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="Config" Type="tt:AudioEncoderConfiguration"/>
                </tt:Data>
              </tt:MessageDescription>
            </tns1:AudioEncoderConfiguration>
            <tns1:VideoAnalyticsConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoAnalyticsConfigurationToken" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="Config" Type="tt:VideoAnalyticsConfiguration"/>
                </tt:Data>
              </tt:MessageDescription>
            </tns1:VideoAnalyticsConfiguration>
            <tns1:PTZConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="PTZConfigurationToken" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="Config" Type="tt:PTZConfiguration"/>
                </tt:Data>
              </tt:MessageDescription>
            </tns1:PTZConfiguration>
            <tns1:MetaDataConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="MetaDataConfigurationToken" Type="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="Config" Type="tt:MetaDataConfiguration"/>
                </tt:Data>
              </tt:MessageDescription>
            </tns1:MetaDataConfiguration>
          </tns1:MediaControl>
          <tns1:PTZController wstop:topic="true">
            <tns1:PTZPresets wstop:topic="true">
              <tns1:Invoked wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItemDescription Name="PTZConfigurationToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="PresetToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="PresetName" Type="tt:Name"/>
                  </tt:Data>
                </tt:MessageDescription>
              </tns1:Invoked>
              <tns1:Reached wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItemDescription Name="PTZConfigurationToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="PresetToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="PresetName" Type="tt:Name"/>
                  </tt:Data>
                </tt:MessageDescription>
              </tns1:Reached>
              <tns1:Left wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItemDescription Name="PTZConfigurationToken" Type="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="PresetToken" Type="tt:ReferenceToken"/>
                    <tt:SimpleItemDescription Name="PresetName" Type="tt:Name"/>
                  </tt:Data>
                </tt:MessageDescription>
              </tns1:Left>
            </tns1:PTZPresets>
          </tns1:PTZController>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT60S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://172.6.97.101/onvif/PullSubManager_2012-12-16T16:36:31Z_0</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:trt="http://www.onvif.org/ver10/media/wsdl">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:MediaControl/VideoSourceConfiguration</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-16T16:36:31Z" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="VideoSourceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:ElementItem Name="Config">
                    <trt:Configuration token="VideoSourceToken">
                      <tt:Name>VideoSourceConfig</tt:Name>
                      <tt:UseCount>0</tt:UseCount>
                      <tt:SourceToken>VideoSource_1</tt:SourceToken>
                      <tt:Bounds x="0" y="0" width="2560" height="1920"></tt:Bounds>
                    </trt:Configuration>
                  </tt:ElementItem>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:MediaControl/VideoEncoderConfiguration</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2012-12-16T16:36:31Z" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoEncoderConfigurationToken" Value="VideoEncoderToken_1"/>
                </tt:Source>
                <tt:Data>
                  <tt:ElementItem Name="Config">
                    <trt:Configuration token="VideoEncoderToken_1">
                      <tt:Name>VideoEncoder_1</tt:Name>
                      <tt:UseCount>0</tt:UseCount>
                      <tt:Encoding>H264</tt:Encoding>
                      <tt:Resolution>
                        <tt:Width>1920</tt:Width>
                        <tt:Height>1080</tt:Height>
                      </tt:Resolution>
                      <tt:Quality>0.000000</tt:Quality>
                      <tt:RateControl>
                        <tt:FrameRateLimit>0</tt:FrameRateLimit>
                        <tt:EncodingInterval>25</tt:EncodingInterval>
                        <tt:BitrateLimit>8192</tt:BitrateLimit>
                      </tt:RateControl>
                      <tt:H264>
                        <tt:GovLength>25</tt:GovLength>
                        <tt:H264Profile>Baseline</tt:H264Profile>
                      </tt:H264>
                      <tt:Multicast>
                        <tt:Address>
                          <tt:Type>IPv4</tt:Type>
                          <tt:IPv4Address >224.1.2.3</tt:IPv4Address >
                        </tt:Address>
                        <tt:Port>8600</tt:Port>
                        <tt:TTL>1</tt:TTL>
                        <tt:AutoStart>true</tt:AutoStart>
                      </tt:Multicast>
                      <tt:SessionTimeout>PT10S</tt:SessionTimeout>
                    </trt:Configuration>
                  </tt:ElementItem>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>



  <!--Depricated-->
  <!--<Test ID = "TC.EVENT-3-1-15.16" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Correct response: TerminationTime less than CurrentTime + 20, but greater than CurrentTime for PullMessage</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return correct response (TerminationTime less than CurrentTime + 20,
      but greater than CurrentTime for PullMessage).
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">1</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics" xmlns:tnsaxis="http://www.axis.com/2009/event/topics">tns1:Device/tnsaxis:IO/Port</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics" xmlns:tnsaxis="http://www.axis.com/2009/event/topics">tns1:Device/tnsaxis:IO/Port</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.15" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Bug 5604</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Correct response.
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:MediaConfiguration wstop:topic="true">
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile"/>
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration"/>
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
          <tns1:VideoSource wstop:topic="true">
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Value="tt:ReferenceToken"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean"/>
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <Trigger wstop:topic="true">
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Value="tt:ReferenceToken"/>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Value="tt:RelayLogicalState"/>
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
            </Trigger>
          </tns1:Device>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Details>
        <soap:Detail xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
          <PullMessagesFaultResponse xmlns="http://www.onvif.org/ver10/events/wsdl">
            <MaxTimeout>P396DT1H1M1S</MaxTimeout>
            <MaxMessageLimit>1</MaxMessageLimit>
          </PullMessagesFaultResponse>
        </soap:Detail>
      </Details>
      <RequestParameters>
        <Timeout>PT24H</Timeout>
        <MessageLimit>2000</MessageLimit>
      </RequestParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.07" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Wrong response: notification that represents a property with wrong PropertyOperation="Deleted"</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Wrong response: notification that represents a property with wrong PropertyOperation="Deleted".
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321"  PropertyOperation="Deleted">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.08" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Correct response: PropertyOperation="Chenged"</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Correct response (PropertyOperation="Chenged").
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Details>
        <soap:Detail xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
          <PullMessagesFaultResponse xmlns="http://www.onvif.org/ver10/events/wsdl">
            <MaxTimeout>P396DT1H1M1S</MaxTimeout>
            <MaxMessageLimit>1</MaxMessageLimit>
          </PullMessagesFaultResponse>
        </soap:Detail>
      </Details>
      <RequestParameters>
        <Timeout>PT24H</Timeout>
        <MessageLimit>2000</MessageLimit>
      </RequestParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.06" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Wrong response: no notification that represents a property</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Wrong response: no notification that represents a property.
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.05" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Wrong response: TerminationTime less than CurrentTime + 20</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return wrong response
      (TerminationTime less than CurrentTime + 20).
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">1</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Details>
        <soap:Detail xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
          <PullMessagesFaultResponse xmlns="http://www.onvif.org/ver10/events/wsdl">
            <MaxTimeout>P396DT1H1M1S</MaxTimeout>
            <MaxMessageLimit>1</MaxMessageLimit>
          </PullMessagesFaultResponse>
        </soap:Detail>
      </Details>
      <RequestParameters>
        <Timeout>PT24H</Timeout>
        <MessageLimit>2000</MessageLimit>
      </RequestParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.04" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Correct response: wrong fault without details on second PullMessage</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Correct response (wrong fault without details on second PullMessage).
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <RequestParameters>
        <Timeout>PT24H</Timeout>
        <MessageLimit>2000</MessageLimit>
      </RequestParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.03" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Correct response: only second notification that represents a property</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Correct response (only second notification that represents a property).
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>false</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource wstop:topic="true">
            <tnsaxis:Tampering wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="tampering" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:Tampering>
          </tns1:VideoSource>
          <tns1:Device wstop:topic="true">
            <tnsaxis:IO wstop:topic="true">
              <VirtualPort wstop:topic="true">
                <tt:MessageDescription>
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </VirtualPort>
              <Port wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItem Name="port" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItem Name="state" Type="xsd:int">
                    </tt:SimpleItem>
                  </tt:Data>
                </tt:MessageDescription>
              </Port>
            </tnsaxis:IO>
          </tns1:Device>
          <tns1:VideoAnalytics wstop:topic="true">
            <tnsaxis:MotionDetection wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="window" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="motion" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:MotionDetection>
          </tns1:VideoAnalytics>
          <tns1:AudioSource wstop:topic="true">
            <tnsaxis:TriggerLevel wstop:topic="true">
              <tt:MessageDescription>
                <tt:Source>
                  <tt:SimpleItem Name="channel" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="triggered" Type="xsd:int">
                  </tt:SimpleItem>
                </tt:Data>
              </tt:MessageDescription>
            </tnsaxis:TriggerLevel>
          </tns1:AudioSource>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:1305/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">20</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters>
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema">
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
    </Step>
    <Step id ="6">
      <Command>PMSPullMessages</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <RequestParameters>
        <Timeout>PT24H</Timeout>
        <MessageLimit>2000</MessageLimit>
      </RequestParameters>
    </Step>
    <Step id ="7">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.EVENT-3-1-15.02" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Correct response</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES test
      when DUT return Correct response.

      Set timeout 20S on Management tab.
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:11569/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xs:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xs:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>
          <tns1:MediaConfiguration>
            <Profile wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="ProfileToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:Profile" />
                </tt:Data>
              </tt:MessageDescription>
            </Profile>
            <VideoEncoderConfiguration wstop:topic="true">
              <tt:MessageDescription IsProperty="false">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoEncoderConfigurationToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:ElementItemDescription Name="Config" Type="tt:VideoEncoderConfiguration" />
                </tt:Data>
              </tt:MessageDescription>
            </VideoEncoderConfiguration>
          </tns1:MediaConfiguration>
        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      <ResponseParameters special="2">
        <EndpointReferenceType xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>http://localhost:11569/SubscriptionManagerService.asmx</wsa:Address>
          <wsa:ReferenceParameters/>
          <wsa:Metadata/>
        </EndpointReferenceType>
      </ResponseParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
    </Step>
    <Step id ="4">
      <Command>PMSPullMessages</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Timeout>PT20S</Timeout>
        <MessageLimit>2</MessageLimit>
      </RequestParameters>
      <ResponseParametersAdditional>
        <CurrentTime type="now"></CurrentTime>
        <TerminationTime differance="true">60</TerminationTime>
      </ResponseParametersAdditional>
      <ResponseParameters xmlns:tns1="http://www.onvif.org/ver10/topics">
        <ArrayOfNotificationMessageHolderType xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:tt="http://www.onvif.org/ver10/schema" xmlns:tns1="http://www.onvif.org/ver10/topics">
          <NotificationMessageHolderType xmlns:tns1="http://www.onvif.org/ver10/topics">
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.321" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence1" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="15" />
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
          <NotificationMessageHolderType>
            <wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet" xmlns:tns1="http://www.onvif.org/ver10/topics">RuleEngine/LineDetector/Crossed</wsnt:Topic>
            <wsnt:Message>
              <tt:Message UtcTime="2008-10-10T12:24:57.789" PropertyOperation="Initialized">
                <tt:Source>
                  <tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/>
                  <tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="2"/>
                  <tt:SimpleItem Value="MyImportantFence2" Name="Rule"/>
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItem Name="ObjectId" Value="19"/>
                </tt:Data>
              </tt:Message>
            </wsnt:Message>
          </NotificationMessageHolderType>
        </ArrayOfNotificationMessageHolderType>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>PMSSetSynchronizationPoint</Command>
      <Response>Normal</Response>
      <Notification address="http://192.168.10.68:8080/onvif_notify_server/">
        <![CDATA[<?xml version="1.0" encoding="utf-8"?>
<Envelope
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Body>
    <Notify
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns="http://docs.oasis-open.org/wsn/b-2"
      xmlns:tns1="http://www.onvif.org/ver10/topics">
      <NotificationMessage xmlns="http://docs.oasis-open.org/wsn/b-2">
        <SubscriptionReference>
          <Address xmlns="http://www.w3.org/2005/08/addressing">http://192.168.10.68</Address>
          <ReferenceParameters xmlns="http://www.w3.org/2005/08/addressing" />
          <Metadata xmlns="http://www.w3.org/2005/08/addressing" />
        </SubscriptionReference>
        <Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet">tns1:Device</Topic>
        <Message xmlns="http://docs.oasis-open.org/wsn/b-2" >
          <Message xmlns="http://www.onvif.org/ver10/schema" UtcTime="2008-10-10T12:24:57.321">
            <Source xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoSourceConfigurationToken" Value="1"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="VideoAnalyticsConfigurationToken" Value="2"/>
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Value="MyImportantFence1" Name="Rule"/>
            </Source>
            <Data xmlns="http://www.onvif.org/ver10/schema">
              <SimpleItem xmlns="http://www.onvif.org/ver10/schema" Name="ObjectId" Value="15" />
            </Data>
          </Message>
        </Message>
      </NotificationMessage>
    </Notify>
  </Body>
</Envelope>]]>
      </Notification>
    </Step>
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>-->

  <Test ID = "TC.EVENT-3-1-15.19" ONVIFTestID="EVENT-3-1-15" Enabled="true">
    <TestName>REALTIME PULLPOINT SUBSCRIPTION - PULLMESSAGES</TestName>
    <Name>Correct response: fault to CPPS</Name>
    <Description>
      Check REALTIME PULLPOINT SUBSCRIPTION all tests
      when DUT sends fault to CreatePullPointSubscription requies.
      Tests shall be passed:

      9.2.1 - 9.2.6 Tests should be treated as Passed
      in case when device sends any SOAP fault in response
      to Subscribe (except FaultException)
    </Description>
    <ExpectedResult>
      <TestSummary>
    
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Events</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Events>
            <tt:XAddr>http://localhost:1305/EventService.asmx</tt:XAddr>
            <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>
            <tt:WSPullPointSupport>false</tt:WSPullPointSupport>
            <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>
          </tt:Events>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>GetEventProperties</Command>
      <Response>Normal</Response>
      <ResponseParameters name="TopicNamespaceLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/onvif/ver10/topics/topicns.xml</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="FixedTopicSet">
        <boolean>true</boolean>
      </ResponseParameters>
      <ResponseParameters name="TopicSet">
        <TopicSetType xmlns:tns1="http://www.onvif.org/ver10/topics"
                      xmlns:tnsaxis="http://www.axis.com/2009/event/topics"
                      xmlns:tt="http://www.onvif.org/ver10/schema"
                      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
          <tns1:VideoSource>
            <SignalLoss wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalLoss>
            <SignalTooBlurry wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBlurry>
            <SignalTooNoisy wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooNoisy>
            <SignalTooDark wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooDark>
            <SignalTooBright wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </SignalTooBright>
            <CameraRedirected wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </CameraRedirected>
            <MotionAlarm wstop:topic="true">
              <tt:MessageDescription IsProperty="true">
                <tt:Source>
                  <tt:SimpleItemDescription Name="VideoSourceToken" Type="tt:ReferenceToken" />
                </tt:Source>
                <tt:Data>
                  <tt:SimpleItemDescription Name="State" Type="xsd:boolean" />
                </tt:Data>
              </tt:MessageDescription>
            </MotionAlarm>
          </tns1:VideoSource>
          <tns1:Device>
            <Trigger>
              <Relay wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="RelayToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="tt:RelayLogicalState" />
                  </tt:Data>
                </tt:MessageDescription>
              </Relay>
              <DigitalInput wstop:topic="true">
                <tt:MessageDescription IsProperty="true">
                  <tt:Source>
                    <tt:SimpleItemDescription Name="InputToken" Type="tt:ReferenceToken" />
                  </tt:Source>
                  <tt:Data>
                    <tt:SimpleItemDescription Name="LogicalState" Type="xsd:boolean" />
                  </tt:Data>
                </tt:MessageDescription>
              </DigitalInput>
            </Trigger>
          </tns1:Device>

        </TopicSetType>
      </ResponseParameters>
      <ResponseParameters name="TopicExpressionDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet</string>
          <string>http://docs.oasis-open.org/wsn/t-1/TopicExpression/Concrete</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentFilterDialect">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/tev/messageContentFilter/ItemFilter</string>
        </ArrayOfString>
      </ResponseParameters>
      <ResponseParameters name="MessageContentSchemaLocation">
        <ArrayOfString>
          <string>http://www.onvif.org/ver10/schema/onvif.xsd</string>
        </ArrayOfString>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>CreatePullPointSubscription</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>InvalidIPv6Address</Subcode>
      <RequestParameters>
        <InitialTerminationTime>PT20S</InitialTerminationTime>
      </RequestParameters>
      
      
    </Step>
    
    
    <Step id ="6">
      <Command>SMSUnsubscribe</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
</TestSuit>
