<?xml version="1.0" encoding="utf-8"?>
<TestSuit Name="Device Managment" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</Name>
    <Description>
      Media service must be: http://localhost:11569/MediaService.asmx
    </Description>
  </Parameters>
  <Test ID = "TC.MS.2.1.4.01" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Correct response</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when all responses are correct
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:3246/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 665
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 600
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 14 - SetVideoEncoderConfiguration (use average values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 15
        Width = 800
        Height = 600
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 15 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 16 - Check that the DUT accepted values passed
        STEP PASSED

        TEST PASSED

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
          <Configuration token="0">
            <Name>user0</Name>
            <UseCount>0</UseCount>
            <Encoding>MPEG4</Encoding>
            <Resolution>
              <Height>801</Height>
              <Width>1280</Width>
            </Resolution>
            <Quality>100</Quality>
            <RateControl>
              <FrameRateLimit>1</FrameRateLimit>
              <EncodingInterval>0</EncodingInterval>
              <BitrateLimit>0</BitrateLimit>
            </RateControl>
            <MPEG4>
              <GovLength>16</GovLength>
              <MPEG4Profile>SP</MPEG4Profile>
            </MPEG4>
            <Multicast>
              <Address>
                <Type>IPv4</Type>
                <IPv4Address>0.0.0.0</IPv4Address>
              </Address>
              <Port>0</Port>
              <TTL>5</TTL>
              <AutoStart>False</AutoStart>
            </Multicast>
            <SessionTimeout>PT61S</SessionTimeout>
          </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
          <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
            <tt:Name>0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:Resolution>
            <tt:Quality>0</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>1</tt:FrameRateLimit>
              <tt:EncodingInterval>100</tt:EncodingInterval>
              <tt:BitrateLimit>64000</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT60S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>800</Height>
            <Width>600</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>800</tt:Width>
            <tt:Height>600</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.02" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>No fault on the first SetVideoEncoderConfiguration</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when there is no fault on SetVideoEncoderConfiguration with incorrect resolution
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:11569/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        "Sender/InvalidArgVal/ConfigModify" fault is expected, but no SOAP fault returned
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
        
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.03" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Incorrect fault on the first SetVideoEncoderConfiguration</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when there is incorrect fault on SetVideoEncoderConfiguration with incorrect resolution
    </Description>
    <ExpectedResult>
      <TestSummary>
        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgValue
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 654
        WARNING: The SOAP FAULT returned from the DUT is not as expected: fault subcodes sequence is incorrect. Expected: env:Sender/ter:InvalidArgVal/ter:ConfigModify, actual: env:Sender/ter:InvalidArgValue
        STEP PASSED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgValue</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>

      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>800</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>30</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>720</tt:Width>
            <tt:Height>576</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.04" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>There is no MPEG4 in ConfigurationOptions</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when there is no MPEG4 in ConfigurationOptions
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:11569/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        No video encoder with MPEG4 encoding support
        STEP FAILED

        TEST FAILED

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.05" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Wrong response after the max Set(wrong encoder)</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when there is wrong encoder after the "max" set
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:11569/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 654
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 450
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        Encoding incorrect: expected MPEG4, actual H264
        STEP FAILED

        TEST FAILED

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>H264</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.06" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Correct response: there is no Config with MPEG4, but there is MPEG4 in options</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when there is wrong encoder after the "max" set
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:3246/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [0]
        Transmit done
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 665
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =720, height = 576
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = 0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = 0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 14 - SetVideoEncoderConfiguration (use average values)
        Configuration token = 0
        Configuration name = 0
        Configuration encoding = MPEG4
        Frame rate = 15
        Width = 720
        Height = 576
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 15 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 16 - Check that the DUT accepted values passed
        STEP PASSED

        TEST PASSED

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="0">
            <tt:Name>0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
        </tt:QualityRange>
        <tt:H264>
          <tt:ResolutionsAvailable>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:ResolutionsAvailable>
            <tt:Width>1280</tt:Width>
            <tt:Height>720</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:ResolutionsAvailable>
            <tt:Width>1024</tt:Width>
            <tt:Height>768</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:ResolutionsAvailable>
            <tt:Width>1024</tt:Width>
            <tt:Height>640</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:ResolutionsAvailable>
            <tt:Width>800</tt:Width>
            <tt:Height>600</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:ResolutionsAvailable>
            <tt:Width>800</tt:Width>
            <tt:Height>500</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:ResolutionsAvailable>
            <tt:Width>800</tt:Width>
            <tt:Height>450</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:ResolutionsAvailable>
            <tt:Width>768</tt:Width>
            <tt:Height>576</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:ResolutionsAvailable>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:ResolutionsAvailable>
          <tt:GovLengthRange>
            <tt:Min>1</tt:Min>
            <tt:Max>32767</tt:Max>
          </tt:GovLengthRange>
          <tt:FrameRateRange>
            <tt:Min>1</tt:Min>
            <tt:Max>30</tt:Max>
          </tt:FrameRateRange>
          <tt:EncodingIntervalRange>
            <tt:Min>0</tt:Min>
            <tt:Max>0</tt:Max>
          </tt:EncodingIntervalRange>
          <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
        </tt:H264>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>720</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>100</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>720</tt:Width>
            <tt:Height>576</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.07" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Wrong response - incorrect resolution after max Set</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:3246/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 665
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 600
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        Resolution incorrect. Expected: width=1280, height=800, actual: width=1280, height=720
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>720</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>JPEG</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>720</tt:Width>
            <tt:Height>576</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.08" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Correct response - incorrect RateControl and Quality values after max set</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when all responses are correct and there is incorrect RateControl and Quality values after max set
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:3246/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 665
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 600
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 14 - SetVideoEncoderConfiguration (use average values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 15
        Width = 800
        Height = 600
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 15 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 16 - Check that the DUT accepted values passed
        STEP PASSED

        TEST PASSED

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>10</tt:EncodingInterval>
            <tt:BitrateLimit>64</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>800</tt:Width>
            <tt:Height>600</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.09" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Wrong response after the min Set(wrong encoder)</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when there is wrong encoder after the "min" set
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:11569/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 654
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 450
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        Encoding incorrect: expected MPEG4, actual H264
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
          <Configuration token="0">
            <Name>user0</Name>
            <UseCount>0</UseCount>
            <Encoding>MPEG4</Encoding>
            <Resolution>
              <Height>50</Height>
              <Width>80</Width>
            </Resolution>
            <Quality>0</Quality>
            <RateControl>
              <FrameRateLimit>1</FrameRateLimit>
              <EncodingInterval>100</EncodingInterval>
              <BitrateLimit>64000</BitrateLimit>
            </RateControl>
            <MPEG4>
              <GovLength>16</GovLength>
              <MPEG4Profile>SP</MPEG4Profile>
            </MPEG4>
            <Multicast>
              <Address>
                <Type>IPv4</Type>
                <IPv4Address>0.0.0.0</IPv4Address>
              </Address>
              <Port>0</Port>
              <TTL>5</TTL>
              <AutoStart>False</AutoStart>
            </Multicast>
            <SessionTimeout>PT61S</SessionTimeout>
          </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>H264</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.10" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Wrong response - incorrect resolution after min Set</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when all responses are correct
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:11569/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 654
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 450
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        Resolution incorrect. Expected: width=80, height=50, actual: width=1280, height=800
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.11" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Correct response - incorrect RateControl and Quality values after min set</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when all responses are correct and there is incorrect RateControl and Quality values after min set
    </Description>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>10</FrameRateLimit>
            <EncodingInterval>10</EncodingInterval>
            <BitrateLimit>6400</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>164</GovLength>
            <MPEG4Profile>ASP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>20</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>10</tt:FrameRateLimit>
            <tt:EncodingInterval>10</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>164</tt:GovLength>
            <tt:MPEG4Profile>ASP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>800</tt:Width>
            <tt:Height>600</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    
  </Test>
  <Test ID = "TC.MS.2.1.4.12" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Wrong response after the median Set(wrong encoder)</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when there is wrong encoder after the "median" set
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:3246/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 665
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 600
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 14 - SetVideoEncoderConfiguration (use average values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 15
        Width = 800
        Height = 600
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 15 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 16 - Check that the DUT accepted values passed
        Encoding incorrect: expected MPEG4, actual H264
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>800</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>30</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>H264</tt:Encoding>
          <tt:Resolution>
            <tt:Width>800</tt:Width>
            <tt:Height>600</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.13" ONVIFTestID="2.1.4" Enabled="true">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Wrong response - incorrect resolution after median Set</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when all responses are correct
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:3246/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 665
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 600
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 14 - SetVideoEncoderConfiguration (use average values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 15
        Width = 800
        Height = 600
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 15 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 16 - Check that the DUT accepted values passed
        Resolution incorrect. Expected: width=800, height=600, actual: width=1280, height=720
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>720</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.14" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Correct response - incorrect RateControl and Quality values after median set</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when all responses are correct and there is incorrect RateControl and Quality values after median set
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:3246/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 665
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =720, height = 576
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 14 - SetVideoEncoderConfiguration (use average values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 15
        Width = 720
        Height = 576
        MPEG4 len = 32
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 15 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 16 - Check that the DUT accepted values passed
        STEP PASSED

        TEST PASSED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>720</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>800</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>30</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>720</tt:Width>
            <tt:Height>576</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>64</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.MS.2.1.4.15" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Fault on max Set</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when fault on max Set
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:11569/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 654
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 450
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 654
        STEP FAILED

        TEST FAILED

      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>JPEG</Encoding>
          <Resolution>
            <Height>720</Height>
            <Width>576</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>720</tt:Width>
            <tt:Height>576</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>

  <Test ID = "TC.MS.2.1.4.16" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>Only ASP is supported</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when all responses are correct
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:3246/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 665
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 600
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = ASP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 11 - SetVideoEncoderConfiguration (use min values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 1
        Width = 80
        Height = 50
        MPEG4 len = 32
        MPEG4 Profile = ASP
        Transmit done
        Receive done
        STEP PASSED

        STEP 12 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 13 - Check that the DUT accepted values passed
        STEP PASSED

        STEP 14 - SetVideoEncoderConfiguration (use average values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 15
        Width = 800
        Height = 600
        MPEG4 len = 32
        MPEG4 Profile = ASP
        Transmit done
        Receive done
        STEP PASSED

        STEP 15 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 16 - Check that the DUT accepted values passed
        STEP PASSED

        TEST PASSED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>ASP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>ASP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>ASP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>ASP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>ASP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>ASP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>600</Height>
            <Width>800</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>ASP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>800</tt:Width>
            <tt:Height>600</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>ASP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>

  <Test ID = "TC.MS.2.1.4.17" ONVIFTestID="2.1.4" Enabled="false">
    <TestName>2.1.4 MPEG4 VIDEO ENCODER CONFIGURATION</TestName>
    <Name>No MPEG4 after Set</Name>
    <Description>
      Check MPEG4 VIDEO ENCODER CONFIGURATION test
      when there is no MPEG4 section after SetVideoEncoderConfiguration
    </Description>
    <ExpectedResult>
      <TestSummary>
        MEDIA-2-1-4 MPEG4 VIDEO ENCODER CONFIGURATION

        STEP 1 - Getting media service address
        Transmit done
        Receive done
        STEP PASSED

        STEP 2 - Connect to Media service
        Media service address: http://localhost:11569/onvif/ServiceMedia10/MediaService.asmx
        STEP PASSED

        STEP 3 - Getting video encoder configurations
        Transmit done
        Receive done
        STEP PASSED

        STEP 4 - Validating video encoder configurations
        STEP PASSED

        STEP 5 - Getting video encoder configuration options
        Getting video encoder configuration options for configuration [quality_h264]
        Transmit done
        Receive done
        Getting video encoder configuration options for configuration [0]
        Receive done
        STEP PASSED

        STEP 6 - Setting video encoder configuration - negative test
        Setting invalid configuration (/VideoEncoderConfiguration/MPEG4/GovLength = 32768)
        Transmit done
        Receive done
        SOAP fault returned
        Code: Sender
        Subcode: InvalidArgVal
        Subcode: ConfigModify
        Reason: System.Web.Services.Protocols.SoapException: MESSAGE
        at DUT.CameraWebService.Media10.MediaService.StepTypeProcessing(StepType stepType, SoapException ex, Int32 timeOut) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 62
        at DUT.CameraWebService.Media10.MediaService.SetVideoEncoderConfiguration(VideoEncoderConfiguration Configuration, Boolean ForcePersistence) in D:\!ONVIF\DUT\Version2\DUT\CameraWebService\ServiceMedia10\MediaService.asmx.cs:line 654
        STEP PASSED

        STEP 7 - Find highest and lowest resolutions for further testing
        Highest resolution: width =1280, height = 800
        Median resolution: width =800, height = 600
        Lowest resolution: width =80, height = 50
        STEP PASSED

        STEP 8 - SetVideoEncoderConfiguration (use max values)
        Configuration token = 0
        Configuration name = user0
        Configuration encoding = MPEG4
        Frame rate = 30
        Width = 1280
        Height = 800
        MPEG4 len = 1
        MPEG4 Profile = SP
        Transmit done
        Receive done
        STEP PASSED

        STEP 9 - Getting video encoder configuration
        Transmit done
        Receive done
        STEP PASSED

        STEP 10 - Check that the DUT accepted values passed
        MPEG4 configuration not found
        STEP FAILED

        TEST FAILED
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Category>Media</Category>
      </RequestParameters>
      <ResponseParameters special="1">
        <Capabilities xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Media>
            <tt:XAddr>http://localhost:11569/MediaService.asmx</tt:XAddr>
            <tt:StreamingCapabilities>
              <tt:RTPMulticast>true</tt:RTPMulticast>
              <tt:RTP_TCP>false</tt:RTP_TCP>
              <tt:RTP_RTSP_TCP>false</tt:RTP_RTSP_TCP>
            </tt:StreamingCapabilities>
          </tt:Media>
        </Capabilities>
      </ResponseParameters>
    </Step>
    <Step id ="2">
      <Command>Media10.GetVideoEncoderConfigurations</Command>
      <Response>Normal</Response>
      <ResponseParameters>
        <ArrayOfVideoEncoderConfiguration  xmlns:tt="http://www.onvif.org/ver10/schema">
          <VideoEncoderConfiguration token="quality_h264">
            <tt:Name>quality h264</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>H264</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:H264>
              <tt:GovLength>8</tt:GovLength>
              <tt:H264Profile>Baseline</tt:H264Profile>
            </tt:H264>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
          <VideoEncoderConfiguration token="0">
            <tt:Name>user0</tt:Name>
            <tt:UseCount>0</tt:UseCount>
            <tt:Encoding>MPEG4</tt:Encoding>
            <tt:Resolution>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:Resolution>
            <tt:Quality>80</tt:Quality>
            <tt:RateControl>
              <tt:FrameRateLimit>0</tt:FrameRateLimit>
              <tt:EncodingInterval>0</tt:EncodingInterval>
              <tt:BitrateLimit>0</tt:BitrateLimit>
            </tt:RateControl>
            <tt:MPEG4>
              <tt:GovLength>16</tt:GovLength>
              <tt:MPEG4Profile>SP</tt:MPEG4Profile>
            </tt:MPEG4>
            <tt:Multicast>
              <tt:Address>
                <tt:Type>IPv4</tt:Type>
                <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
              </tt:Address>
              <tt:Port>0</tt:Port>
              <tt:TTL>5</tt:TTL>
              <tt:AutoStart>false</tt:AutoStart>
            </tt:Multicast>
            <tt:SessionTimeout>PT61S</tt:SessionTimeout>
          </VideoEncoderConfiguration>
        </ArrayOfVideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="3">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>quality_h264</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:H264>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:H264ProfilesSupported>Baseline</tt:H264ProfilesSupported>
          </tt:H264>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="4">
      <Command>Media10.GetVideoEncoderConfigurationOptions</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfigurationOptions xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:QualityRange>
            <tt:Min>0</tt:Min>
            <tt:Max>100</tt:Max>
          </tt:QualityRange>
          <tt:MPEG4>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>800</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1280</tt:Width>
              <tt:Height>720</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>768</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>1024</tt:Width>
              <tt:Height>640</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>600</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>500</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>800</tt:Width>
              <tt:Height>450</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>768</tt:Width>
              <tt:Height>576</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:ResolutionsAvailable>
              <tt:Width>80</tt:Width>
              <tt:Height>50</tt:Height>
            </tt:ResolutionsAvailable>
            <tt:GovLengthRange>
              <tt:Min>1</tt:Min>
              <tt:Max>32767</tt:Max>
            </tt:GovLengthRange>
            <tt:FrameRateRange>
              <tt:Min>1</tt:Min>
              <tt:Max>30</tt:Max>
            </tt:FrameRateRange>
            <tt:EncodingIntervalRange>
              <tt:Min>0</tt:Min>
              <tt:Max>0</tt:Max>
            </tt:EncodingIntervalRange>
            <tt:Mpeg4ProfilesSupported>SP</tt:Mpeg4ProfilesSupported>
            <tt:Mpeg4ProfilesSupported>ASP</tt:Mpeg4ProfilesSupported>
          </tt:MPEG4>
        </VideoEncoderConfigurationOptions>
      </ResponseParameters>
    </Step>
    <Step id ="5">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>ConfigModify</Subcode>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
    </Step>
    <Step id ="6">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>801</Height>
            <Width>1280</Width>
          </Resolution>
          <Quality>100</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>0</EncodingInterval>
            <BitrateLimit>0</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="7">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>1280</tt:Width>
            <tt:Height>800</tt:Height>
          </tt:Resolution>
          <tt:Quality>100</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>30</tt:FrameRateLimit>
            <tt:EncodingInterval>0</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="8">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>50</Height>
            <Width>80</Width>
          </Resolution>
          <Quality>0</Quality>
          <RateControl>
            <FrameRateLimit>1</FrameRateLimit>
            <EncodingInterval>100</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="9">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>0</RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>80</tt:Width>
            <tt:Height>50</tt:Height>
          </tt:Resolution>
          <tt:Quality>0</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>1</tt:FrameRateLimit>
            <tt:EncodingInterval>100</tt:EncodingInterval>
            <tt:BitrateLimit>64000</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:MPEG4Profile>SP</tt:MPEG4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
    <Step id ="10">
      <Command>Media10.SetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration token="0">
          <Name>user0</Name>
          <UseCount>0</UseCount>
          <Encoding>MPEG4</Encoding>
          <Resolution>
            <Height>600</Height>
            <Width>800</Width>
          </Resolution>
          <Quality>50</Quality>
          <RateControl>
            <FrameRateLimit>15</FrameRateLimit>
            <EncodingInterval>50</EncodingInterval>
            <BitrateLimit>64000</BitrateLimit>
          </RateControl>
          <MPEG4>
            <GovLength>16</GovLength>
            <MPEG4Profile>SP</MPEG4Profile>
          </MPEG4>
          <Multicast>
            <Address>
              <Type>IPv4</Type>
              <IPv4Address>0.0.0.0</IPv4Address>
            </Address>
            <Port>0</Port>
            <TTL>5</TTL>
            <AutoStart>False</AutoStart>
          </Multicast>
          <SessionTimeout>PT61S</SessionTimeout>
        </Configuration>
        <ForcePersistence>False</ForcePersistence>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id ="11">
      <Command>Media10.GetVideoEncoderConfiguration</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ConfigurationToken>0</ConfigurationToken>
      </RequestParameters>
      <ResponseParameters>
        <VideoEncoderConfiguration token="0" xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Name>0</tt:Name>
          <tt:UseCount>0</tt:UseCount>
          <tt:Encoding>MPEG4</tt:Encoding>
          <tt:Resolution>
            <tt:Width>800</tt:Width>
            <tt:Height>600</tt:Height>
          </tt:Resolution>
          <tt:Quality>50</tt:Quality>
          <tt:RateControl>
            <tt:FrameRateLimit>15</tt:FrameRateLimit>
            <tt:EncodingInterval>50</tt:EncodingInterval>
            <tt:BitrateLimit>6400</tt:BitrateLimit>
          </tt:RateControl>
          <tt:MPEG4>
            <tt:GovLength>16</tt:GovLength>
            <tt:Mpeg4Profile>SP</tt:Mpeg4Profile>
          </tt:MPEG4>
          <tt:Multicast>
            <tt:Address>
              <tt:Type>IPv4</tt:Type>
              <tt:IPv4Address>0.0.0.0</tt:IPv4Address>
            </tt:Address>
            <tt:Port>0</tt:Port>
            <tt:TTL>5</tt:TTL>
            <tt:AutoStart>false</tt:AutoStart>
          </tt:Multicast>
          <tt:SessionTimeout>PT60S</tt:SessionTimeout>
        </VideoEncoderConfiguration>
      </ResponseParameters>
    </Step>
  </Test>
 </TestSuit>
