<?xml version="1.0" encoding="utf-8" ?>
<TestSuit Name="Receiver general" Version="0.1">
  <Parameters>
    <TimeOut>100000</TimeOut>
    <Name>RECEIVER-2-1-21 CONFIGURE RECEIVER – PERSISTENCE</Name>
    <Description>

    </Description>
  </Parameters>
  <Test ID = "TC.RECEIVER-2-1-21.01" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>Correct response</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>NeverConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Unicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.GetServiceCapabilities</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <Capabilities RTP_Multicast="true" RTP_RTSP_TCP="true" SupportedReceivers="15" MaximumRTSPURILength="256" />
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>AutoConnect</Mode>
          <MediaUri>http://localhost/Valid/URI</MediaUri>
          <StreamSetup>
            <Stream>RTP-Multicast</Stream>
            <Transport>
              <Protocol>HTTP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Device10.SystemReboot</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <string>Rebooting in 10 seconds</string>
      </ResponseParameters>
    </Step>
    <Step id="5">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>http://localhost/Valid/URI</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>HTTP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="6">
      <Command>Receiver10.GetReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
      </RequestParameters>
      <ResponseParameters>
        <Receiver>
          <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
          <Configuration xmlns="http://www.onvif.org/ver10/schema">
            <Mode>AutoConnect</Mode>
            <MediaUri>http://localhost/Valid/URI</MediaUri>
            <StreamSetup>
              <Stream>RTP-Multicast</Stream>
              <Transport>
                <Protocol>HTTP</Protocol>
              </Transport>
            </StreamSetup>
          </Configuration>
        </Receiver>
      </ResponseParameters>
    </Step>
    <Step id="7">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>NeverConnect</Mode>
          <MediaUri>ValidUri</MediaUri>
          <StreamSetup>
            <Stream>RTP-Unicast</Stream>
            <Transport>
              <Protocol>UDP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.RECEIVER-2-1-21.02" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>Correct response (with no receivers)</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">

        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.CreateReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Mode>NeverConnect</tt:Mode>
          <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
          <tt:StreamSetup>
            <tt:Stream>RTP-Unicast</tt:Stream>
            <tt:Transport>
              <tt:Protocol>UDP</tt:Protocol>
            </tt:Transport>
          </tt:StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <Receiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Token>receiver1</tt:Token>
          <tt:Configuration>
            <tt:Mode>NeverConnect</tt:Mode>
            <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
            <tt:StreamSetup>
              <tt:Stream>RTP-Unicast</tt:Stream>
              <tt:Transport>
                <tt:Protocol>UDP</tt:Protocol>
              </tt:Transport>
            </tt:StreamSetup>
          </tt:Configuration>
        </Receiver>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>AutoConnect</Mode>
          <MediaUri>http://localhost/Valid/NewURI</MediaUri>
          <StreamSetup>
            <Stream>RTP-Multicast</Stream>
            <Transport>
              <Protocol>HTTP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="5">
      <Command>Device10.SystemReboot</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <string>Rebooting in 10 seconds</string>
      </ResponseParameters>
    </Step>
    <Step id="6">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>http://localhost/Valid/NewURI</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>HTTP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="7">
      <Command>Receiver10.GetReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
      </RequestParameters>
      <ResponseParameters>
        <Receiver>
          <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
          <Configuration xmlns="http://www.onvif.org/ver10/schema">
            <Mode>AutoConnect</Mode>
            <MediaUri>http://localhost/Valid/NewURI</MediaUri>
            <StreamSetup>
              <Stream>RTP-Multicast</Stream>
              <Transport>
                <Protocol>HTTP</Protocol>
              </Transport>
            </StreamSetup>
          </Configuration>
        </Receiver>
      </ResponseParameters>
    </Step>
    <Step id="8">
      <Command>Receiver10.DeleteReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.RECEIVER-2-1-21.03" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>Wrong receiver parameters at GetReceiver</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>NeverConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Unicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>AutoConnect</Mode>
          <MediaUri>http://localhost/Valid/URI</MediaUri>
          <StreamSetup>
            <Stream>RTP-Multicast</Stream>
            <Transport>
              <Protocol>HTTP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Device10.SystemReboot</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <string>Rebooting in 10 seconds</string>
      </ResponseParameters>
    </Step>
    <Step id="5">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>http://localhost/Valid/URI</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>HTTP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="6">
      <Command>Receiver10.GetReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
      </RequestParameters>
      <ResponseParameters>
        <Receiver>
          <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
          <Configuration xmlns="http://www.onvif.org/ver10/schema">
            <Mode>NeverConnect</Mode>
            <MediaUri>ValidUri</MediaUri>
            <StreamSetup>
              <Stream>RTP-Unicast</Stream>
              <Transport>
                <Protocol>UDP</Protocol>
              </Transport>
            </StreamSetup>
          </Configuration>
        </Receiver>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.RECEIVER-2-1-21.04" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>Wrong receiver parameters at GetReceivers</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>NeverConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Unicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>AutoConnect</Mode>
          <MediaUri>http://localhost/Valid/URI</MediaUri>
          <StreamSetup>
            <Stream>RTP-Multicast</Stream>
            <Transport>
              <Protocol>HTTP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Device10.SystemReboot</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <string>Rebooting in 10 seconds</string>
      </ResponseParameters>
    </Step>
    <Step id="5">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>NeverConnect</Mode>
              <MediaUri>ValidUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Unicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.RECEIVER-2-1-21.05" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>The DUT did not send SystemRebootResponse message</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>NeverConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Unicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>AutoConnect</Mode>
          <MediaUri>http://localhost/Valid/URI</MediaUri>
          <StreamSetup>
            <Stream>RTP-Multicast</Stream>
            <Transport>
              <Protocol>HTTP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Device10.SystemReboot</Command>
      <Response>Null</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.RECEIVER-2-1-21.06" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>Fault on GetReceiver</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">

        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.CreateReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Mode>NeverConnect</tt:Mode>
          <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
          <tt:StreamSetup>
            <tt:Stream>RTP-Unicast</tt:Stream>
            <tt:Transport>
              <tt:Protocol>UDP</tt:Protocol>
            </tt:Transport>
          </tt:StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <Receiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Token>receiver1</tt:Token>
          <tt:Configuration>
            <tt:Mode>NeverConnect</tt:Mode>
            <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
            <tt:StreamSetup>
              <tt:Stream>RTP-Unicast</tt:Stream>
              <tt:Transport>
                <tt:Protocol>UDP</tt:Protocol>
              </tt:Transport>
            </tt:StreamSetup>
          </tt:Configuration>
        </Receiver>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>AutoConnect</Mode>
          <MediaUri>http://localhost/Valid/NewURI</MediaUri>
          <StreamSetup>
            <Stream>RTP-Multicast</Stream>
            <Transport>
              <Protocol>HTTP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="5">
      <Command>Device10.SystemReboot</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <string>Rebooting in 10 seconds</string>
      </ResponseParameters>
    </Step>
    <Step id="6">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>http://localhost/Valid/NewURI</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>HTTP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="7">
      <Command>Receiver10.GetReceiver</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>UnknownToken</Subcode>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.RECEIVER-2-1-21.07" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>Fault on GetReceivers</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">

        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.CreateReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Mode>NeverConnect</tt:Mode>
          <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
          <tt:StreamSetup>
            <tt:Stream>RTP-Unicast</tt:Stream>
            <tt:Transport>
              <tt:Protocol>UDP</tt:Protocol>
            </tt:Transport>
          </tt:StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <Receiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Token>receiver1</tt:Token>
          <tt:Configuration>
            <tt:Mode>NeverConnect</tt:Mode>
            <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
            <tt:StreamSetup>
              <tt:Stream>RTP-Unicast</tt:Stream>
              <tt:Transport>
                <tt:Protocol>UDP</tt:Protocol>
              </tt:Transport>
            </tt:StreamSetup>
          </tt:Configuration>
        </Receiver>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>AutoConnect</Mode>
          <MediaUri>http://localhost/Valid/NewURI</MediaUri>
          <StreamSetup>
            <Stream>RTP-Multicast</Stream>
            <Transport>
              <Protocol>HTTP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
    <Step id="5">
      <Command>Device10.SystemReboot</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <string>Rebooting in 10 seconds</string>
      </ResponseParameters>
    </Step>
    <Step id="6">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>UnknownToken</Subcode>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver1</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>http://localhost/Valid/NewURI</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>HTTP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
          <Receiver>
            <Token xmlns="http://www.onvif.org/ver10/schema">receiver2</Token>
            <Configuration xmlns="http://www.onvif.org/ver10/schema">
              <Mode>AutoConnect</Mode>
              <MediaUri>validUri</MediaUri>
              <StreamSetup>
                <Stream>RTP-Multicast</Stream>
                <Transport>
                  <Protocol>UDP</Protocol>
                </Transport>
              </StreamSetup>
            </Configuration>
          </Receiver>
        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.RECEIVER-2-1-21.08" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>Fault on ConfigureReceiver</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">

        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.CreateReceiver</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <Configuration xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Mode>NeverConnect</tt:Mode>
          <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
          <tt:StreamSetup>
            <tt:Stream>RTP-Unicast</tt:Stream>
            <tt:Transport>
              <tt:Protocol>UDP</tt:Protocol>
            </tt:Transport>
          </tt:StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
        <Receiver xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Token>receiver1</tt:Token>
          <tt:Configuration>
            <tt:Mode>NeverConnect</tt:Mode>
            <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
            <tt:StreamSetup>
              <tt:Stream>RTP-Unicast</tt:Stream>
              <tt:Transport>
                <tt:Protocol>UDP</tt:Protocol>
              </tt:Transport>
            </tt:StreamSetup>
          </tt:Configuration>
        </Receiver>
      </ResponseParameters>
    </Step>
    <Step id="4">
      <Command>Receiver10.ConfigureReceiver</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>UnknownToken</Subcode>
      <RequestParameters>
        <ReceiverToken>receiver1</ReceiverToken>
        <Configuration>
          <Mode>AutoConnect</Mode>
          <MediaUri>http://localhost/Valid/NewURI</MediaUri>
          <StreamSetup>
            <Stream>RTP-Multicast</Stream>
            <Transport>
              <Protocol>HTTP</Protocol>
            </Transport>
          </StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
  <Test ID = "TC.RECEIVER-2-1-21.09" ONVIFTestID="RECEIVER-2-1-21" Enabled="true">
    <TestName>CONFIGURE RECEIVER – PERSISTENCE</TestName>
    <Name>Fault on CreateReceiver</Name>
    <Description>
    </Description>
    <ExpectedResult>
      <TestSummary>
      </TestSummary>
    </ExpectedResult>
    <Step id ="1">
      <Command>Device10.GetServices</Command>
      <Response>Normal</Response>
      <RequestParameters>
        <IncludeCapability>False</IncludeCapability>
      </RequestParameters>
      <ResponseParameters special="1">
        <ArrayOfService xmlns:tds="http://www.onvif.org/ver10/device/wsdl" xmlns:tt="http://www.onvif.org/ver10/schema">
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceDevice10/DeviceServiceFake.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
          <Service>
            <tds:Namespace>http://www.onvif.org/ver10/receiver/wsdl</tds:Namespace>
            <tds:XAddr>http://localhost/onvif/ServiceReceiver10/receiverService.asmx </tds:XAddr>
            <tds:Version>
              <tt:Major>2</tt:Major>
              <tt:Minor>1</tt:Minor>
            </tds:Version>
          </Service>
        </ArrayOfService>
      </ResponseParameters>
    </Step>
    <Step id="2">
      <Command>Receiver10.GetReceivers</Command>
      <Response>Normal</Response>
      <RequestParameters>
      </RequestParameters>
      <ResponseParameters>
        <ArrayOfReceiver xmlns:tt="http://www.onvif.org/ver10/schema">

        </ArrayOfReceiver>
      </ResponseParameters>
    </Step>
    <Step id="3">
      <Command>Receiver10.CreateReceiver</Command>
      <Response>Fault</Response>
      <Code>Sender</Code>
      <Subcode>InvalidArgVal</Subcode>
      <Subcode>BadConfiguration</Subcode>
      <RequestParameters>
        <Configuration xmlns:tt="http://www.onvif.org/ver10/schema">
          <tt:Mode>NeverConnect</tt:Mode>
          <tt:MediaUri>http://localhost/Valid/URI</tt:MediaUri>
          <tt:StreamSetup>
            <tt:Stream>RTP-Unicast</tt:Stream>
            <tt:Transport>
              <tt:Protocol>UDP</tt:Protocol>
            </tt:Transport>
          </tt:StreamSetup>
        </Configuration>
      </RequestParameters>
      <ResponseParameters>
      </ResponseParameters>
    </Step>
  </Test>
</TestSuit>
